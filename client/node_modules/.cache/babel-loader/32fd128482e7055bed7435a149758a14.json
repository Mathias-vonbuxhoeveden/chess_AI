{"ast":null,"code":"var _jsxFileName = \"/Users/m.von-buxhoeveden/Desktop/chess_ai_blue_print/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState } from 'react';\nimport { Chess } from 'chess.js';\nimport { Chessboard } from 'react-chessboard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PlayVsRandom(_ref) {\n  _s();\n\n  let {\n    boardWidth\n  } = _ref;\n  const chessboardRef = useRef();\n  const [game, setGame] = useState(new Chess());\n  const [arrows, setArrows] = useState([]);\n  const [boardOrientation, setBoardOrientation] = useState('white');\n  const [currentTimeout, setCurrentTimeout] = useState(undefined);\n\n  function safeGameMutate(modify) {\n    setGame(g => {\n      const update = { ...g\n      };\n      modify(update);\n      return update;\n    });\n  }\n\n  function makeRandomMove() {\n    fetch('/members', {\n      method: 'POST',\n      // or 'PUT'\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(game.fen())\n    }).then(response => response.json()).then(actualData => {\n      safeGameMutate(game => {\n        game.move(actualData);\n      });\n    });\n  }\n\n  function onDrop(sourceSquare, targetSquare) {\n    const gameCopy = { ...game\n    };\n    const move = gameCopy.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to a queen for example simplicity\n\n    });\n    setGame(gameCopy); // illegal move\n\n    if (move === null) return false;\n    console.log(boardOrientation); // store timeout so it can be cleared on undo/reset so computer doesn't execute move\n\n    const newTimeout = setTimeout(makeRandomMove, 200);\n    setCurrentTimeout(newTimeout);\n    return true;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Chessboard, {\n      id: \"PlayVsRandom\",\n      animationDuration: 200,\n      boardOrientation: boardOrientation,\n      boardWidth: boardWidth,\n      customArrows: arrows,\n      position: game.fen(),\n      onPieceDrop: onDrop,\n      customBoardStyle: {\n        borderRadius: '4px',\n        boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n      },\n      ref: chessboardRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"rc-button\",\n      onClick: () => {\n        console.log(game.fen());\n        safeGameMutate(game => {\n          game.reset();\n        }); // stop any current timeouts\n\n        clearTimeout(currentTimeout);\n        console.log(game.fen());\n\n        if (boardOrientation == 'black') {}\n\n        ;\n      },\n      children: \"reset\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"rc-button\",\n      onClick: () => {\n        setBoardOrientation(currentOrientation => currentOrientation === 'white' ? 'black' : 'white');\n\n        if (game.fen() == 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' && boardOrientation == 'white') {\n          makeRandomMove();\n        }\n\n        ;\n      },\n      children: \"flip board\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"rc-button\",\n      onClick: () => {\n        safeGameMutate(game => {\n          game.undo();\n        }); // stop any current timeouts\n\n        clearTimeout(currentTimeout);\n      },\n      children: \"undo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"rc-button\",\n      onClick: () => {\n        setArrows([['a3', 'a5'], ['g1', 'f3']]);\n      },\n      children: \"Set Custom Arrows\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PlayVsRandom, \"jznKThMt7bzLmIma4pYiLOAnIRI=\");\n\n_c = PlayVsRandom;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlayVsRandom\");","map":{"version":3,"sources":["/Users/m.von-buxhoeveden/Desktop/chess_ai_blue_print/client/src/App.js"],"names":["useRef","useState","Chess","Chessboard","PlayVsRandom","boardWidth","chessboardRef","game","setGame","arrows","setArrows","boardOrientation","setBoardOrientation","currentTimeout","setCurrentTimeout","undefined","safeGameMutate","modify","g","update","makeRandomMove","fetch","method","headers","body","JSON","stringify","fen","then","response","json","actualData","move","onDrop","sourceSquare","targetSquare","gameCopy","from","to","promotion","console","log","newTimeout","setTimeout","borderRadius","boxShadow","reset","clearTimeout","currentOrientation","undo"],"mappings":"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","sourcesContent":["import { useRef, useState } from 'react';\nimport {Chess} from 'chess.js';\n\nimport { Chessboard } from 'react-chessboard';\n\nexport default function PlayVsRandom({ boardWidth }) {\n  const chessboardRef = useRef();\n  const [game, setGame] = useState(new Chess());\n  const [arrows, setArrows] = useState([]);\n  const [boardOrientation, setBoardOrientation] = useState('white');\n  const [currentTimeout, setCurrentTimeout] = useState(undefined);\n\n  function safeGameMutate(modify) {\n    setGame((g) => {\n      const update = { ...g };\n      modify(update);\n      return update;\n    });\n  }\n\n  function makeRandomMove() {\n\n     fetch('/members',  {\n        method: 'POST', // or 'PUT'\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(game.fen()),\n      })\n    .then((response) => response.json())\n    .then((actualData) => {\n      safeGameMutate((game) => {\n           game.move(actualData);\n         });\n\n\n    })}\n\n  function onDrop(sourceSquare, targetSquare) {\n\n    const gameCopy = { ...game };\n    const move = gameCopy.move({\n      from: sourceSquare,\n      to: targetSquare,\n      promotion: 'q' // always promote to a queen for example simplicity\n    });\n    setGame(gameCopy);\n\n    // illegal move\n    if (move === null) return false;\n    console.log(boardOrientation)\n\n    // store timeout so it can be cleared on undo/reset so computer doesn't execute move\n    const newTimeout = setTimeout(makeRandomMove, 200);\n    setCurrentTimeout(newTimeout);\n    return true;\n  }\n\n  return (\n    <div>\n      <Chessboard\n        id=\"PlayVsRandom\"\n        animationDuration={200}\n        boardOrientation={boardOrientation}\n        boardWidth={boardWidth}\n        customArrows={arrows}\n        position={game.fen()}\n        onPieceDrop={onDrop}\n        customBoardStyle={{\n          borderRadius: '4px',\n          boxShadow: '0 5px 15px rgba(0, 0, 0, 0.5)'\n        }}\n        ref={chessboardRef}\n      />\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n          console.log(game.fen())\n          safeGameMutate((game) => {\n            game.reset();\n          });\n          // stop any current timeouts\n          clearTimeout(currentTimeout);\n          console.log(game.fen())\n          if (boardOrientation == 'black') {\n                                          };\n        }}\n      >\n        reset\n      </button>\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n\n          setBoardOrientation((currentOrientation) => (currentOrientation === 'white' ? 'black' : 'white'))\n          if (game.fen() == 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1' && boardOrientation == 'white') {\n          makeRandomMove()\n                                          };\n        }}\n      >\n        flip board\n      </button>\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n          safeGameMutate((game) => {\n            game.undo();\n          });\n          // stop any current timeouts\n          clearTimeout(currentTimeout);\n        }}\n      >\n        undo\n      </button>\n      <button\n        className=\"rc-button\"\n        onClick={() => {\n          setArrows([\n            ['a3', 'a5'],\n            ['g1', 'f3']\n          ]);\n        }}\n      >\n        Set Custom Arrows\n      </button>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}