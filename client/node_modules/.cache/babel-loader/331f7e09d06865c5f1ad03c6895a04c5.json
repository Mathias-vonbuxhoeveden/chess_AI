{"ast":null,"code":"import React, { createContext, memo, useEffect, isValidElement, cloneElement, createRef, Component, useLayoutEffect, useMemo, useContext, useState, useCallback, forwardRef, useRef, useImperativeHandle, Fragment as Fragment$1 } from 'react';\nimport 'react-dom';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\n/**\n * Create the React Context\n */\n\nvar DndContext = /*#__PURE__*/createContext({\n  dragDropManager: undefined\n});\nvar HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n/**\r\n * Use invariant() to assert state which your program assumes to be true.\r\n *\r\n * Provide sprintf-style format (only %s is supported) and arguments\r\n * to provide information about what broke and what you were\r\n * expecting.\r\n *\r\n * The invariant message will be stripped in production, but the invariant\r\n * will remain to ensure logic does not differ in production.\r\n */\n\n\nfunction invariant(condition, format) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n\n    throw error;\n  }\n}\n\nvar INIT_COORDS = 'dnd-core/INIT_COORDS';\nvar BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nvar PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nvar HOVER = 'dnd-core/HOVER';\nvar DROP = 'dnd-core/DROP';\nvar END_DRAG = 'dnd-core/END_DRAG';\n\nfunction setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}\n\nfunction _typeof$5(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$5 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$5 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$5(obj);\n} // cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\n\n\nfunction get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\n\nfunction without$1(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\n\nfunction isObject(input) {\n  return _typeof$5(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\n\nfunction xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\n\nfunction intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}\n\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\n\nfunction createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants$1(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants$1(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}\n\nfunction createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}\n\nfunction matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}\n\nfunction createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty$l(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$l(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread$4(_objectSpread$4({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}\n\nfunction createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\nfunction createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}\n\nfunction _classCallCheck$i(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$g(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$g(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$g(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$g(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$k(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck$i(this, DragDropManagerImpl);\n\n    _defineProperty$k(this, \"store\", void 0);\n\n    _defineProperty$k(this, \"monitor\", void 0);\n\n    _defineProperty$k(this, \"backend\", void 0);\n\n    _defineProperty$k(this, \"isSetUp\", false);\n\n    _defineProperty$k(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass$g(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\n\n\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n} // Inlined version of the `symbol-observable` polyfill\n\n\nvar $$observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject$1(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n} // Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\n\n\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject$1(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nvar strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\n\nfunction areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\n\nfunction areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty$j(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$j(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar initialState$1 = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\n\nfunction reduce$5() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread$3(_objectSpread$3({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState$1;\n\n    default:\n      return state;\n  }\n}\n\nvar ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nvar ADD_TARGET = 'dnd-core/ADD_TARGET';\nvar REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nvar REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\n\nfunction addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\n\nfunction addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\n\nfunction removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty$i(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$i(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\n\nfunction reduce$4() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: without$1(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction reduce$3() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}\n\nvar NONE = [];\nvar ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nfunction areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}\n\nfunction reduce$2() {\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nfunction reduce$1() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty$h(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$h(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: reduce$2(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread$1(_objectSpread$1({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: reduce$5(state.dragOffset, action),\n    refCount: reduce$3(state.refCount, action),\n    dragOperation: reduce$4(state.dragOperation, action),\n    stateId: reduce$1(state.stateId)\n  };\n}\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\n\nfunction add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\n\nfunction subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\n\nfunction getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\n\nfunction getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}\n\nfunction _classCallCheck$h(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$f(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$f(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$f(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$f(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$g(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck$h(this, DragDropMonitorImpl);\n\n    _defineProperty$g(this, \"store\", void 0);\n\n    _defineProperty$g(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass$f(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      }; // undefined on initial render\n\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset$1() {\n      return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset$1() {\n      return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();\n\nvar nextUniqueId = 0;\n\nfunction getNextUniqueId() {\n  return nextUniqueId++;\n}\n\nfunction _typeof$4(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$4 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$4 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$4(obj);\n}\n\nfunction validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\n\nfunction validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\n\nfunction validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof$4(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n} // Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\n\n\nfunction rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\n\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nfunction asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();\n\nfunction _classCallCheck$g(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$e(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$e(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$e(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$e(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$f(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray$5(arr, i) {\n  return _arrayWithHoles$5(arr) || _iterableToArrayLimit$5(arr, i) || _unsupportedIterableToArray$8(arr, i) || _nonIterableRest$5();\n}\n\nfunction _nonIterableRest$5() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$8(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$8(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$8(o, minLen);\n}\n\nfunction _arrayLikeToArray$8(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$5(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$5(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray$5(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck$g(this, HandlerRegistryImpl);\n\n    _defineProperty$f(this, \"types\", new Map());\n\n    _defineProperty$f(this, \"dragSources\", new Map());\n\n    _defineProperty$f(this, \"dropTargets\", new Map());\n\n    _defineProperty$f(this, \"pinnedSourceId\", null);\n\n    _defineProperty$f(this, \"pinnedSource\", null);\n\n    _defineProperty$f(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass$e(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource$1(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget$1(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource$1(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget$1(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();\n\nfunction createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar _excluded = [\"children\"];\n\nfunction _slicedToArray$4(arr, i) {\n  return _arrayWithHoles$4(arr) || _iterableToArrayLimit$4(arr, i) || _unsupportedIterableToArray$7(arr, i) || _nonIterableRest$4();\n}\n\nfunction _nonIterableRest$4() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$7(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$7(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$7(o, minLen);\n}\n\nfunction _arrayLikeToArray$7(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$4(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$4(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nvar DndProvider = /*#__PURE__*/memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray$4(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}\n\nfunction _classCallCheck$f(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$d(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$d(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$d(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$d(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$e(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\n\nvar DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck$f(this, DragSourceMonitorImpl);\n\n    _defineProperty$e(this, \"internalMonitor\", void 0);\n\n    _defineProperty$e(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$d(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();\n\nfunction _classCallCheck$e(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$c(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$c(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$c(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$c(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$d(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar isCallingCanDrop = false;\n\nvar DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck$e(this, DropTargetMonitorImpl);\n\n    _defineProperty$d(this, \"internalMonitor\", void 0);\n\n    _defineProperty$d(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$c(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // When passed a node, call the hook straight away.\n\n    if (! /*#__PURE__*/isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nfunction wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return /*#__PURE__*/cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return /*#__PURE__*/cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}\n\nfunction _typeof$3(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$3 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$3 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$3(obj);\n}\n\nfunction isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof$3(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}\n\nfunction shallowEqual(objA, objB, compare, compareContext) {\n  var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction _classCallCheck$d(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$b(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$b(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$b(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$b(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$c(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$d(this, SourceConnector);\n\n    _defineProperty$c(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty$c(this, \"handlerId\", null);\n\n    _defineProperty$c(this, \"dragSourceRef\", null);\n\n    _defineProperty$c(this, \"dragSourceNode\", void 0);\n\n    _defineProperty$c(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewRef\", null);\n\n    _defineProperty$c(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty$c(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$b(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();\n\nfunction _classCallCheck$c(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$a(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$a(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$a(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$a(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$b(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$c(this, TargetConnector);\n\n    _defineProperty$b(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty$b(this, \"handlerId\", null);\n\n    _defineProperty$b(this, \"dropTargetRef\", null);\n\n    _defineProperty$b(this, \"dropTargetNode\", void 0);\n\n    _defineProperty$b(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty$b(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty$b(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty$b(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$a(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();\n\nfunction registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\n\nfunction registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}\n\nfunction _typeof$2(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$2 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$2 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$2(obj);\n}\n\nfunction isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\n\nfunction isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\n\nfunction isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\n\nfunction checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\n\nfunction isObjectLike(input) {\n  return _typeof$2(input) === 'object' && input !== null;\n}\n\nfunction isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\n\nvar reactIs$1 = {\n  exports: {}\n};\nvar reactIs_production_min = {};\n/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar b = \"function\" === typeof Symbol && Symbol.for,\n    c = b ? Symbol.for(\"react.element\") : 60103,\n    d = b ? Symbol.for(\"react.portal\") : 60106,\n    e = b ? Symbol.for(\"react.fragment\") : 60107,\n    f = b ? Symbol.for(\"react.strict_mode\") : 60108,\n    g = b ? Symbol.for(\"react.profiler\") : 60114,\n    h = b ? Symbol.for(\"react.provider\") : 60109,\n    k = b ? Symbol.for(\"react.context\") : 60110,\n    l = b ? Symbol.for(\"react.async_mode\") : 60111,\n    m = b ? Symbol.for(\"react.concurrent_mode\") : 60111,\n    n = b ? Symbol.for(\"react.forward_ref\") : 60112,\n    p = b ? Symbol.for(\"react.suspense\") : 60113,\n    q = b ? Symbol.for(\"react.suspense_list\") : 60120,\n    r = b ? Symbol.for(\"react.memo\") : 60115,\n    t = b ? Symbol.for(\"react.lazy\") : 60116,\n    v = b ? Symbol.for(\"react.block\") : 60121,\n    w = b ? Symbol.for(\"react.fundamental\") : 60117,\n    x = b ? Symbol.for(\"react.responder\") : 60118,\n    y = b ? Symbol.for(\"react.scope\") : 60119;\n\nfunction z(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var u = a.$$typeof;\n\n    switch (u) {\n      case c:\n        switch (a = a.type, a) {\n          case l:\n          case m:\n          case e:\n          case g:\n          case f:\n          case p:\n            return a;\n\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case n:\n              case t:\n              case r:\n              case h:\n                return a;\n\n              default:\n                return u;\n            }\n\n        }\n\n      case d:\n        return u;\n    }\n  }\n}\n\nfunction A(a) {\n  return z(a) === m;\n}\n\nreactIs_production_min.AsyncMode = l;\nreactIs_production_min.ConcurrentMode = m;\nreactIs_production_min.ContextConsumer = k;\nreactIs_production_min.ContextProvider = h;\nreactIs_production_min.Element = c;\nreactIs_production_min.ForwardRef = n;\nreactIs_production_min.Fragment = e;\nreactIs_production_min.Lazy = t;\nreactIs_production_min.Memo = r;\nreactIs_production_min.Portal = d;\nreactIs_production_min.Profiler = g;\nreactIs_production_min.StrictMode = f;\nreactIs_production_min.Suspense = p;\n\nreactIs_production_min.isAsyncMode = function (a) {\n  return A(a) || z(a) === l;\n};\n\nreactIs_production_min.isConcurrentMode = A;\n\nreactIs_production_min.isContextConsumer = function (a) {\n  return z(a) === k;\n};\n\nreactIs_production_min.isContextProvider = function (a) {\n  return z(a) === h;\n};\n\nreactIs_production_min.isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === c;\n};\n\nreactIs_production_min.isForwardRef = function (a) {\n  return z(a) === n;\n};\n\nreactIs_production_min.isFragment = function (a) {\n  return z(a) === e;\n};\n\nreactIs_production_min.isLazy = function (a) {\n  return z(a) === t;\n};\n\nreactIs_production_min.isMemo = function (a) {\n  return z(a) === r;\n};\n\nreactIs_production_min.isPortal = function (a) {\n  return z(a) === d;\n};\n\nreactIs_production_min.isProfiler = function (a) {\n  return z(a) === g;\n};\n\nreactIs_production_min.isStrictMode = function (a) {\n  return z(a) === f;\n};\n\nreactIs_production_min.isSuspense = function (a) {\n  return z(a) === p;\n};\n\nreactIs_production_min.isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || \"object\" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);\n};\n\nreactIs_production_min.typeOf = z;\nvar reactIs_development = {};\n/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function () {\n    // nor polyfill, then a plain number is used for performance.\n    var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n    var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n    var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n    var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n    var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n    var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n    var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n    var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n    // (unstable) APIs that have been removed. Can we remove the symbols?\n\n    var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n    var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n    var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n    var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n    var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n    var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n    var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n    var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n    var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n    var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n    var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\n    function isValidElementType(type) {\n      return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n      type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n    }\n\n    function typeOf(object) {\n      if (typeof object === 'object' && object !== null) {\n        var $$typeof = object.$$typeof;\n\n        switch ($$typeof) {\n          case REACT_ELEMENT_TYPE:\n            var type = object.type;\n\n            switch (type) {\n              case REACT_ASYNC_MODE_TYPE:\n              case REACT_CONCURRENT_MODE_TYPE:\n              case REACT_FRAGMENT_TYPE:\n              case REACT_PROFILER_TYPE:\n              case REACT_STRICT_MODE_TYPE:\n              case REACT_SUSPENSE_TYPE:\n                return type;\n\n              default:\n                var $$typeofType = type && type.$$typeof;\n\n                switch ($$typeofType) {\n                  case REACT_CONTEXT_TYPE:\n                  case REACT_FORWARD_REF_TYPE:\n                  case REACT_LAZY_TYPE:\n                  case REACT_MEMO_TYPE:\n                  case REACT_PROVIDER_TYPE:\n                    return $$typeofType;\n\n                  default:\n                    return $$typeof;\n                }\n\n            }\n\n          case REACT_PORTAL_TYPE:\n            return $$typeof;\n        }\n      }\n\n      return undefined;\n    } // AsyncMode is deprecated along with isAsyncMode\n\n\n    var AsyncMode = REACT_ASYNC_MODE_TYPE;\n    var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n    var ContextConsumer = REACT_CONTEXT_TYPE;\n    var ContextProvider = REACT_PROVIDER_TYPE;\n    var Element = REACT_ELEMENT_TYPE;\n    var ForwardRef = REACT_FORWARD_REF_TYPE;\n    var Fragment = REACT_FRAGMENT_TYPE;\n    var Lazy = REACT_LAZY_TYPE;\n    var Memo = REACT_MEMO_TYPE;\n    var Portal = REACT_PORTAL_TYPE;\n    var Profiler = REACT_PROFILER_TYPE;\n    var StrictMode = REACT_STRICT_MODE_TYPE;\n    var Suspense = REACT_SUSPENSE_TYPE;\n    var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n    function isAsyncMode(object) {\n      {\n        if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n          hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n          console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n        }\n      }\n      return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n    }\n\n    function isConcurrentMode(object) {\n      return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n    }\n\n    function isContextConsumer(object) {\n      return typeOf(object) === REACT_CONTEXT_TYPE;\n    }\n\n    function isContextProvider(object) {\n      return typeOf(object) === REACT_PROVIDER_TYPE;\n    }\n\n    function isElement(object) {\n      return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n    }\n\n    function isForwardRef(object) {\n      return typeOf(object) === REACT_FORWARD_REF_TYPE;\n    }\n\n    function isFragment(object) {\n      return typeOf(object) === REACT_FRAGMENT_TYPE;\n    }\n\n    function isLazy(object) {\n      return typeOf(object) === REACT_LAZY_TYPE;\n    }\n\n    function isMemo(object) {\n      return typeOf(object) === REACT_MEMO_TYPE;\n    }\n\n    function isPortal(object) {\n      return typeOf(object) === REACT_PORTAL_TYPE;\n    }\n\n    function isProfiler(object) {\n      return typeOf(object) === REACT_PROFILER_TYPE;\n    }\n\n    function isStrictMode(object) {\n      return typeOf(object) === REACT_STRICT_MODE_TYPE;\n    }\n\n    function isSuspense(object) {\n      return typeOf(object) === REACT_SUSPENSE_TYPE;\n    }\n\n    reactIs_development.AsyncMode = AsyncMode;\n    reactIs_development.ConcurrentMode = ConcurrentMode;\n    reactIs_development.ContextConsumer = ContextConsumer;\n    reactIs_development.ContextProvider = ContextProvider;\n    reactIs_development.Element = Element;\n    reactIs_development.ForwardRef = ForwardRef;\n    reactIs_development.Fragment = Fragment;\n    reactIs_development.Lazy = Lazy;\n    reactIs_development.Memo = Memo;\n    reactIs_development.Portal = Portal;\n    reactIs_development.Profiler = Profiler;\n    reactIs_development.StrictMode = StrictMode;\n    reactIs_development.Suspense = Suspense;\n    reactIs_development.isAsyncMode = isAsyncMode;\n    reactIs_development.isConcurrentMode = isConcurrentMode;\n    reactIs_development.isContextConsumer = isContextConsumer;\n    reactIs_development.isContextProvider = isContextProvider;\n    reactIs_development.isElement = isElement;\n    reactIs_development.isForwardRef = isForwardRef;\n    reactIs_development.isFragment = isFragment;\n    reactIs_development.isLazy = isLazy;\n    reactIs_development.isMemo = isMemo;\n    reactIs_development.isPortal = isPortal;\n    reactIs_development.isProfiler = isProfiler;\n    reactIs_development.isStrictMode = isStrictMode;\n    reactIs_development.isSuspense = isSuspense;\n    reactIs_development.isValidElementType = isValidElementType;\n    reactIs_development.typeOf = typeOf;\n  })();\n}\n\nif (process.env.NODE_ENV === 'production') {\n  reactIs$1.exports = reactIs_production_min;\n} else {\n  reactIs$1.exports = reactIs_development;\n}\n\nvar reactIs = reactIs$1.exports;\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols$1 = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols$1) {\n      keys = keys.concat(getOwnPropertySymbols$1(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\nvar hoistStatics = hoistNonReactStatics_cjs;\n\nfunction _typeof$1(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$1 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$1 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$1(obj);\n}\n\nfunction _classCallCheck$b(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$9(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$9(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$9(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$9(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof$1(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty$a(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\n\nfunction DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck$b(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty$a(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"ref\", /*#__PURE__*/createRef());\n\n        _defineProperty$a(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass$9(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof$1(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty$a(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty$a(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck$a(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$8(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$8(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$8(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$8(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$9(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck$a(this, DragSourceImpl);\n\n    _defineProperty$9(this, \"spec\", void 0);\n\n    _defineProperty$9(this, \"monitor\", void 0);\n\n    _defineProperty$9(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass$8(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();\n\nfunction useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\n\nfunction useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}\n\nfunction useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}\n\nfunction _slicedToArray$3(arr, i) {\n  return _arrayWithHoles$3(arr) || _iterableToArrayLimit$3(arr, i) || _unsupportedIterableToArray$6(arr, i) || _nonIterableRest$3();\n}\n\nfunction _nonIterableRest$3() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$6(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$6(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$6(o, minLen);\n}\n\nfunction _arrayLikeToArray$6(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$3(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$3(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray$3(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}\n\nfunction _toConsumableArray$1(arr) {\n  return _arrayWithoutHoles$1(arr) || _iterableToArray$1(arr) || _unsupportedIterableToArray$5(arr) || _nonIterableSpread$1();\n}\n\nfunction _nonIterableSpread$1() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$5(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$5(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$5(o, minLen);\n}\n\nfunction _iterableToArray$1(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles$1(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray$5(arr);\n}\n\nfunction _arrayLikeToArray$5(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray$1(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}\n\nfunction useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\nfunction _slicedToArray$2(arr, i) {\n  return _arrayWithHoles$2(arr) || _iterableToArrayLimit$2(arr, i) || _unsupportedIterableToArray$4(arr, i) || _nonIterableRest$2();\n}\n\nfunction _nonIterableRest$2() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$4(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$4(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$4(o, minLen);\n}\n\nfunction _arrayLikeToArray$4(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$2(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$2(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\n\nfunction useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray$2(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!fastDeepEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}\n\nfunction _slicedToArray$1(arr, i) {\n  return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _unsupportedIterableToArray$3(arr, i) || _nonIterableRest$1();\n}\n\nfunction _nonIterableRest$1() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$3(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen);\n}\n\nfunction _arrayLikeToArray$3(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$1(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$1(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray$1(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}\n\nfunction useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}\n\nfunction useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\n\nfunction useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\n\nfunction useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\n\nfunction useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}\n\nfunction _classCallCheck$9(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$7(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$7(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$7(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$7(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$8(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck$9(this, DropTargetImpl);\n\n    _defineProperty$8(this, \"spec\", void 0);\n\n    _defineProperty$8(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass$7(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();\n\nfunction useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$2(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen);\n}\n\nfunction _arrayLikeToArray$2(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}\n\nfunction useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}\n\nfunction useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\n\nfunction useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}\n\nvar createTransition = function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n};\n\nvar TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nvar MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray$1(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen);\n}\n\nfunction _arrayLikeToArray$1(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$8(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck$8(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$7(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this = this;\n\n  _classCallCheck$7(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this.constructor.isSetUp = true;\n\n    _this.addEventListeners(window);\n\n    _this.backends[_this.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this.constructor.isSetUp = false;\n\n    _this.removeEventListeners(window);\n\n    _this.backends[_this.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this.backends[_this.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this.current;\n    var i = 0;\n\n    _this.backends.some(function (backend) {\n      if (i !== _this.current && backend.transition && backend.transition.check(event)) {\n        _this.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this.current !== oldBackend) {\n      _this.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this.nodes).forEach(function (id) {\n        var node = _this.nodes[id];\n        node.handler();\n        node.handler = _this.callBackend(node.func, node.args);\n      });\n\n      _this.previews.backendChanged(_this);\n\n      var newBackend = _this.backends[_this.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this$backends$_this$;\n\n    return (_this$backends$_this$ = _this.backends[_this.current].instance)[func].apply(_this$backends$_this$, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this.callBackend(func, args);\n\n    _this.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this$nodes$nodeId;\n\n      var r = (_this$nodes$nodeId = _this.nodes[nodeId]).handler.apply(_this$nodes$nodeId, arguments);\n\n      delete _this.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = Object.assign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.previews = new PreviewList();\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nvar MultiBackend = function (manager, context, options) {\n  return new _default(manager, context, options);\n};\n\nvar propTypes = {\n  exports: {}\n};\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n/* eslint-disable no-unused-vars */\n\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n\n  return Object(val);\n}\n\nfunction shouldUseNative() {\n  try {\n    if (!Object.assign) {\n      return false;\n    } // Detect buggy property enumeration order in older V8 versions.\n    // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\n\n    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n\n    test1[5] = 'de';\n\n    if (Object.getOwnPropertyNames(test1)[0] === '5') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test2 = {};\n\n    for (var i = 0; i < 10; i++) {\n      test2['_' + String.fromCharCode(i)] = i;\n    }\n\n    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n      return test2[n];\n    });\n\n    if (order2.join('') !== '0123456789') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test3 = {};\n    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n      test3[letter] = letter;\n    });\n\n    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    // We don't expect any of the above to throw, but better to be safe.\n    return false;\n  }\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n  var from;\n  var to = toObject(target);\n  var symbols;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n\n    if (getOwnPropertySymbols) {\n      symbols = getOwnPropertySymbols(from);\n\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n\n  return to;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret$3 = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\nvar ReactPropTypesSecret_1 = ReactPropTypesSecret$3;\nvar has$2 = Function.call.bind(Object.prototype.hasOwnProperty);\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar printWarning$1 = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret$2 = ReactPropTypesSecret_1;\n  var loggedTypeFailures = {};\n  var has$1 = has$2;\n\n  printWarning$1 = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {\n      /**/\n    }\n  };\n}\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\n\n\nfunction checkPropTypes$1(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has$1(typeSpecs, typeSpecName)) {\n        var error; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$2);\n        } catch (ex) {\n          error = ex;\n        }\n\n        if (error && !(error instanceof Error)) {\n          printWarning$1((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');\n        }\n\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n          var stack = getStack ? getStack() : '';\n          printWarning$1('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));\n        }\n      }\n    }\n  }\n}\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\n\n\ncheckPropTypes$1.resetWarningCache = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n};\n\nvar checkPropTypes_1 = checkPropTypes$1;\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactIs$1 = reactIs$1.exports;\nvar assign = objectAssign;\nvar ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\nvar has = has$2;\nvar checkPropTypes = checkPropTypes_1;\n\nvar printWarning = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nvar factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n\n  var ANONYMOUS = '<<anonymous>>'; // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker\n  };\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n\n  /*eslint-disable no-self-compare*/\n\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n\n\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data : {};\n    this.stack = '';\n  } // Make `instanceof Error` still work for returned errors.\n\n\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret$1) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n\n          if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors\n          manualPropTypeWarningCount < 3) {\n            printWarning('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {\n          expectedType: expectedType\n        });\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n\n      var propValue = props[propName];\n\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret$1);\n\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!ReactIs$1.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n\n        if (type === 'symbol') {\n          return String(value);\n        }\n\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n\n      if (typeof checker !== 'function') {\n        printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret$1);\n\n        if (checkerResult == null) {\n          return null;\n        }\n\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n\n      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      } // We need to check all keys in case some are required but missing from props.\n\n\n      var allKeys = assign({}, props[propName], shapeTypes);\n\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        if (!checker) {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n\n      case 'boolean':\n        return !propValue;\n\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    } // falsy value can't be a Symbol\n\n\n    if (!propValue) {\n      return false;\n    } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\n\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    } // Fallback for non-spec compliant Symbols which are polyfilled.\n\n\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  } // Equivalent of `typeof` but with special handling for array and regexp.\n\n\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n\n    return propType;\n  } // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n\n\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n\n    var propType = getPropType(propValue);\n\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n\n    return propType;\n  } // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n\n\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n\n      default:\n        return type;\n    }\n  } // Returns class name of the object, if any.\n\n\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nvar ReactPropTypesSecret = ReactPropTypesSecret_1;\n\nfunction emptyFunction() {}\n\nfunction emptyFunctionWithReset() {}\n\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nvar factoryWithThrowingShims = function () {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n\n    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n    err.name = 'Invariant Violation';\n    throw err;\n  }\n\n  shim.isRequired = shim;\n\n  function getShim() {\n    return shim;\n  } // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = reactIs$1.exports; // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n\n  var throwOnDirectAccess = true;\n  propTypes.exports = factoryWithTypeCheckers(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  propTypes.exports = factoryWithThrowingShims();\n}\n\nvar PropTypes = propTypes.exports;\n({\n  manager: PropTypes.any,\n  context: PropTypes.any,\n  options: PropTypes.any,\n  debugMode: PropTypes.bool\n});\n({\n  generator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n}); // cheap lodash replacements\n\nfunction memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\n\nfunction without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n\nfunction union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}\n\nfunction _classCallCheck$6(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$6(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$6(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$6(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$6(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$7(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck$6(this, EnterLeaveCounter);\n\n    _defineProperty$7(this, \"entered\", []);\n\n    _defineProperty$7(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass$6(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();\n\nvar isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nvar isSafari = memoize(function () {\n  return Boolean(window.safari);\n});\n\nfunction _classCallCheck$5(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$5(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$5(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$5(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$5(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$6(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck$5(this, MonotonicInterpolant);\n\n    _defineProperty$6(this, \"xs\", void 0);\n\n    _defineProperty$6(this, \"ys\", void 0);\n\n    _defineProperty$6(this, \"c1s\", void 0);\n\n    _defineProperty$6(this, \"c2s\", void 0);\n\n    _defineProperty$6(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass$5(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();\n\nvar ELEMENT_NODE$1 = 1;\n\nfunction getNodeClientOffset$1(node) {\n  var el = node.nodeType === ELEMENT_NODE$1 ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\n\nfunction getEventClientOffset$1(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nfunction getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset$1(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}\n\nvar FILE = '__NATIVE_FILE__';\nvar URL = '__NATIVE_URL__';\nvar TEXT = '__NATIVE_TEXT__';\nvar HTML = '__NATIVE_HTML__';\nvar NativeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  FILE: FILE,\n  URL: URL,\n  TEXT: TEXT,\n  HTML: HTML\n});\n\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}\n\nvar _nativeTypesConfig;\n\nfunction _defineProperty$5(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty$5(_nativeTypesConfig, FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty$5(_nativeTypesConfig, HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty$5(_nativeTypesConfig, URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty$5(_nativeTypesConfig, TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);\n\nfunction _classCallCheck$4(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$4(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$4(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$4(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$4(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$4(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck$4(this, NativeDragSource);\n\n    _defineProperty$4(this, \"item\", void 0);\n\n    _defineProperty$4(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass$4(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();\n\nfunction createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\n\nfunction matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}\n\nfunction _classCallCheck$3(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$3(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$3(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$3(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$3(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$3(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader$1 = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck$3(this, OptionsReader);\n\n    _defineProperty$3(this, \"ownerDocument\", null);\n\n    _defineProperty$3(this, \"globalContext\", void 0);\n\n    _defineProperty$3(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass$3(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty$2(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck$2(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$2(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$2(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$2(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$2(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck$2(this, HTML5BackendImpl);\n\n    _defineProperty$2(this, \"options\", void 0);\n\n    _defineProperty$2(this, \"actions\", void 0);\n\n    _defineProperty$2(this, \"monitor\", void 0);\n\n    _defineProperty$2(this, \"registry\", void 0);\n\n    _defineProperty$2(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty$2(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty$2(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"sourceNodes\", new Map());\n\n    _defineProperty$2(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"dragStartSourceIds\", null);\n\n    _defineProperty$2(this, \"dropTargetIds\", []);\n\n    _defineProperty$2(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty$2(this, \"currentNativeSource\", null);\n\n    _defineProperty$2(this, \"currentNativeHandle\", null);\n\n    _defineProperty$2(this, \"currentDragSourceNode\", null);\n\n    _defineProperty$2(this, \"altKeyPressed\", false);\n\n    _defineProperty$2(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty$2(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty$2(this, \"dragOverTargetIds\", null);\n\n    _defineProperty$2(this, \"lastClientOffset\", null);\n\n    _defineProperty$2(this, \"hoverRafId\", null);\n\n    _defineProperty$2(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset$1(source) || null;\n    });\n\n    _defineProperty$2(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty$2(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty$2(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset$1(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset$1(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset$1(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty$2(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset$1(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader$1(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass$2(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();\n\nvar emptyImage;\n\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}\n\nvar HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};\n\nvar ListenerType;\n\n(function (ListenerType) {\n  ListenerType[\"mouse\"] = \"mouse\";\n  ListenerType[\"touch\"] = \"touch\";\n  ListenerType[\"keyboard\"] = \"keyboard\";\n})(ListenerType || (ListenerType = {})); // Used for MouseEvent.buttons (note the s on the end).\n\n\nvar MouseButtons = {\n  Left: 1,\n  Right: 2,\n  Center: 4\n}; // Used for e.button (note the lack of an s on the end).\n\nvar MouseButton = {\n  Left: 0,\n  Center: 1,\n  Right: 2\n};\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldStartDrag(e) {\n  // For touch events, button will be undefined. If e.button is defined,\n  // then it should be MouseButton.Left.\n  return e.button === undefined || e.button === MouseButton.Left;\n}\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\n\nfunction eventShouldEndDrag(e) {\n  // Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n  // bit field unset if the left mouse button has been released\n  return e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0;\n}\n\nfunction isTouchEvent(e) {\n  return !!e.targetTouches;\n}\n\nvar ELEMENT_NODE = 1;\n\nfunction getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return undefined;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\n\nfunction getEventClientTouchOffset(e, lastTargetTouchFallback) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  } else if (lastTargetTouchFallback && e.touches.length === 1) {\n    if (e.touches[0].target === lastTargetTouchFallback.target) {\n      return getEventClientOffset(e.touches[0]);\n    }\n  }\n}\n\nfunction getEventClientOffset(e, lastTargetTouchFallback) {\n  if (isTouchEvent(e)) {\n    return getEventClientTouchOffset(e, lastTargetTouchFallback);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}\n\nfunction distance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n}\n\nfunction inAngleRanges(x1, y1, x2, y2, angleRanges) {\n  if (!angleRanges) {\n    return false;\n  }\n\n  var angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI + 180;\n\n  for (var i = 0; i < angleRanges.length; ++i) {\n    if ((angleRanges[i].start == null || angle >= angleRanges[i].start) && (angleRanges[i].end == null || angle <= angleRanges[i].end)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar supportsPassive = function () {\n  // simular to jQuery's test\n  var supported = false;\n\n  try {\n    addEventListener('test', function () {// do nothing\n    }, Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n        return true;\n      }\n    }));\n  } catch (e) {// do nothing\n  }\n\n  return supported;\n}();\n\nfunction _classCallCheck$1(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$1(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$1(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$1(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(args, context) {\n    _classCallCheck$1(this, OptionsReader);\n\n    _defineProperty$1(this, \"args\", void 0);\n\n    _defineProperty$1(this, \"context\", void 0);\n\n    this.args = args;\n    this.context = context;\n  }\n\n  _createClass$1(OptionsReader, [{\n    key: \"delay\",\n    get: function get() {\n      var _this$args$delay;\n\n      return (_this$args$delay = this.args.delay) !== null && _this$args$delay !== void 0 ? _this$args$delay : 0;\n    }\n  }, {\n    key: \"scrollAngleRanges\",\n    get: function get() {\n      return this.args.scrollAngleRanges;\n    }\n  }, {\n    key: \"getDropTargetElementsAtPoint\",\n    get: function get() {\n      return this.args.getDropTargetElementsAtPoint;\n    }\n  }, {\n    key: \"ignoreContextMenu\",\n    get: function get() {\n      var _this$args$ignoreCont;\n\n      return (_this$args$ignoreCont = this.args.ignoreContextMenu) !== null && _this$args$ignoreCont !== void 0 ? _this$args$ignoreCont : false;\n    }\n  }, {\n    key: \"enableHoverOutsideTarget\",\n    get: function get() {\n      var _this$args$enableHove;\n\n      return (_this$args$enableHove = this.args.enableHoverOutsideTarget) !== null && _this$args$enableHove !== void 0 ? _this$args$enableHove : false;\n    }\n  }, {\n    key: \"enableKeyboardEvents\",\n    get: function get() {\n      var _this$args$enableKeyb;\n\n      return (_this$args$enableKeyb = this.args.enableKeyboardEvents) !== null && _this$args$enableKeyb !== void 0 ? _this$args$enableKeyb : false;\n    }\n  }, {\n    key: \"enableMouseEvents\",\n    get: function get() {\n      var _this$args$enableMous;\n\n      return (_this$args$enableMous = this.args.enableMouseEvents) !== null && _this$args$enableMous !== void 0 ? _this$args$enableMous : false;\n    }\n  }, {\n    key: \"enableTouchEvents\",\n    get: function get() {\n      var _this$args$enableTouc;\n\n      return (_this$args$enableTouc = this.args.enableTouchEvents) !== null && _this$args$enableTouc !== void 0 ? _this$args$enableTouc : true;\n    }\n  }, {\n    key: \"touchSlop\",\n    get: function get() {\n      return this.args.touchSlop || 0;\n    }\n  }, {\n    key: \"delayTouchStart\",\n    get: function get() {\n      var _ref, _this$args$delayTouch, _this$args, _this$args2;\n\n      return (_ref = (_this$args$delayTouch = (_this$args = this.args) === null || _this$args === void 0 ? void 0 : _this$args.delayTouchStart) !== null && _this$args$delayTouch !== void 0 ? _this$args$delayTouch : (_this$args2 = this.args) === null || _this$args2 === void 0 ? void 0 : _this$args2.delay) !== null && _ref !== void 0 ? _ref : 0;\n    }\n  }, {\n    key: \"delayMouseStart\",\n    get: function get() {\n      var _ref2, _this$args$delayMouse, _this$args3, _this$args4;\n\n      return (_ref2 = (_this$args$delayMouse = (_this$args3 = this.args) === null || _this$args3 === void 0 ? void 0 : _this$args3.delayMouseStart) !== null && _this$args$delayMouse !== void 0 ? _this$args$delayMouse : (_this$args4 = this.args) === null || _this$args4 === void 0 ? void 0 : _this$args4.delay) !== null && _ref2 !== void 0 ? _ref2 : 0;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$context;\n\n      if ((_this$context = this.context) !== null && _this$context !== void 0 && _this$context.document) {\n        return this.context.document;\n      }\n\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$args5;\n\n      return ((_this$args5 = this.args) === null || _this$args5 === void 0 ? void 0 : _this$args5.rootElement) || this.document;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nvar _eventNames;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar eventNames = (_eventNames = {}, _defineProperty(_eventNames, ListenerType.mouse, {\n  start: 'mousedown',\n  move: 'mousemove',\n  end: 'mouseup',\n  contextmenu: 'contextmenu'\n}), _defineProperty(_eventNames, ListenerType.touch, {\n  start: 'touchstart',\n  move: 'touchmove',\n  end: 'touchend'\n}), _defineProperty(_eventNames, ListenerType.keyboard, {\n  keydown: 'keydown'\n}), _eventNames);\n\nvar TouchBackendImpl = /*#__PURE__*/function () {\n  // React-DnD Dependencies\n  // Internal State\n  // Patch for iOS 13, discussion over #1585\n  function TouchBackendImpl(manager, context, options) {\n    var _this = this;\n\n    _classCallCheck(this, TouchBackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"sourceNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", void 0);\n\n    _defineProperty(this, \"targetNodes\", void 0);\n\n    _defineProperty(this, \"_mouseClientOffset\", void 0);\n\n    _defineProperty(this, \"_isScrolling\", void 0);\n\n    _defineProperty(this, \"listenerTypes\", void 0);\n\n    _defineProperty(this, \"moveStartSourceIds\", void 0);\n\n    _defineProperty(this, \"waitingForDelay\", void 0);\n\n    _defineProperty(this, \"timeout\", void 0);\n\n    _defineProperty(this, \"dragOverTargetIds\", void 0);\n\n    _defineProperty(this, \"draggedSourceNode\", void 0);\n\n    _defineProperty(this, \"draggedSourceNodeRemovalObserver\", void 0);\n\n    _defineProperty(this, \"lastTargetTouchFallback\", void 0);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var element = _this.sourceNodes.get(sourceId);\n\n      return element && getNodeClientOffset(element);\n    });\n\n    _defineProperty(this, \"handleTopMoveStartCapture\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      _this.moveStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleMoveStart\", function (sourceId) {\n      // Just because we received an event doesn't necessarily mean we need to collect drag sources.\n      // We only collect start collecting drag sources on touch and left mouse events.\n      if (Array.isArray(_this.moveStartSourceIds)) {\n        _this.moveStartSourceIds.unshift(sourceId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMoveStart\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      } // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (clientOffset) {\n        if (isTouchEvent(e)) {\n          _this.lastTargetTouchFallback = e.targetTouches[0];\n        }\n\n        _this._mouseClientOffset = clientOffset;\n      }\n\n      _this.waitingForDelay = false;\n    });\n\n    _defineProperty(this, \"handleTopMoveStartDelay\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      var delay = e.type === eventNames.touch.start ? _this.options.delayTouchStart : _this.options.delayMouseStart;\n      _this.timeout = setTimeout(_this.handleTopMoveStart.bind(_this, e), delay);\n      _this.waitingForDelay = true;\n    });\n\n    _defineProperty(this, \"handleTopMoveCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleMove\", function (_evt, targetId) {\n      if (_this.dragOverTargetIds) {\n        _this.dragOverTargetIds.unshift(targetId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMove\", function (e) {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n\n      if (!_this.document || _this.waitingForDelay) {\n        return;\n      }\n\n      var moveStartSourceIds = _this.moveStartSourceIds,\n          dragOverTargetIds = _this.dragOverTargetIds;\n      var enableHoverOutsideTarget = _this.options.enableHoverOutsideTarget;\n      var clientOffset = getEventClientOffset(e, _this.lastTargetTouchFallback);\n\n      if (!clientOffset) {\n        return;\n      } // If the touch move started as a scroll, or is is between the scroll angles\n\n\n      if (_this._isScrolling || !_this.monitor.isDragging() && inAngleRanges(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y, _this.options.scrollAngleRanges)) {\n        _this._isScrolling = true;\n        return;\n      } // If we're not dragging and we've moved a little, that counts as a drag start\n\n\n      if (!_this.monitor.isDragging() && // eslint-disable-next-line no-prototype-builtins\n      _this._mouseClientOffset.hasOwnProperty('x') && moveStartSourceIds && distance(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y) > (_this.options.touchSlop ? _this.options.touchSlop : 0)) {\n        _this.moveStartSourceIds = undefined;\n\n        _this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: _this._mouseClientOffset,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!_this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = _this.sourceNodes.get(_this.monitor.getSourceId());\n\n      _this.installSourceNodeRemovalObserver(sourceNode);\n\n      _this.actions.publishDragSource();\n\n      if (e.cancelable) e.preventDefault(); // Get the node elements of the hovered DropTargets\n\n      var dragOverTargetNodes = (dragOverTargetIds || []).map(function (key) {\n        return _this.targetNodes.get(key);\n      }).filter(function (e) {\n        return !!e;\n      }); // Get the a ordered list of nodes that are touched by\n\n      var elementsAtPoint = _this.options.getDropTargetElementsAtPoint ? _this.options.getDropTargetElementsAtPoint(clientOffset.x, clientOffset.y, dragOverTargetNodes) : _this.document.elementsFromPoint(clientOffset.x, clientOffset.y); // Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\n      var elementsAtPointExtended = [];\n\n      for (var nodeId in elementsAtPoint) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!elementsAtPoint.hasOwnProperty(nodeId)) {\n          continue;\n        }\n\n        var currentNode = elementsAtPoint[nodeId];\n        elementsAtPointExtended.push(currentNode);\n\n        while (currentNode) {\n          currentNode = currentNode.parentElement;\n\n          if (currentNode && elementsAtPointExtended.indexOf(currentNode) === -1) {\n            elementsAtPointExtended.push(currentNode);\n          }\n        }\n      }\n\n      var orderedDragOverTargetIds = elementsAtPointExtended // Filter off nodes that arent a hovered DropTargets nodes\n      .filter(function (node) {\n        return dragOverTargetNodes.indexOf(node) > -1;\n      }) // Map back the nodes elements to targetIds\n      .map(function (node) {\n        return _this._getDropTargetId(node);\n      }) // Filter off possible null rows\n      .filter(function (node) {\n        return !!node;\n      }).filter(function (id, index, ids) {\n        return ids.indexOf(id) === index;\n      }); // Invoke hover for drop targets when source node is still over and pointer is outside\n\n      if (enableHoverOutsideTarget) {\n        for (var targetId in _this.targetNodes) {\n          var targetNode = _this.targetNodes.get(targetId);\n\n          if (sourceNode && targetNode && targetNode.contains(sourceNode) && orderedDragOverTargetIds.indexOf(targetId) === -1) {\n            orderedDragOverTargetIds.unshift(targetId);\n            break;\n          }\n        }\n      } // Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\n\n      orderedDragOverTargetIds.reverse();\n\n      _this.actions.hover(orderedDragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    });\n\n    _defineProperty(this, \"_getDropTargetId\", function (node) {\n      var keys = _this.targetNodes.keys();\n\n      var next = keys.next();\n\n      while (next.done === false) {\n        var targetId = next.value;\n\n        if (node === _this.targetNodes.get(targetId)) {\n          return targetId;\n        } else {\n          next = keys.next();\n        }\n      }\n\n      return undefined;\n    });\n\n    _defineProperty(this, \"handleTopMoveEndCapture\", function (e) {\n      _this._isScrolling = false;\n      _this.lastTargetTouchFallback = undefined;\n\n      if (!eventShouldEndDrag(e)) {\n        return;\n      }\n\n      if (!_this.monitor.isDragging() || _this.monitor.didDrop()) {\n        _this.moveStartSourceIds = undefined;\n        return;\n      }\n\n      if (e.cancelable) e.preventDefault();\n      _this._mouseClientOffset = {};\n\n      _this.uninstallSourceNodeRemovalObserver();\n\n      _this.actions.drop();\n\n      _this.actions.endDrag();\n    });\n\n    _defineProperty(this, \"handleCancelOnEscape\", function (e) {\n      if (e.key === 'Escape' && _this.monitor.isDragging()) {\n        _this._mouseClientOffset = {};\n\n        _this.uninstallSourceNodeRemovalObserver();\n\n        _this.actions.endDrag();\n      }\n    });\n\n    this.options = new OptionsReader(options, context);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.sourceNodes = new Map();\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.targetNodes = new Map();\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n    this._isScrolling = false;\n\n    if (this.options.enableMouseEvents) {\n      this.listenerTypes.push(ListenerType.mouse);\n    }\n\n    if (this.options.enableTouchEvents) {\n      this.listenerTypes.push(ListenerType.touch);\n    }\n\n    if (this.options.enableKeyboardEvents) {\n      this.listenerTypes.push(ListenerType.keyboard);\n    }\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(TouchBackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragOverTargetI;\n\n      return {\n        sourceNodes: this.sourceNodes.size,\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        targetNodes: this.targetNodes.size,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      invariant(!TouchBackendImpl.isSetUp, 'Cannot have two Touch backends at the same time.');\n      TouchBackendImpl.isSetUp = true;\n      this.addEventListener(root, 'start', this.getTopMoveStartHandler());\n      this.addEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.addEventListener(root, 'move', this.handleTopMove);\n      this.addEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.addEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.addEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.addEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      TouchBackendImpl.isSetUp = false;\n      this._mouseClientOffset = {};\n      this.removeEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.removeEventListener(root, 'start', this.handleTopMoveStart);\n      this.removeEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.removeEventListener(root, 'move', this.handleTopMove);\n      this.removeEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.removeEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.removeEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.addEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.removeEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node) {\n      var _this2 = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes.set(sourceId, node);\n      this.addEventListener(node, 'start', handleMoveStart);\n      return function () {\n        _this2.sourceNodes.delete(sourceId);\n\n        _this2.removeEventListener(node, 'start', handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this3.sourcePreviewNodes.delete(sourceId);\n\n        _this3.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var root = this.options.rootElement;\n\n      if (!this.document || !root) {\n        return function () {\n          /* noop */\n        };\n      }\n\n      var handleMove = function handleMove(e) {\n        if (!_this4.document || !root || !_this4.monitor.isDragging()) {\n          return;\n        }\n\n        var coords;\n        /**\n         * Grab the coordinates for the current mouse/touch position\n         */\n\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = {\n              x: e.clientX,\n              y: e.clientY\n            };\n            break;\n\n          case eventNames.touch.move:\n            coords = {\n              x: e.touches[0].clientX,\n              y: e.touches[0].clientY\n            };\n            break;\n        }\n        /**\n         * Use the coordinates to grab the element the drag ended on.\n         * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n         */\n\n\n        var droppedOn = coords != null ? _this4.document.elementFromPoint(coords.x, coords.y) : undefined;\n        var childMatch = droppedOn && node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this4.handleMove(e, targetId);\n        }\n      };\n      /**\n       * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n       */\n\n\n      this.addEventListener(this.document.body, 'move', handleMove);\n      this.targetNodes.set(targetId, node);\n      return function () {\n        if (_this4.document) {\n          _this4.targetNodes.delete(targetId);\n\n          _this4.removeEventListener(_this4.document.body, 'move', handleMove);\n        }\n      };\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this5 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new MutationObserver(function () {\n        if (node && !node.parentElement) {\n          _this5.resurrectSourceNode();\n\n          _this5.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      if (this.document && this.draggedSourceNode) {\n        this.draggedSourceNode.style.display = 'none';\n        this.draggedSourceNode.removeAttribute('data-reactid');\n        this.document.body.appendChild(this.draggedSourceNode);\n      }\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = undefined;\n      this.draggedSourceNode = undefined;\n    }\n  }]);\n\n  return TouchBackendImpl;\n}();\n\n_defineProperty(TouchBackendImpl, \"isSetUp\", void 0);\n\nvar TouchBackend = function createBackend(manager) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new TouchBackendImpl(manager, context, options);\n};\n\nvar HTML5toTouch = {\n  backends: [{\n    backend: HTML5Backend,\n    transition: MouseTransition\n  }, {\n    backend: TouchBackend,\n    options: {\n      enableMouseEvents: true\n    },\n    preview: true,\n    transition: TouchTransition\n  }]\n};\nconst COLUMNS = 'abcdefgh'.split('');\nconst chessboardDefaultProps = {\n  animationDuration: 300,\n  areArrowsAllowed: true,\n  arePiecesDraggable: true,\n  arePremovesAllowed: false,\n  boardOrientation: 'white',\n  boardWidth: 560,\n  clearPremovesOnRightClick: true,\n  customArrows: [],\n  customArrowColor: 'rgb(255,170,0)',\n  customBoardStyle: {},\n  customDarkSquareStyle: {\n    backgroundColor: '#B58863'\n  },\n  customDndBackend: undefined,\n  customDndBackendOptions: undefined,\n  customDropSquareStyle: {\n    boxShadow: 'inset 0 0 1px 6px rgba(255,255,255,0.75)'\n  },\n  customLightSquareStyle: {\n    backgroundColor: '#F0D9B5'\n  },\n  customPieces: {},\n  customPremoveDarkSquareStyle: {\n    backgroundColor: '#A42323'\n  },\n  customPremoveLightSquareStyle: {\n    backgroundColor: '#BD2828'\n  },\n  customSquareStyles: {},\n  dropOffBoardAction: 'snapback',\n  id: 0,\n  isDraggablePiece: () => true,\n  getPositionObject: () => {},\n  onDragOverSquare: () => {},\n  onMouseOutSquare: () => {},\n  onMouseOverSquare: () => {},\n  onPieceClick: () => {},\n  onPieceDragBegin: () => {},\n  onPieceDragEnd: () => {},\n  onPieceDrop: () => true,\n  onSquareClick: () => {},\n  onSquareRightClick: () => {},\n  position: 'start',\n  showBoardNotation: true,\n  // showSparePieces: false,\n  snapToCursor: true\n};\nconst startPositionObject = {\n  a8: 'bR',\n  b8: 'bN',\n  c8: 'bB',\n  d8: 'bQ',\n  e8: 'bK',\n  f8: 'bB',\n  g8: 'bN',\n  h8: 'bR',\n  a7: 'bP',\n  b7: 'bP',\n  c7: 'bP',\n  d7: 'bP',\n  e7: 'bP',\n  f7: 'bP',\n  g7: 'bP',\n  h7: 'bP',\n  a2: 'wP',\n  b2: 'wP',\n  c2: 'wP',\n  d2: 'wP',\n  e2: 'wP',\n  f2: 'wP',\n  g2: 'wP',\n  h2: 'wP',\n  a1: 'wR',\n  b1: 'wN',\n  c1: 'wB',\n  d1: 'wQ',\n  e1: 'wK',\n  f1: 'wB',\n  g1: 'wN',\n  h1: 'wR'\n};\nconst whiteColumnValues = {\n  a: 0,\n  b: 1,\n  c: 2,\n  d: 3,\n  e: 4,\n  f: 5,\n  g: 6,\n  h: 7\n};\nconst blackColumnValues = {\n  a: 7,\n  b: 6,\n  c: 5,\n  d: 4,\n  e: 3,\n  f: 2,\n  g: 1,\n  h: 0\n};\nconst whiteRows = [7, 6, 5, 4, 3, 2, 1, 0];\nconst blackRows = [0, 1, 2, 3, 4, 5, 6, 7];\n\nconst getRelativeCoords = (boardOrientation, boardWidth, square) => {\n  const squareWidth = boardWidth / 8;\n  const columns = boardOrientation === 'white' ? whiteColumnValues : blackColumnValues;\n  const rows = boardOrientation === 'white' ? whiteRows : blackRows;\n  const x = columns[square[0]] * squareWidth + squareWidth / 2;\n  const y = rows[square[1] - 1] * squareWidth + squareWidth / 2;\n  return {\n    x,\n    y\n  };\n};\n\nconst isDifferentFromStart = newPosition => {\n  let isDifferent = false;\n  Object.keys(startPositionObject).forEach(square => {\n    if (newPosition[square] !== startPositionObject[square]) isDifferent = true;\n  });\n  Object.keys(newPosition).forEach(square => {\n    if (startPositionObject[square] !== newPosition[square]) isDifferent = true;\n  });\n  return isDifferent;\n};\n\nconst getPositionDifferences = (currentPosition, newPosition) => {\n  const difference = {\n    removed: {},\n    added: {}\n  }; // removed from current\n\n  Object.keys(currentPosition).forEach(square => {\n    if (newPosition[square] !== currentPosition[square]) difference.removed[square] = currentPosition[square];\n  }); // added from new\n\n  Object.keys(newPosition).forEach(square => {\n    if (currentPosition[square] !== newPosition[square]) difference.added[square] = newPosition[square];\n  });\n  return difference;\n};\n\nfunction isString(s) {\n  return typeof s === 'string';\n}\n\nfunction convertPositionToObject(position) {\n  if (position === 'start') return fenToObj('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR');\n  if (validFen(position)) return fenToObj(position);\n  if (validPositionObject(position)) return position;\n  return {};\n}\n\nfunction fenToObj(fen) {\n  if (!validFen(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, '');\n  const rows = fen.split('/');\n  const position = {};\n  let currentRow = 8;\n\n  for (let i = 0; i < 8; i++) {\n    const row = rows[i].split('');\n    let colIdx = 0; // loop through each character in the FEN section\n\n    for (let j = 0; j < row.length; j++) {\n      // number / empty squares\n      if (row[j].search(/[1-8]/) !== -1) {\n        const numEmptySquares = parseInt(row[j], 10);\n        colIdx = colIdx + numEmptySquares;\n      } else {\n        // piece\n        const square = COLUMNS[colIdx] + currentRow;\n        position[square] = fenToPieceCode(row[j]);\n        colIdx = colIdx + 1;\n      }\n    }\n\n    currentRow = currentRow - 1;\n  }\n\n  return position;\n}\n\nfunction expandFenEmptySquares(fen) {\n  return fen.replace(/8/g, '11111111').replace(/7/g, '1111111').replace(/6/g, '111111').replace(/5/g, '11111').replace(/4/g, '1111').replace(/3/g, '111').replace(/2/g, '11');\n}\n\nfunction validFen(fen) {\n  if (!isString(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, ''); // expand the empty square numbers to just 1s\n\n  fen = expandFenEmptySquares(fen); // FEN should be 8 sections separated by slashes\n\n  const chunks = fen.split('/');\n  if (chunks.length !== 8) return false; // check each section\n\n  for (let i = 0; i < 8; i++) {\n    if (chunks[i].length !== 8 || chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n      return false;\n    }\n  }\n\n  return true;\n} // convert FEN piece code to bP, wK, etc\n\n\nfunction fenToPieceCode(piece) {\n  // black piece\n  if (piece.toLowerCase() === piece) {\n    return 'b' + piece.toUpperCase();\n  } // white piece\n\n\n  return 'w' + piece.toUpperCase();\n}\n\nfunction validSquare(square) {\n  return isString(square) && square.search(/^[a-h][1-8]$/) !== -1;\n}\n\nfunction validPieceCode(code) {\n  return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1;\n}\n\nfunction validPositionObject(pos) {\n  if (pos === null || typeof pos !== 'object') return false;\n\n  for (const i in pos) {\n    if (!pos[i]) continue;\n\n    if (!validSquare(i) || !validPieceCode(pos[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst defaultPieces = {\n  wP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  wR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 34,14 L 31,17 L 14,17 L 11,14\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,17 L 31,29.5 L 14,29.5 L 14,17\",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  wB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#ffffff',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,33.5 C 18,32.5 27,32.5 33,33.5\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      })]\n    })\n  }),\n  wK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  bP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  bR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,35.5 L 33,35.5 L 33,35.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 13,31.5 L 32,31.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 31,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 31,16.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \",\n        style: {\n          fill: '#ffffff',\n          stroke: 'none'\n        }\n      })]\n    })\n  }),\n  bB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#000000',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#000000',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\",\n        style: {\n          strokeLinecap: 'butt',\n          fill: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 12,33.5 c 6,-1 15,-1 21,0\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,38.5 A 35,35 1 0 0 34,38.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 11,29 A 35,35 1 0 1 34,29\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 12.5,31.5 L 32.5,31.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"\n        })]\n      })]\n    })\n  }),\n  bK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        },\n        id: \"path6570\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#000000',\n          fillOpacity: '1',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      })]\n    })\n  })\n};\nconst ChessboardContext = /*#__PURE__*/React.createContext();\n\nconst useChessboard = () => useContext(ChessboardContext);\n\nconst ChessboardProvider = /*#__PURE__*/forwardRef((_ref3, ref) => {\n  let {\n    animationDuration,\n    areArrowsAllowed,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardOrientation,\n    boardWidth,\n    clearPremovesOnRightClick,\n    customArrows,\n    customArrowColor,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPieces,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    dropOffBoardAction,\n    id,\n    isDraggablePiece,\n    getPositionObject,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    onPieceDrop,\n    onSquareClick,\n    onSquareRightClick,\n    position,\n    showBoardNotation,\n    showSparePieces,\n    snapToCursor,\n    children\n  } = _ref3;\n  // position stored and displayed on board\n  const [currentPosition, setCurrentPosition] = useState(convertPositionToObject(position)); // calculated differences between current and incoming positions\n\n  const [positionDifferences, setPositionDifferences] = useState({}); // colour of last piece moved to determine if premoving\n\n  const [lastPieceColour, setLastPieceColour] = useState(undefined); // current premoves\n\n  const [premoves, setPremoves] = useState([]); // ref used to access current value during timeouts (closures)\n\n  const premovesRef = useRef(premoves); // current right mouse down square\n\n  const [currentRightClickDown, setCurrentRightClickDown] = useState(); // current arrows\n\n  const [arrows, setArrows] = useState([]); // chess pieces/styling\n\n  const [chessPieces, setChessPieces] = useState({ ...defaultPieces,\n    ...customPieces\n  }); // whether the last move was a manual drop or not\n\n  const [manualDrop, setManualDrop] = useState(false); // the most recent timeout whilst waiting for animation to complete\n\n  const [previousTimeout, setPreviousTimeout] = useState(undefined); // if currently waiting for an animation to finish\n\n  const [waitingForAnimation, setWaitingForAnimation] = useState(false); // open clearPremoves() to allow user to call on undo/reset/whenever\n\n  useImperativeHandle(ref, () => ({\n    clearPremoves() {\n      clearPremoves();\n    }\n\n  })); // handle custom pieces change\n\n  useEffect(() => {\n    setChessPieces({ ...defaultPieces,\n      ...customPieces\n    });\n  }, [customPieces]); // handle external position change\n\n  useEffect(() => {\n    var _Object$keys, _Object$entries, _Object$entries$;\n\n    const newPosition = convertPositionToObject(position);\n    const differences = getPositionDifferences(currentPosition, newPosition);\n    const newPieceColour = ((_Object$keys = Object.keys(differences.added)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) <= 2 ? (_Object$entries = Object.entries(differences.added)) === null || _Object$entries === void 0 ? void 0 : (_Object$entries$ = _Object$entries[0]) === null || _Object$entries$ === void 0 ? void 0 : _Object$entries$[1][0] : undefined; // external move has come in before animation is over\n    // cancel animation and immediately update position\n\n    if (waitingForAnimation) {\n      setCurrentPosition(newPosition);\n      setWaitingForAnimation(false);\n      arePremovesAllowed && attemptPremove(newPieceColour);\n\n      if (previousTimeout) {\n        clearTimeout(previousTimeout);\n      }\n    } else {\n      // move was made using drag and drop\n      if (manualDrop) {\n        setCurrentPosition(newPosition);\n        setWaitingForAnimation(false);\n        arePremovesAllowed && attemptPremove(newPieceColour);\n      } else {\n        // move was made by external position change\n        // if position === start then don't override newPieceColour\n        // needs isDifferentFromStart in scenario where premoves have been cleared upon board reset but first move is made by computer, the last move colour would need to be updated\n        if (isDifferentFromStart(newPosition) && lastPieceColour !== undefined) {\n          setLastPieceColour(newPieceColour);\n        } else {\n          // position === start, likely a board reset\n          setLastPieceColour(undefined);\n        }\n\n        setPositionDifferences(differences); // animate external move\n\n        setWaitingForAnimation(true);\n        const newTimeout = setTimeout(() => {\n          setCurrentPosition(newPosition);\n          setWaitingForAnimation(false);\n          arePremovesAllowed && attemptPremove(newPieceColour);\n        }, animationDuration);\n        setPreviousTimeout(newTimeout);\n      }\n    } // reset manual drop, ready for next move to be made by user or external\n\n\n    setManualDrop(false); // inform latest position information\n\n    getPositionObject(newPosition); // clear arrows\n\n    clearArrows(); // clear timeout on unmount\n\n    return () => {\n      clearTimeout(previousTimeout);\n    };\n  }, [position]); // handle external arrows change\n\n  useEffect(() => {\n    setArrows(customArrows);\n  }, [customArrows]); // handle drop position change\n\n  function handleSetPosition(sourceSq, targetSq, piece) {\n    // if dropped back down, don't do anything\n    if (sourceSq === targetSq) {\n      return;\n    }\n\n    clearArrows(); // if second move is made for same colour, or there are still premoves queued, then this move needs to be added to premove queue instead of played\n    // premoves length check for colour is added in because white could make 3 premoves, and then black responds to the first move (changing the last piece colour) and then white pre-moves again\n\n    if (arePremovesAllowed && waitingForAnimation || arePremovesAllowed && (lastPieceColour === piece[0] || premovesRef.current.filter(p => p.piece[0] === piece[0]).length > 0)) {\n      const oldPremoves = [...premovesRef.current];\n      oldPremoves.push({\n        sourceSq,\n        targetSq,\n        piece\n      });\n      premovesRef.current = oldPremoves;\n      setPremoves([...oldPremoves]);\n      return;\n    } // if transitioning, don't allow new drop\n\n\n    if (!arePremovesAllowed && waitingForAnimation) return;\n    const newOnDropPosition = { ...currentPosition\n    };\n    setManualDrop(true);\n    setLastPieceColour(piece[0]); // if onPieceDrop function provided, execute it, position must be updated externally and captured by useEffect above for this move to show on board\n\n    if (onPieceDrop.length) {\n      const isValidMove = onPieceDrop(sourceSq, targetSq, piece);\n      if (!isValidMove) clearPremoves();\n    } else {\n      // delete if dropping off board\n      if (dropOffBoardAction === 'trash' && !targetSq) {\n        delete newOnDropPosition[sourceSq];\n      } // delete source piece if not dropping from spare piece\n\n\n      if (sourceSq !== 'spare') {\n        delete newOnDropPosition[sourceSq];\n      } // add piece in new position\n\n\n      newOnDropPosition[targetSq] = piece;\n      setCurrentPosition(newOnDropPosition);\n    } // inform latest position information\n\n\n    getPositionObject(newOnDropPosition);\n  }\n\n  function attemptPremove(newPieceColour) {\n    if (premovesRef.current.length === 0) return; // get current value of premove as this is called in a timeout so value may have changed since timeout was set\n\n    const premove = premovesRef.current[0]; // if premove is a differing colour to last move made, then this move can be made\n\n    if (premove.piece[0] !== undefined && premove.piece[0] !== newPieceColour && onPieceDrop.length) {\n      setLastPieceColour(premove.piece[0]);\n      setManualDrop(true); // pre-move doesn't need animation\n\n      const isValidMove = onPieceDrop(premove.sourceSq, premove.targetSq, premove.piece); // premove was successful and can be removed from queue\n\n      if (isValidMove) {\n        const oldPremoves = [...premovesRef.current];\n        oldPremoves.shift();\n        premovesRef.current = oldPremoves;\n        setPremoves([...oldPremoves]);\n      } else {\n        // premove wasn't successful, clear premove queue\n        clearPremoves();\n      }\n    }\n  }\n\n  function clearPremoves() {\n    let clearLastPieceColour = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    // don't clear when right clicking to clear, otherwise you won't be able to premove again before next go\n    if (clearLastPieceColour) setLastPieceColour(undefined);\n    premovesRef.current = [];\n    setPremoves([]);\n  }\n\n  function onRightClickDown(square) {\n    setCurrentRightClickDown(square);\n  }\n\n  function onRightClickUp(square) {\n    if (!areArrowsAllowed) return;\n\n    if (currentRightClickDown) {\n      // same square, don't draw an arrow, but do clear premoves and run onSquareRightClick\n      if (currentRightClickDown === square) {\n        setCurrentRightClickDown(null);\n        clearPremovesOnRightClick && clearPremoves(false);\n        onSquareRightClick(square);\n        return;\n      } // if arrow already exists then it needs to be removed\n\n\n      for (const i in arrows) {\n        if (arrows[i][0] === currentRightClickDown && arrows[i][1] === square) {\n          setArrows(oldArrows => {\n            const newArrows = [...oldArrows];\n            newArrows.splice(i, 1);\n            return newArrows;\n          });\n          return;\n        }\n      } // different square, draw an arrow\n\n\n      setArrows(oldArrows => [...oldArrows, [currentRightClickDown, square]]);\n    } else setCurrentRightClickDown(null);\n  }\n\n  function clearCurrentRightClickDown() {\n    setCurrentRightClickDown(null);\n  }\n\n  function clearArrows() {\n    setArrows([]);\n  }\n\n  return /*#__PURE__*/jsx(ChessboardContext.Provider, {\n    value: {\n      animationDuration,\n      arePiecesDraggable,\n      arePremovesAllowed,\n      boardOrientation,\n      boardWidth,\n      customArrowColor,\n      customBoardStyle,\n      customDarkSquareStyle,\n      customDropSquareStyle,\n      customLightSquareStyle,\n      customPremoveDarkSquareStyle,\n      customPremoveLightSquareStyle,\n      customSquareStyles,\n      dropOffBoardAction,\n      id,\n      isDraggablePiece,\n      getPositionObject,\n      onDragOverSquare,\n      onMouseOutSquare,\n      onMouseOverSquare,\n      onPieceClick,\n      onPieceDragBegin,\n      onPieceDragEnd,\n      onPieceDrop,\n      onSquareClick,\n      onSquareRightClick,\n      showBoardNotation,\n      showSparePieces,\n      snapToCursor,\n      arrows,\n      chessPieces,\n      clearArrows,\n      clearCurrentRightClickDown,\n      clearPremoves,\n      currentPosition,\n      handleSetPosition,\n      lastPieceColour,\n      manualDrop,\n      onRightClickDown,\n      onRightClickUp,\n      positionDifferences,\n      premoves,\n      setChessPieces,\n      setCurrentPosition,\n      setManualDrop,\n      waitingForAnimation\n    },\n    children: children\n  });\n});\n\nfunction Notation(_ref4) {\n  let {\n    row,\n    col\n  } = _ref4;\n  const {\n    boardOrientation,\n    boardWidth,\n    customDarkSquareStyle,\n    customLightSquareStyle\n  } = useChessboard();\n  const whiteColor = customLightSquareStyle.backgroundColor;\n  const blackColor = customDarkSquareStyle.backgroundColor;\n  const isRow = col === 0;\n  const isColumn = row === 7;\n  const isBottomLeftSquare = isRow && isColumn;\n\n  function getRow() {\n    return boardOrientation === 'white' ? 8 - row : row + 1;\n  }\n\n  function getColumn() {\n    return boardOrientation === 'black' ? COLUMNS[7 - col] : COLUMNS[col];\n  }\n\n  function renderBottomLeft() {\n    return /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...numericStyle(boardWidth)\n        },\n        children: getRow()\n      }), /*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...alphaStyle(boardWidth)\n        },\n        children: getColumn()\n      })]\n    });\n  }\n\n  function renderLetters() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...{\n          color: col % 2 !== 0 ? blackColor : whiteColor\n        },\n        ...alphaStyle(boardWidth)\n      },\n      children: getColumn()\n    });\n  }\n\n  function renderNumbers() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...(boardOrientation === 'black' ? {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        } : {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        }),\n        ...numericStyle(boardWidth)\n      },\n      children: getRow()\n    });\n  }\n\n  if (isBottomLeftSquare) {\n    return renderBottomLeft();\n  }\n\n  if (isColumn) {\n    return renderLetters();\n  }\n\n  if (isRow) {\n    return renderNumbers();\n  }\n\n  return null;\n}\n\nconst alphaStyle = width => ({\n  alignSelf: 'flex-end',\n  paddingLeft: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst numericStyle = width => ({\n  alignSelf: 'flex-start',\n  paddingRight: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst notationStyle = {\n  zIndex: 3,\n  position: 'absolute'\n};\n\nfunction Piece(_ref5) {\n  let {\n    piece,\n    square,\n    squares,\n    isPremovedPiece = false\n  } = _ref5;\n  const {\n    animationDuration,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardWidth,\n    id,\n    isDraggablePiece,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    premoves,\n    chessPieces,\n    dropTarget,\n    positionDifferences,\n    waitingForAnimation,\n    currentPosition\n  } = useChessboard();\n  const [pieceStyle, setPieceStyle] = useState({\n    opacity: 1,\n    zIndex: 5,\n    touchAction: 'none',\n    cursor: arePiecesDraggable && isDraggablePiece({\n      piece,\n      sourceSquare: square\n    }) ? '-webkit-grab' : 'default'\n  });\n  const [{\n    canDrag,\n    isDragging\n  }, drag, dragPreview] = useDrag(() => ({\n    type: 'piece',\n    item: () => {\n      onPieceDragBegin(piece, square);\n      return {\n        piece,\n        square,\n        id\n      };\n    },\n    end: () => onPieceDragEnd(piece, square),\n    collect: monitor => ({\n      canDrag: isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }),\n      isDragging: !!monitor.isDragging()\n    })\n  }), [piece, square, currentPosition, id]); // hide the default preview\n\n  useEffect(() => {\n    dragPreview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, []); // hide piece on drag\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      opacity: isDragging ? 0 : 1\n    }));\n  }, [isDragging]); // hide piece on matching premoves\n\n  useEffect(() => {\n    // if premoves aren't allowed, don't waste time on calculations\n    if (!arePremovesAllowed) return;\n    let hidePiece = false; // side effect: if piece moves into pre-moved square, its hidden\n    // if there are any premove targets on this square, hide the piece underneath\n\n    if (!isPremovedPiece && premoves.find(p => p.targetSq === square)) hidePiece = true; // if sourceSq === sq and piece matches then this piece has been pre-moved elsewhere?\n\n    if (premoves.find(p => p.sourceSq === square && p.piece === piece)) hidePiece = true; // TODO: If a premoved piece returns to a premoved square, it will hide (e1, e2, e1)\n\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      display: hidePiece ? 'none' : 'unset'\n    }));\n  }, [currentPosition, premoves]); // new move has come in\n  // if waiting for animation, then animation has started and we can perform animation\n  // we need to head towards where we need to go, we are the source, we are heading towards the target\n\n  useEffect(() => {\n    var _positionDifferences$;\n\n    const removedPiece = (_positionDifferences$ = positionDifferences.removed) === null || _positionDifferences$ === void 0 ? void 0 : _positionDifferences$[square]; // return as null and not loaded yet\n\n    if (!positionDifferences.added) return; // check if piece matches or if removed piece was a pawn and new square is on 1st or 8th rank (promotion)\n\n    const newSquare = Object.entries(positionDifferences.added).find(_ref6 => {\n      let [s, p] = _ref6;\n      return p === removedPiece || (removedPiece === null || removedPiece === void 0 ? void 0 : removedPiece[1]) === 'P' && (s[1] === '1' || s[1] === '8');\n    }); // we can perform animation if our square was in removed, AND the matching piece is in added AND this isn't a premoved piece\n\n    if (waitingForAnimation && removedPiece && newSquare && !isPremovedPiece) {\n      const {\n        sourceSq,\n        targetSq\n      } = getSquareCoordinates(square, newSquare[0]);\n\n      if (sourceSq && targetSq) {\n        setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n          transform: `translate(${targetSq.x - sourceSq.x}px, ${targetSq.y - sourceSq.y}px)`,\n          transition: `transform ${animationDuration}ms`,\n          zIndex: 6\n        }));\n      }\n    }\n  }, [positionDifferences]); // translate to their own positions (repaint on undo)\n\n  useEffect(() => {\n    const {\n      sourceSq\n    } = getSingleSquareCoordinates(square);\n\n    if (sourceSq) {\n      setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n        transform: `translate(${0}px, ${0}px)`,\n        transition: `transform ${0}ms`\n      }));\n    }\n  }, [currentPosition]); // update is piece draggable\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      cursor: arePiecesDraggable && isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }) ? '-webkit-grab' : 'default'\n    }));\n  }, [square, currentPosition, arePiecesDraggable]);\n\n  function getSingleSquareCoordinates(square) {\n    return {\n      sourceSq: squares[square]\n    };\n  }\n\n  function getSquareCoordinates(sourceSquare, targetSquare) {\n    return {\n      sourceSq: squares[sourceSquare],\n      targetSq: squares[targetSquare]\n    };\n  }\n\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: arePiecesDraggable ? canDrag ? drag : null : null,\n    onClick: () => onPieceClick(piece),\n    style: pieceStyle,\n    children: typeof chessPieces[piece] === 'function' ? chessPieces[piece]({\n      squareWidth: boardWidth / 8,\n      isDragging,\n      droppedPiece: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.piece,\n      targetSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.target,\n      sourceSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.source\n    }) : /*#__PURE__*/jsx(\"svg\", {\n      viewBox: '1 1 43 43',\n      width: boardWidth / 8,\n      height: boardWidth / 8,\n      children: /*#__PURE__*/jsx(\"g\", {\n        children: chessPieces[piece]\n      })\n    })\n  });\n}\n\nfunction Square(_ref7) {\n  let {\n    square,\n    squareColor,\n    setSquares,\n    squareHasPremove,\n    children\n  } = _ref7;\n  const squareRef = useRef();\n  const {\n    boardWidth,\n    boardOrientation,\n    clearArrows,\n    currentPosition,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    handleSetPosition,\n    lastPieceColour,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceDrop,\n    onRightClickDown,\n    onRightClickUp,\n    onSquareClick,\n    waitingForAnimation\n  } = useChessboard();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: 'piece',\n    drop: item => handleSetPosition(item.square, square, item.piece),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }), [square, currentPosition, onPieceDrop, waitingForAnimation, lastPieceColour]);\n  useEffect(() => {\n    const {\n      x,\n      y\n    } = squareRef.current.getBoundingClientRect();\n    setSquares(oldSquares => ({ ...oldSquares,\n      [square]: {\n        x,\n        y\n      }\n    }));\n  }, [boardWidth, boardOrientation]);\n  const defaultSquareStyle = { ...borderRadius(customBoardStyle, square, boardOrientation),\n    ...(squareColor === 'black' ? customDarkSquareStyle : customLightSquareStyle),\n    ...(squareHasPremove && (squareColor === 'black' ? customPremoveDarkSquareStyle : customPremoveLightSquareStyle)),\n    ...(isOver && customDropSquareStyle)\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: drop,\n    style: defaultSquareStyle,\n    \"data-square-color\": squareColor,\n    \"data-square\": square,\n    onMouseOver: () => onMouseOverSquare(square),\n    onMouseOut: () => onMouseOutSquare(square),\n    onMouseDown: e => {\n      if (e.button === 2) onRightClickDown(square);\n    },\n    onMouseUp: e => {\n      if (e.button === 2) onRightClickUp(square);\n    },\n    onDragEnter: () => onDragOverSquare(square),\n    onClick: () => {\n      onSquareClick(square);\n      clearArrows();\n    },\n    onContextMenu: e => {\n      e.preventDefault();\n    },\n    children: /*#__PURE__*/jsx(\"div\", {\n      ref: squareRef,\n      style: { ...size(boardWidth),\n        ...center,\n        ...(!squareHasPremove && (customSquareStyles === null || customSquareStyles === void 0 ? void 0 : customSquareStyles[square]))\n      },\n      children: children\n    })\n  });\n}\n\nconst center = {\n  display: 'flex',\n  justifyContent: 'center'\n};\n\nconst size = width => ({\n  width: width / 8,\n  height: width / 8\n});\n\nconst borderRadius = (customBoardStyle, square, boardOrientation) => {\n  if (!customBoardStyle.borderRadius) return {};\n\n  if (square === 'a1') {\n    return boardOrientation === 'white' ? {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'a8') {\n    return boardOrientation === 'white' ? {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h1') {\n    return boardOrientation === 'white' ? {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h8') {\n    return boardOrientation === 'white' ? {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  return {};\n};\n\nfunction Squares(_ref8) {\n  let {\n    children\n  } = _ref8;\n  const {\n    boardOrientation,\n    boardWidth,\n    customBoardStyle,\n    id\n  } = useChessboard();\n  return /*#__PURE__*/jsx(\"div\", {\n    \"data-boardid\": id,\n    style: { ...boardStyles(boardWidth),\n      ...customBoardStyle\n    },\n    children: [...Array(8)].map((_, r) => {\n      return /*#__PURE__*/jsx(\"div\", {\n        style: rowStyles(boardWidth),\n        children: [...Array(8)].map((_, c) => {\n          // a1, a2 ...\n          const square = boardOrientation === 'black' ? COLUMNS[7 - c] + (r + 1) : COLUMNS[c] + (8 - r);\n          const squareColor = c % 2 === r % 2 ? 'white' : 'black';\n          return children({\n            square,\n            squareColor,\n            col: c,\n            row: r\n          });\n        })\n      }, r.toString());\n    })\n  });\n}\n\nconst boardStyles = width => ({\n  cursor: 'default',\n  height: width,\n  width\n});\n\nconst rowStyles = width => ({\n  display: 'flex',\n  flexWrap: 'nowrap',\n  width\n});\n\nconst errorImage = {\n  whiteKing: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    style: {\n      shapeRendering: 'geometricPrecision',\n      textRendering: 'geometricPrecision',\n      imageRendering: 'optimizeQuality'\n    },\n    viewBox: \"0 0 4210 12970\",\n    x: \"0px\",\n    y: \"0px\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    width: \"250\",\n    height: \"250\",\n    children: /*#__PURE__*/jsx(\"g\", {\n      children: /*#__PURE__*/jsx(\"path\", {\n        style: {\n          fill: 'black',\n          fillRule: 'nonzero'\n        },\n        d: \"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z\"\n      })\n    })\n  })\n};\n\nfunction ErrorBoundary(_ref9) {\n  let {\n    children\n  } = _ref9;\n\n  try {\n    return children;\n  } catch (error) {\n    return /*#__PURE__*/jsx(WhiteKing, {\n      showError: true\n    });\n  }\n}\n\nfunction WhiteKing(_ref10) {\n  let {\n    showError = false\n  } = _ref10;\n  return /*#__PURE__*/jsxs(\"div\", {\n    style: container,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      style: whiteKingStyle,\n      children: errorImage.whiteKing\n    }), showError && /*#__PURE__*/jsx(\"h1\", {\n      children: \"Something went wrong\"\n    })]\n  });\n}\n\nconst container = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  flexDirection: 'column'\n};\nconst whiteKingStyle = {\n  width: 250,\n  height: 250,\n  transform: 'rotate(90deg)'\n};\n\nfunction Board() {\n  const boardRef = useRef();\n  const [squares, setSquares] = useState({});\n  const {\n    arrows,\n    boardOrientation,\n    boardWidth,\n    clearCurrentRightClickDown,\n    customArrowColor,\n    showBoardNotation,\n    currentPosition,\n    premoves\n  } = useChessboard();\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (boardRef.current && !boardRef.current.contains(event.target)) {\n        clearCurrentRightClickDown();\n      }\n    }\n\n    document.addEventListener('mouseup', handleClickOutside);\n    return () => {\n      document.removeEventListener('mouseup', handleClickOutside);\n    };\n  }, []);\n  return boardWidth ? /*#__PURE__*/jsxs(\"div\", {\n    ref: boardRef,\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/jsx(Squares, {\n      children: _ref11 => {\n        let {\n          square,\n          squareColor,\n          col,\n          row\n        } = _ref11;\n        const squareHasPremove = premoves.find(p => p.sourceSq === square || p.targetSq === square);\n        const squareHasPremoveTarget = premoves.find(p => p.targetSq === square);\n        return /*#__PURE__*/jsxs(Square, {\n          square: square,\n          squareColor: squareColor,\n          setSquares: setSquares,\n          squareHasPremove: squareHasPremove,\n          children: [currentPosition[square] && /*#__PURE__*/jsx(Piece, {\n            piece: currentPosition[square],\n            square: square,\n            squares: squares\n          }), squareHasPremoveTarget && /*#__PURE__*/jsx(Piece, {\n            isPremovedPiece: true,\n            piece: squareHasPremoveTarget.piece,\n            square: square,\n            squares: squares\n          }), showBoardNotation && /*#__PURE__*/jsx(Notation, {\n            row: row,\n            col: col\n          })]\n        }, `${col}${row}`);\n      }\n    }), /*#__PURE__*/jsx(\"svg\", {\n      width: boardWidth,\n      height: boardWidth,\n      style: {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        pointerEvents: 'none',\n        zIndex: '10'\n      },\n      children: arrows.map(arrow => {\n        const from = getRelativeCoords(boardOrientation, boardWidth, arrow[0]);\n        const to = getRelativeCoords(boardOrientation, boardWidth, arrow[1]);\n        return /*#__PURE__*/jsxs(Fragment$1, {\n          children: [/*#__PURE__*/jsx(\"defs\", {\n            children: /*#__PURE__*/jsx(\"marker\", {\n              id: \"arrowhead\",\n              markerWidth: \"2\",\n              markerHeight: \"2.5\",\n              refX: \"1.25\",\n              refY: \"1.25\",\n              orient: \"auto\",\n              children: /*#__PURE__*/jsx(\"polygon\", {\n                points: \"0 0, 2 1.25, 0 2.5\",\n                style: {\n                  fill: customArrowColor\n                }\n              })\n            })\n          }), /*#__PURE__*/jsx(\"line\", {\n            x1: from.x,\n            y1: from.y,\n            x2: to.x,\n            y2: to.y,\n            style: {\n              stroke: customArrowColor,\n              strokeWidth: boardWidth / 36\n            },\n            markerEnd: \"url(#arrowhead)\"\n          })]\n        }, `${arrow[0]}-${arrow[1]}`);\n      })\n    })]\n  }) : /*#__PURE__*/jsx(WhiteKing, {});\n}\n\nfunction CDragLayer(props) {\n  const {\n    boardWidth,\n    chessPieces,\n    id,\n    snapToCursor\n  } = useChessboard();\n  const {\n    isDragging,\n    item,\n    clientOffset,\n    sourceClientOffset\n  } = props;\n  const layerStyles = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 10,\n    left: 0,\n    top: 0\n  };\n  const getItemStyle = useCallback((clientOffset, sourceClientOffset) => {\n    if (!clientOffset || !sourceClientOffset) return {\n      display: 'none'\n    };\n    let {\n      x,\n      y\n    } = snapToCursor ? clientOffset : sourceClientOffset;\n\n    if (snapToCursor) {\n      const halfSquareWidth = boardWidth / 8 / 2;\n      x -= halfSquareWidth;\n      y -= halfSquareWidth;\n    }\n\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n      transform,\n      WebkitTransform: transform,\n      touchAction: 'none'\n    };\n  }, [boardWidth, snapToCursor]);\n  return isDragging && item.id === id ? /*#__PURE__*/jsx(\"div\", {\n    style: layerStyles,\n    children: /*#__PURE__*/jsx(\"div\", {\n      style: getItemStyle(clientOffset, sourceClientOffset),\n      children: typeof chessPieces[item.piece] === 'function' ? chessPieces[item.piece]({\n        squareWidth: boardWidth / 8,\n        isDragging: true\n      }) : /*#__PURE__*/jsx(\"svg\", {\n        viewBox: '1 1 43 43',\n        width: boardWidth / 8,\n        height: boardWidth / 8,\n        children: /*#__PURE__*/jsx(\"g\", {\n          children: chessPieces[item.piece]\n        })\n      })\n    })\n  }) : null;\n}\n\nfunction collect(monitor) {\n  return {\n    item: monitor.getItem(),\n    clientOffset: monitor.getClientOffset(),\n    sourceClientOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nconst CustomDragLayer = DragLayer(collect)(CDragLayer);\nconst Chessboard = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    customDndBackend,\n    customDndBackendOptions,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/jsx(ErrorBoundary, {\n    children: /*#__PURE__*/jsx(DndProvider, {\n      backend: customDndBackend || MultiBackend,\n      options: customDndBackend ? customDndBackendOptions : HTML5toTouch,\n      children: /*#__PURE__*/jsxs(ChessboardProvider, {\n        ref: ref,\n        ...otherProps,\n        children: [/*#__PURE__*/jsx(CustomDragLayer, {}), /*#__PURE__*/jsx(\"div\", {\n          children: /*#__PURE__*/jsx(Board, {})\n        })]\n      })\n    })\n  });\n});\nChessboard.defaultProps = chessboardDefaultProps;\nexport { Chessboard };","map":{"version":3,"sources":["/Users/m.von-buxhoeveden/Desktop/node_modules/react-chessboard/dist/index.esm.js"],"names":["React","createContext","memo","useEffect","isValidElement","cloneElement","createRef","Component","useLayoutEffect","useMemo","useContext","useState","useCallback","forwardRef","useRef","useImperativeHandle","Fragment","Fragment$1","jsx","jsxs","DndContext","dragDropManager","undefined","HandlerRole","invariant","condition","format","_len","arguments","length","args","Array","_key","process","env","NODE_ENV","Error","error","argIndex","replace","name","framesToPop","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","clientOffset","sourceClientOffset","type","payload","_typeof$5","obj","Symbol","iterator","_typeof","constructor","prototype","get","path","defaultValue","split","reduce","a","c","without$1","items","item","filter","i","isObject","input","xor","itemsA","itemsB","map","Map","insertItem","set","has","forEach","result","count","key","push","intersection","t","indexOf","ResetCoordinatesAction","createBeginDrag","manager","beginDrag","sourceIds","options","publishSource","_options$publishSourc","getSourceClientOffset","monitor","getMonitor","registry","getRegistry","dispatch","verifyInvariants$1","sourceId","getDraggableSource","verifyGetSourceClientOffsetIsFunction","source","getSource","verifyItemIsObject","pinSource","itemType","getSourceType","isSourcePublic","isDragging","canDragSource","createPublishDragSource","publishDragSource","matchesType","targetType","draggedItemType","isArray","some","createHover","hover","targetIdsArg","_ref","verifyTargetIdsIsArray","targetIds","slice","checkInvariants","getItemType","removeNonMatchingTargetIds","hoverAllTargets","didDrop","targetId","lastIndexOf","target","getTarget","getTargetType","splice","ownKeys$4","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread$4","_defineProperty$l","getOwnPropertyDescriptors","defineProperties","defineProperty","value","configurable","writable","createDrop","drop","verifyInvariants","getDroppableTargets","index","dropResult","determineDropResult","action","verifyDropResultType","getDropResult","getTargetIds","canDropOnTarget","reverse","createEndDrag","endDrag","verifyIsDragging","getSourceId","unpinSource","createDragDropActions","_classCallCheck$i","instance","Constructor","TypeError","_defineProperties$g","props","descriptor","_createClass$g","protoProps","staticProps","_defineProperty$k","DragDropManagerImpl","store","_this","shouldSetUp","getState","refCount","backend","isSetUp","setup","teardown","subscribe","handleRefCountChange","receiveBackend","getBackend","getActions","bindActionCreator","actionCreator","actions","boundActions","formatProdErrorMessage","code","$$observable","observable","randomString","Math","random","toString","substring","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject$1","proto","getPrototypeOf","miniKindOf","val","isDate","isError","constructorName","ctorName","toLowerCase","message","stackTraceLimit","Date","toDateString","getDate","setDate","kindOf","typeOfVal","createStore","reducer","preloadedState","enhancer","_ref2","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","listener","isSubscribed","unsubscribe","listeners","replaceReducer","nextReducer","outerSubscribe","observer","observeState","next","warning","console","e","isCrushed","strictEquality","b","areCoordsEqual","offsetA","offsetB","x","y","areArraysEqual","isEqual","ownKeys$3","_objectSpread$3","_defineProperty$j","initialState$1","initialSourceClientOffset","initialClientOffset","reduce$5","state","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","addSource","addTarget","removeSource","removeTarget","ownKeys$2","_objectSpread$2","_defineProperty$i","initialState","reduce$4","reduce$3","NONE","ALL","__IS_NONE__","__IS_ALL__","areDirty","dirtyIds","handlerIds","commonIds","reduce$2","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","reduce$1","ownKeys$1","_objectSpread$1","_defineProperty$h","dirtyHandlerIds","dragOffset","dragOperation","stateId","add","subtract","getDifferenceFromInitialOffset","_classCallCheck$h","_defineProperties$f","_createClass$f","_defineProperty$g","DragDropMonitorImpl","subscribeToStateChange","prevStateId","handleChange","currentStateId","canSkipListener","subscribeToOffsetChange","_this2","previousState","nextState","concat","canDrag","canDrop","Boolean","isDraggingSource","sourceType","isOverTarget","shallow","getItem","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","getSourceClientOffset$1","getDifferenceFromInitialOffset$1","nextUniqueId","getNextUniqueId","_typeof$4","validateSourceContract","validateTargetContract","validateType","allowArray","rawAsap","task","queue","requestFlush","capacity","flush","currentIndex","call","scan","newLength","scope","global","self","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromMutationObserver","makeRequestCallFromTimer","callback","toggle","node","document","createTextNode","observe","characterData","requestCall","data","timeoutHandle","setTimeout","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","freeTasks","pendingErrors","requestErrorThrow","throwFirstError","shift","asap","rawTask","pop","RawTask","onerror","_classCallCheck$g","_defineProperties$e","_createClass$e","_defineProperty$f","_slicedToArray$5","arr","_arrayWithHoles$5","_iterableToArrayLimit$5","_unsupportedIterableToArray$8","_nonIterableRest$5","o","minLen","_arrayLikeToArray$8","n","from","test","len","arr2","_i","_arr","_n","_d","_s","_e","done","err","getNextHandlerId","role","id","SOURCE","TARGET","parseRoleFromHandlerId","handlerId","mapContainsValue","searchValue","entries","isDone","_entries$next","_entries$next$value","HandlerRegistryImpl","addSource$1","addHandler","addTarget$1","containsHandler","handler","dragSources","dropTargets","includePinned","isSourceId","isPinned","pinnedSourceId","pinnedSource","isTargetId","types","removeSource$1","delete","removeTarget$1","createDragDropManager","backendFactory","globalContext","backendOptions","debugMode","makeStoreInstance","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","instanceId","_excluded","_slicedToArray$4","_arrayWithHoles$4","_iterableToArrayLimit$4","_unsupportedIterableToArray$7","_nonIterableRest$4","_arrayLikeToArray$7","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","INSTANCE_SYM","for","DndProvider","children","_getDndContextValue","getDndContextValue","_getDndContextValue2","isGlobalInstance","context","getGlobalContext","Provider","assign","_manager","createSingletonDndContext","ctx","_classCallCheck$f","_defineProperties$d","_createClass$d","_defineProperty$e","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","receiveHandlerId","getHandlerId","_classCallCheck$e","_defineProperties$c","_createClass$c","_defineProperty$d","isCallingCanDrop","DropTargetMonitorImpl","isOver","throwIfCompositeComponentElement","element","displayName","wrapHookToRecognizeElement","hook","elementOrNode","ref","cloneWithRef","wrapConnectorHooks","hooks","wrappedHooks","endsWith","wrappedHook","setRef","current","newRef","previousRef","_typeof$3","isRef","hasOwnProperty","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","_classCallCheck$d","_defineProperties$b","_createClass$b","_defineProperty$c","SourceConnector","dragSource","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","dragPreview","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","newHandlerId","reconnect","dragSourceOptionsInternal","dragPreviewOptionsInternal","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedDragSource","lastConnectedHandlerId","lastConnectedDragSourceOptions","dragSourceUnsubscribe","connectDragSource","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","connectDragPreview","_classCallCheck$c","_defineProperties$a","_createClass$a","_defineProperty$b","TargetConnector","dropTarget","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedDropTarget","lastConnectedDropTargetOptions","unsubscribeDropTarget","connectDropTarget","dropTargetOptionsInternal","registerTarget","registerSource","_typeof$2","isClassComponent","render","isRefForwardingComponent","C","_item$$$typeof","$$typeof","isRefable","checkDecoratorArguments","functionName","signature","arg","isObjectLike","isPlainObject","reactIs$1","exports","reactIs_production_min","d","f","g","h","k","l","m","p","q","r","v","w","z","u","A","AsyncMode","ConcurrentMode","ContextConsumer","ContextProvider","Element","ForwardRef","Lazy","Memo","Portal","Profiler","StrictMode","Suspense","isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isValidElementType","typeOf","reactIs_development","hasSymbol","REACT_ELEMENT_TYPE","REACT_PORTAL_TYPE","REACT_FRAGMENT_TYPE","REACT_STRICT_MODE_TYPE","REACT_PROFILER_TYPE","REACT_PROVIDER_TYPE","REACT_CONTEXT_TYPE","REACT_ASYNC_MODE_TYPE","REACT_CONCURRENT_MODE_TYPE","REACT_FORWARD_REF_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_MEMO_TYPE","REACT_LAZY_TYPE","REACT_BLOCK_TYPE","REACT_FUNDAMENTAL_TYPE","REACT_RESPONDER_TYPE","REACT_SCOPE_TYPE","$$typeofType","hasWarnedAboutDeprecatedIsAsyncMode","reactIs","REACT_STATICS","childContextTypes","contextType","contextTypes","defaultProps","getDefaultProps","getDerivedStateFromError","getDerivedStateFromProps","mixins","propTypes","KNOWN_STATICS","caller","callee","arity","FORWARD_REF_STATICS","MEMO_STATICS","TYPE_STATICS","getStatics","component","getOwnPropertyNames","getOwnPropertySymbols$1","objectPrototype","hoistNonReactStatics","targetComponent","sourceComponent","blacklist","inheritedComponent","targetStatics","sourceStatics","hoistNonReactStatics_cjs","hoistStatics","_typeof$1","_classCallCheck$b","_defineProperties$9","_createClass$9","_inherits","subClass","superClass","create","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","NewTarget","Reflect","construct","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","sham","Proxy","valueOf","_defineProperty$a","DragLayer","collect","decorateLayer","DecoratedComponent","Decorated","_options$arePropsEqua","arePropsEqual","DragLayerContainer","_Component","_super","isCurrentlyMounted","getCurrentState","setState","getDecoratedComponentInstance","shouldComponentUpdate","nextProps","componentDidMount","componentWillUnmount","unsubscribeFromOffsetChange","unsubscribeFromStateChange","Consumer","receiveDragDropManager","useIsomorphicLayoutEffect","_classCallCheck$a","_defineProperties$8","_createClass$8","_defineProperty$9","DragSourceImpl","spec","connector","_result","globalMonitor","end","useDragSource","useDragDropManager","_useContext","useDragType","_slicedToArray$3","_arrayWithHoles$3","_iterableToArrayLimit$3","_unsupportedIterableToArray$6","_nonIterableRest$3","_arrayLikeToArray$6","useRegisteredDragSource","registerDragSource","_registerSource","_registerSource2","unregister","_toConsumableArray$1","_arrayWithoutHoles$1","_iterableToArray$1","_unsupportedIterableToArray$5","_nonIterableSpread$1","_arrayLikeToArray$5","iter","useOptionalFactory","deps","memoDeps","useDragSourceMonitor","useDragSourceConnector","fastDeepEqual","equal","RegExp","flags","_slicedToArray$2","_arrayWithHoles$2","_iterableToArrayLimit$2","_unsupportedIterableToArray$4","_nonIterableRest$2","_arrayLikeToArray$4","useCollector","onUpdate","_useState","_useState2","collected","setCollected","updateCollected","nextValue","_slicedToArray$1","_arrayWithHoles$1","_iterableToArrayLimit$1","_unsupportedIterableToArray$3","_nonIterableRest$1","_arrayLikeToArray$3","useMonitorOutput","onCollect","_useCollector","_useCollector2","subscribeToMonitorStateChange","useCollectedProps","collector","useConnectDragSource","useConnectDragPreview","useDrag","specArg","begin","previewOptions","useAccept","accept","_classCallCheck$9","_defineProperties$7","_createClass$7","_defineProperty$8","DropTargetImpl","useDropTarget","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray$2","_nonIterableRest","_arrayLikeToArray$2","useRegisteredDropTarget","registerDropTarget","_registerTarget","_registerTarget2","useDropTargetMonitor","useDropTargetConnector","useConnectDropTarget","useDrop","createTransition","event","check","_isMBTransition","TouchTransition","touches","MouseTransition","_createForOfIteratorHelper","_unsupportedIterableToArray$1","F","s","it","normalCompletion","didErr","step","_e2","return","_arrayLikeToArray$1","_classCallCheck$8","PreviewList","register","preview","previews","backendChanged","_iterator","_step","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","_classCallCheck$7","_default","sourceOptions","addEventListeners","backends","removeEventListeners","connectBackend","_len2","_key2","_len3","_key3","previewEnabled","transition","addEventListener","backendSwitcher","removeEventListener","oldBackend","nodes","callBackend","func","newBackend","skipDispatchOnTransition","newEvent","createEvent","initEvent","bubbles","cancelable","dispatchEvent","_this$backends$_this$","nodeId","_this$nodes$nodeId","MultiBackend","propIsEnumerable","toObject","shouldUseNative","test1","String","test2","fromCharCode","order2","test3","letter","objectAssign","to","ReactPropTypesSecret$3","ReactPropTypesSecret_1","has$2","Function","printWarning$1","ReactPropTypesSecret$2","loggedTypeFailures","has$1","text","checkPropTypes$1","typeSpecs","values","location","componentName","getStack","typeSpecName","ex","stack","resetWarningCache","checkPropTypes_1","ReactIs$1","ReactPropTypesSecret$1","checkPropTypes","printWarning","emptyFunctionThatReturnsNull","factoryWithTypeCheckers","throwOnDirectAccess","ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","getIteratorFn","maybeIterable","iteratorFn","ANONYMOUS","ReactPropTypes","array","createPrimitiveTypeChecker","bigint","bool","number","string","symbol","any","createAnyTypeChecker","arrayOf","createArrayOfTypeChecker","createElementTypeChecker","elementType","createElementTypeTypeChecker","instanceOf","createInstanceTypeChecker","createNodeChecker","objectOf","createObjectOfTypeChecker","oneOf","createEnumTypeChecker","oneOfType","createUnionTypeChecker","shape","createShapeTypeChecker","exact","createStrictShapeTypeChecker","is","PropTypeError","createChainableTypeChecker","validate","manualPropTypeCallCache","manualPropTypeWarningCount","checkType","isRequired","propName","propFullName","secret","cacheKey","chainedCheckType","expectedType","propValue","propType","getPropType","preciseType","getPreciseType","typeChecker","expectedClass","expectedClassName","actualClassName","getClassName","expectedValues","valuesString","JSON","stringify","replacer","arrayOfTypeCheckers","checker","getPostfixForTypeWarning","expectedTypes","checkerResult","expectedTypesMessage","isNode","invalidValidatorError","shapeTypes","allKeys","every","entry","isSymbol","PropTypes","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","factoryWithThrowingShims","shim","getShim","ReactIs","generator","memoize","fn","memoized","without","union","Set","_classCallCheck$6","_defineProperties$6","_createClass$6","_defineProperty$7","EnterLeaveCounter","isNodeInDocument","enter","enteringNode","previousLength","entered","isNodeEntered","contains","leave","leavingNode","reset","isFirefox","navigator","userAgent","isSafari","safari","_classCallCheck$5","_defineProperties$5","_createClass$5","_defineProperty$6","MonotonicInterpolant","xs","ys","indexes","sort","dxs","ms","dx","dy","c1s","_i2","m2","mNext","dxNext","common","c2s","c3s","_i3","c1","invDx","_common","interpolate","low","high","mid","floor","xHere","max","diff","diffSq","ELEMENT_NODE$1","getNodeClientOffset$1","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","getEventClientOffset$1","clientX","clientY","isImageNode","_document$documentEle","nodeName","documentElement","getDragPreviewSize","isImage","sourceWidth","sourceHeight","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewOffset","sourceNode","anchorPoint","offsetPoint","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","offsetWidth","offsetHeight","anchorX","anchorY","_getDragPreviewSize","calculateYOffset","interpolantY","calculateXOffset","interpolantX","offsetX","offsetY","isManualOffsetX","isManualOffsetY","FILE","URL","TEXT","HTML","NativeTypes","freeze","getDataFromDataTransfer","dataTransfer","typesToTry","resultSoFar","typeToTry","getData","_nativeTypesConfig","_defineProperty$5","nativeTypesConfig","exposeProperties","files","_dataTransfer","matchesTypes","html","_dataTransfer2","urls","_dataTransfer3","_dataTransfer4","_classCallCheck$4","_defineProperties$4","_createClass$4","_defineProperty$4","NativeDragSource","config","initializeExposedProperties","property","warn","loadDataTransfer","newProperties","handle","createNativeDragSource","matchNativeItemType","dataTransferTypes","nativeItemType","_classCallCheck$3","_defineProperties$3","_createClass$3","_defineProperty$3","OptionsReader$1","OptionsReader","optionsArgs","_this$globalContext","_this$optionsArgs","rootElement","ownKeys","_objectSpread","_defineProperty$2","_classCallCheck$2","_defineProperties$2","_createClass$2","HTML5BackendImpl","sourceNodes","isDraggingNativeItem","currentNativeHandle","currentNativeSource","body","currentDragSourceNode","clearCurrentDragSourceNode","dragStartSourceIds","defaultPrevented","nativeType","setDragImage","sourcePreviewNodes","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","setCurrentDragSourceNode","_this$getCurrentSourc2","captureDraggingState","beginDragNativeItem","hasAttribute","preventDefault","dragEnterTargetIds","isFirstEnter","enterLeaveCounter","altKeyPressed","altKey","dropEffect","getCurrentDropEffect","dragOverTargetIds","lastClientOffset","hoverRafId","requestAnimationFrame","isLastLeave","endDragNativeItem","dropTargetIds","_this$currentNativeSo","dragDrop","tagName","isContentEditable","profile","_this$dragStartSource","_this$dragOverTargetI","size","sourcePreviewNodeOptions","sourceNodeOptions","root","__isReactDndBackendSetUp","asyncEndDragFrameId","_this$window","cancelAnimationFrame","_this3","handleDragStart","handleSelectStart","setAttribute","_this4","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","_this5","MOUSE_MOVE_TIMEOUT","mouseMoveTimeoutTimer","_this5$rootElement","endDragIfSourceWasRemovedFromDOM","_this$window2","unshift","emptyImage","getEmptyImage","Image","src","HTML5Backend","createBackend","ListenerType","MouseButtons","Left","Right","Center","MouseButton","eventShouldStartDrag","button","eventShouldEndDrag","buttons","isTouchEvent","targetTouches","ELEMENT_NODE","getNodeClientOffset","getEventClientTouchOffset","lastTargetTouchFallback","getEventClientOffset","distance","x1","y1","x2","y2","sqrt","pow","abs","inAngleRanges","angleRanges","angle","atan2","PI","start","supportsPassive","supported","_classCallCheck$1","_defineProperties$1","_createClass$1","_defineProperty$1","_this$args$delay","delay","scrollAngleRanges","getDropTargetElementsAtPoint","_this$args$ignoreCont","ignoreContextMenu","_this$args$enableHove","enableHoverOutsideTarget","_this$args$enableKeyb","enableKeyboardEvents","_this$args$enableMous","enableMouseEvents","_this$args$enableTouc","enableTouchEvents","touchSlop","_this$args$delayTouch","_this$args","_this$args2","delayTouchStart","_this$args$delayMouse","_this$args3","_this$args4","delayMouseStart","_this$context","_this$args5","_eventNames","_classCallCheck","_defineProperties","_createClass","_defineProperty","eventNames","mouse","move","contextmenu","touch","keyboard","keydown","TouchBackendImpl","moveStartSourceIds","_mouseClientOffset","waitingForDelay","timeout","handleTopMoveStart","_evt","_isScrolling","installSourceNodeRemovalObserver","dragOverTargetNodes","targetNodes","elementsAtPoint","elementsFromPoint","elementsAtPointExtended","currentNode","orderedDragOverTargetIds","_getDropTargetId","ids","targetNode","uninstallSourceNodeRemovalObserver","listenerTypes","getTopMoveStartHandler","handleTopMoveStartCapture","handleTopMove","handleTopMoveCapture","handleTopMoveEndCapture","handleCancelOnEscape","subject","capture","passive","listenerType","evt","handleMoveStart","handleMove","coords","droppedOn","elementFromPoint","childMatch","handleTopMoveStartDelay","draggedSourceNode","draggedSourceNodeRemovalObserver","resurrectSourceNode","childList","style","display","removeAttribute","appendChild","disconnect","TouchBackend","HTML5toTouch","COLUMNS","chessboardDefaultProps","animationDuration","areArrowsAllowed","arePiecesDraggable","arePremovesAllowed","boardOrientation","boardWidth","clearPremovesOnRightClick","customArrows","customArrowColor","customBoardStyle","customDarkSquareStyle","backgroundColor","customDndBackend","customDndBackendOptions","customDropSquareStyle","boxShadow","customLightSquareStyle","customPieces","customPremoveDarkSquareStyle","customPremoveLightSquareStyle","customSquareStyles","dropOffBoardAction","isDraggablePiece","getPositionObject","onDragOverSquare","onMouseOutSquare","onMouseOverSquare","onPieceClick","onPieceDragBegin","onPieceDragEnd","onPieceDrop","onSquareClick","onSquareRightClick","position","showBoardNotation","snapToCursor","startPositionObject","a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","d1","e1","f1","g1","h1","whiteColumnValues","blackColumnValues","whiteRows","blackRows","getRelativeCoords","square","squareWidth","columns","rows","isDifferentFromStart","newPosition","isDifferent","getPositionDifferences","currentPosition","difference","removed","added","isString","convertPositionToObject","fenToObj","validFen","validPositionObject","fen","currentRow","row","colIdx","j","search","numEmptySquares","parseInt","fenToPieceCode","expandFenEmptySquares","chunks","piece","toUpperCase","validSquare","validPieceCode","pos","defaultPieces","wP","xmlns","version","opacity","fill","fillOpacity","fillRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeDasharray","strokeOpacity","wR","wN","transform","wB","wQ","cx","cy","wK","bP","bR","bN","bB","bQ","bK","ChessboardContext","useChessboard","ChessboardProvider","showSparePieces","setCurrentPosition","positionDifferences","setPositionDifferences","lastPieceColour","setLastPieceColour","premoves","setPremoves","premovesRef","currentRightClickDown","setCurrentRightClickDown","arrows","setArrows","chessPieces","setChessPieces","manualDrop","setManualDrop","previousTimeout","setPreviousTimeout","waitingForAnimation","setWaitingForAnimation","clearPremoves","_Object$keys","_Object$entries","_Object$entries$","differences","newPieceColour","attemptPremove","newTimeout","clearArrows","handleSetPosition","sourceSq","targetSq","oldPremoves","newOnDropPosition","isValidMove","premove","clearLastPieceColour","onRightClickDown","onRightClickUp","oldArrows","newArrows","clearCurrentRightClickDown","Notation","col","whiteColor","blackColor","isRow","isColumn","isBottomLeftSquare","getRow","getColumn","renderBottomLeft","notationStyle","color","numericStyle","alphaStyle","renderLetters","renderNumbers","alignSelf","paddingLeft","fontSize","paddingRight","zIndex","Piece","squares","isPremovedPiece","pieceStyle","setPieceStyle","touchAction","cursor","sourceSquare","drag","oldPieceStyle","hidePiece","find","_positionDifferences$","removedPiece","newSquare","getSquareCoordinates","getSingleSquareCoordinates","targetSquare","onClick","droppedPiece","viewBox","Square","squareColor","setSquares","squareHasPremove","squareRef","oldSquares","defaultSquareStyle","borderRadius","onMouseOver","onMouseOut","onMouseDown","onMouseUp","onDragEnter","onContextMenu","center","justifyContent","borderBottomLeftRadius","borderTopRightRadius","borderTopLeftRadius","borderBottomRightRadius","Squares","boardStyles","_","rowStyles","flexWrap","errorImage","whiteKing","shapeRendering","textRendering","imageRendering","clipRule","ErrorBoundary","WhiteKing","showError","container","whiteKingStyle","alignItems","flexDirection","Board","boardRef","handleClickOutside","squareHasPremoveTarget","pointerEvents","arrow","markerWidth","markerHeight","refX","refY","orient","points","markerEnd","CDragLayer","layerStyles","getItemStyle","halfSquareWidth","WebkitTransform","CustomDragLayer","Chessboard","otherProps"],"mappings":"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","sourcesContent":["import React, { createContext, memo, useEffect, isValidElement, cloneElement, createRef, Component, useLayoutEffect, useMemo, useContext, useState, useCallback, forwardRef, useRef, useImperativeHandle, Fragment as Fragment$1 } from 'react';\nimport 'react-dom';\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\n\n/**\n * Create the React Context\n */\n\nvar DndContext = /*#__PURE__*/createContext({\n  dragDropManager: undefined\n});\n\nvar HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));\n\n/**\r\n * Use invariant() to assert state which your program assumes to be true.\r\n *\r\n * Provide sprintf-style format (only %s is supported) and arguments\r\n * to provide information about what broke and what you were\r\n * expecting.\r\n *\r\n * The invariant message will be stripped in production, but the invariant\r\n * will remain to ensure logic does not differ in production.\r\n */\nfunction invariant(condition, format) {\n  for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    args[_key - 2] = arguments[_key];\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n\n    throw error;\n  }\n}\n\nvar INIT_COORDS = 'dnd-core/INIT_COORDS';\nvar BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nvar PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nvar HOVER = 'dnd-core/HOVER';\nvar DROP = 'dnd-core/DROP';\nvar END_DRAG = 'dnd-core/END_DRAG';\n\nfunction setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}\n\nfunction _typeof$5(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$5 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$5 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$5(obj);\n} // cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\n\n\nfunction get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nfunction without$1(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nfunction isObject(input) {\n  return _typeof$5(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nfunction xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nfunction intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}\n\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nfunction createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants$1(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants$1(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}\n\nfunction createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}\n\nfunction matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}\n\nfunction createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty$l(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$l(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nfunction createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread$4(_objectSpread$4({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}\n\nfunction createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}\n\nfunction createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}\n\nfunction _classCallCheck$i(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$g(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$g(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$g(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$g(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$k(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck$i(this, DragDropManagerImpl);\n\n    _defineProperty$k(this, \"store\", void 0);\n\n    _defineProperty$k(this, \"monitor\", void 0);\n\n    _defineProperty$k(this, \"backend\", void 0);\n\n    _defineProperty$k(this, \"isSetUp\", false);\n\n    _defineProperty$k(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass$g(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\n\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n} // Inlined version of the `symbol-observable` polyfill\n\n\nvar $$observable = function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject$1(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n} // Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\n\n\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject$1(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nvar strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nfunction areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nfunction areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty$j(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$j(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar initialState$1 = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nfunction reduce$5() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread$3(_objectSpread$3({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState$1;\n\n    default:\n      return state;\n  }\n}\n\nvar ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nvar ADD_TARGET = 'dnd-core/ADD_TARGET';\nvar REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nvar REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nfunction addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nfunction addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nfunction removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nfunction removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty$i(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$i(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nfunction reduce$4() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        targetIds: without$1(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread$2(_objectSpread$2({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}\n\nfunction reduce$3() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}\n\nvar NONE = [];\nvar ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nfunction areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}\n\nfunction reduce$2() {\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}\n\nfunction reduce$1() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty$h(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty$h(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nfunction reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: reduce$2(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread$1(_objectSpread$1({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: reduce$5(state.dragOffset, action),\n    refCount: reduce$3(state.refCount, action),\n    dragOperation: reduce$4(state.dragOperation, action),\n    stateId: reduce$1(state.stateId)\n  };\n}\n\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nfunction add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nfunction subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nfunction getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nfunction getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}\n\nfunction _classCallCheck$h(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$f(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$f(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$f(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$f(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$g(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck$h(this, DragDropMonitorImpl);\n\n    _defineProperty$g(this, \"store\", void 0);\n\n    _defineProperty$g(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass$f(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      }; // undefined on initial render\n\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset$1() {\n      return getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset$1() {\n      return getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();\n\nvar nextUniqueId = 0;\nfunction getNextUniqueId() {\n  return nextUniqueId++;\n}\n\nfunction _typeof$4(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$4 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$4 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$4(obj);\n}\nfunction validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nfunction validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nfunction validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof$4(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nfunction rawAsap(task) {\n  if (!queue.length) {\n    requestFlush();\n  } // Equivalent to push, but avoids a function call.\n\n\n  queue[queue.length] = task;\n}\nvar queue = []; // Once a flush has been requested, no further calls to `requestFlush` are\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\n\nvar requestFlush; // The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\n\nvar index = 0; // If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\n\nvar capacity = 1024; // The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\n\nfunction flush() {\n  while (index < queue.length) {\n    var currentIndex = index; // Advance the index before calling the task. This ensures that we will\n    // begin flushing on the next task the task throws an error.\n\n    index = index + 1;\n    queue[currentIndex].call(); // Prevent leaking memory for long chains of recursive calls to `asap`.\n    // If we call `asap` within tasks scheduled by `asap`, the queue will\n    // grow, but to avoid an O(n) walk for every task we execute, we don't\n    // shift tasks off the queue after they have been executed.\n    // Instead, we periodically shift 1024 tasks off the queue.\n\n    if (index > capacity) {\n      // Manually shift all values starting at the index back to the\n      // beginning of the queue.\n      for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n        queue[scan] = queue[scan + index];\n      }\n\n      queue.length -= index;\n      index = 0;\n    }\n  }\n\n  queue.length = 0;\n  index = 0;\n} // `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\n\n\nvar scope = typeof global !== 'undefined' ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver; // MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\n\nif (typeof BrowserMutationObserver === 'function') {\n  requestFlush = makeRequestCallFromMutationObserver(flush); // MessageChannels are desirable because they give direct access to the HTML\n  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n  // 11-12, and in web workers in many engines.\n  // Although message channels yield to any queued rendering and IO tasks, they\n  // would be better than imposing the 4ms delay of timers.\n  // However, they do not work reliably in Internet Explorer or Safari.\n  // Internet Explorer 10 is the only browser that has setImmediate but does\n  // not have MutationObservers.\n  // Although setImmediate yields to the browser's renderer, it would be\n  // preferrable to falling back to setTimeout since it does not have\n  // the minimum 4ms penalty.\n  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n  // Desktop to a lesser extent) that renders both setImmediate and\n  // MessageChannel useless for the purposes of ASAP.\n  // https://github.com/kriskowal/q/issues/396\n  // Timers are implemented universally.\n  // We fall back to timers in workers in most engines, and in foreground\n  // contexts in the following browsers.\n  // However, note that even this simple case requires nuances to operate in a\n  // broad spectrum of browsers.\n  //\n  // - Firefox 3-13\n  // - Internet Explorer 6-9\n  // - iPad Safari 4.3\n  // - Lynx 2.8.7\n} else {\n  requestFlush = makeRequestCallFromTimer(flush);\n} // `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\n\n\nrawAsap.requestFlush = requestFlush; // To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\n\nfunction makeRequestCallFromMutationObserver(callback) {\n  var toggle = 1;\n  var observer = new BrowserMutationObserver(callback);\n  var node = document.createTextNode('');\n  observer.observe(node, {\n    characterData: true\n  });\n  return function requestCall() {\n    toggle = -toggle;\n    node.data = toggle;\n  };\n} // The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n\nfunction makeRequestCallFromTimer(callback) {\n  return function requestCall() {\n    // We dispatch a timeout with a specified delay of 0 for engines that\n    // can reliably accommodate that request. This will usually be snapped\n    // to a 4 milisecond delay, but once we're flushing, there's no delay\n    // between events.\n    var timeoutHandle = setTimeout(handleTimer, 0); // However, since this timer gets frequently dropped in Firefox\n    // workers, we enlist an interval handle that will try to fire\n    // an event 20 times per second until it succeeds.\n\n    var intervalHandle = setInterval(handleTimer, 50);\n\n    function handleTimer() {\n      // Whichever timer succeeds will cancel both timers and\n      // execute the callback.\n      clearTimeout(timeoutHandle);\n      clearInterval(intervalHandle);\n      callback();\n    }\n  };\n} // This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\n\n\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer; // ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n// RawTasks are recycled to reduce GC churn.\n\nvar freeTasks = []; // We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n  if (pendingErrors.length) {\n    throw pendingErrors.shift();\n  }\n}\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\n\n\nfunction asap(task) {\n  var rawTask;\n\n  if (freeTasks.length) {\n    rawTask = freeTasks.pop();\n  } else {\n    rawTask = new RawTask();\n  }\n\n  rawTask.task = task;\n  rawAsap(rawTask);\n} // We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\n\nvar RawTask =\n/** @class */\nfunction () {\n  function RawTask() {}\n\n  RawTask.prototype.call = function () {\n    try {\n      this.task.call();\n    } catch (error) {\n      if (asap.onerror) {\n        // This hook exists purely for testing purposes.\n        // Its name will be periodically randomized to break any code that\n        // depends on its existence.\n        asap.onerror(error);\n      } else {\n        // In a web browser, exceptions are not fatal. However, to avoid\n        // slowing down the queue of pending tasks, we rethrow the error in a\n        // lower priority turn.\n        pendingErrors.push(error);\n        requestErrorThrow();\n      }\n    } finally {\n      this.task = null;\n      freeTasks[freeTasks.length] = this;\n    }\n  };\n\n  return RawTask;\n}();\n\nfunction _classCallCheck$g(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$e(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$e(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$e(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$e(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$f(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _slicedToArray$5(arr, i) {\n  return _arrayWithHoles$5(arr) || _iterableToArrayLimit$5(arr, i) || _unsupportedIterableToArray$8(arr, i) || _nonIterableRest$5();\n}\n\nfunction _nonIterableRest$5() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$8(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$8(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$8(o, minLen);\n}\n\nfunction _arrayLikeToArray$8(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$5(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$5(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray$5(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nvar HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck$g(this, HandlerRegistryImpl);\n\n    _defineProperty$f(this, \"types\", new Map());\n\n    _defineProperty$f(this, \"dragSources\", new Map());\n\n    _defineProperty$f(this, \"dropTargets\", new Map());\n\n    _defineProperty$f(this, \"pinnedSourceId\", null);\n\n    _defineProperty$f(this, \"pinnedSource\", null);\n\n    _defineProperty$f(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass$e(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource$1(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget$1(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource$1(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget$1(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();\n\nfunction createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar _excluded = [\"children\"];\n\nfunction _slicedToArray$4(arr, i) {\n  return _arrayWithHoles$4(arr) || _iterableToArrayLimit$4(arr, i) || _unsupportedIterableToArray$7(arr, i) || _nonIterableRest$4();\n}\n\nfunction _nonIterableRest$4() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$7(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$7(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$7(o, minLen);\n}\n\nfunction _arrayLikeToArray$7(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$4(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$4(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nvar DndProvider = /*#__PURE__*/memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray$4(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}\n\nfunction _classCallCheck$f(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$d(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$d(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$d(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$d(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$e(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nvar DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck$f(this, DragSourceMonitorImpl);\n\n    _defineProperty$e(this, \"internalMonitor\", void 0);\n\n    _defineProperty$e(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$d(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();\n\nfunction _classCallCheck$e(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$c(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$c(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$c(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$c(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$d(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar isCallingCanDrop = false;\nvar DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck$e(this, DropTargetMonitorImpl);\n\n    _defineProperty$d(this, \"internalMonitor\", void 0);\n\n    _defineProperty$d(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass$c(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; // When passed a node, call the hook straight away.\n\n    if (! /*#__PURE__*/isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nfunction wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return /*#__PURE__*/cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return /*#__PURE__*/cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}\n\nfunction _typeof$3(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$3 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$3 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$3(obj);\n}\n\nfunction isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof$3(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}\n\nfunction shallowEqual(objA, objB, compare, compareContext) {\n  var compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // Test for A's keys different from B.\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n    compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction _classCallCheck$d(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$b(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$b(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$b(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$b(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$c(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$d(this, SourceConnector);\n\n    _defineProperty$c(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty$c(this, \"handlerId\", null);\n\n    _defineProperty$c(this, \"dragSourceRef\", null);\n\n    _defineProperty$c(this, \"dragSourceNode\", void 0);\n\n    _defineProperty$c(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewRef\", null);\n\n    _defineProperty$c(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty$c(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty$c(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty$c(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty$c(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty$c(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$b(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();\n\nfunction _classCallCheck$c(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$a(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$a(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$a(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$a(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$b(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck$c(this, TargetConnector);\n\n    _defineProperty$b(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty$b(this, \"handlerId\", null);\n\n    _defineProperty$b(this, \"dropTargetRef\", null);\n\n    _defineProperty$b(this, \"dropTargetNode\", void 0);\n\n    _defineProperty$b(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty$b(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty$b(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty$b(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty$b(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass$a(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();\n\nfunction registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nfunction registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}\n\nfunction _typeof$2(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$2 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$2 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$2(obj);\n}\nfunction isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nfunction isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nfunction isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nfunction checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\n\nfunction isObjectLike(input) {\n  return _typeof$2(input) === 'object' && input !== null;\n}\n\nfunction isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\n\nvar reactIs$1 = {exports: {}};\n\nvar reactIs_production_min = {};\n\n/** @license React v16.13.1\n * react-is.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar b = \"function\" === typeof Symbol && Symbol.for,\n    c = b ? Symbol.for(\"react.element\") : 60103,\n    d = b ? Symbol.for(\"react.portal\") : 60106,\n    e = b ? Symbol.for(\"react.fragment\") : 60107,\n    f = b ? Symbol.for(\"react.strict_mode\") : 60108,\n    g = b ? Symbol.for(\"react.profiler\") : 60114,\n    h = b ? Symbol.for(\"react.provider\") : 60109,\n    k = b ? Symbol.for(\"react.context\") : 60110,\n    l = b ? Symbol.for(\"react.async_mode\") : 60111,\n    m = b ? Symbol.for(\"react.concurrent_mode\") : 60111,\n    n = b ? Symbol.for(\"react.forward_ref\") : 60112,\n    p = b ? Symbol.for(\"react.suspense\") : 60113,\n    q = b ? Symbol.for(\"react.suspense_list\") : 60120,\n    r = b ? Symbol.for(\"react.memo\") : 60115,\n    t = b ? Symbol.for(\"react.lazy\") : 60116,\n    v = b ? Symbol.for(\"react.block\") : 60121,\n    w = b ? Symbol.for(\"react.fundamental\") : 60117,\n    x = b ? Symbol.for(\"react.responder\") : 60118,\n    y = b ? Symbol.for(\"react.scope\") : 60119;\n\nfunction z(a) {\n  if (\"object\" === typeof a && null !== a) {\n    var u = a.$$typeof;\n\n    switch (u) {\n      case c:\n        switch (a = a.type, a) {\n          case l:\n          case m:\n          case e:\n          case g:\n          case f:\n          case p:\n            return a;\n\n          default:\n            switch (a = a && a.$$typeof, a) {\n              case k:\n              case n:\n              case t:\n              case r:\n              case h:\n                return a;\n\n              default:\n                return u;\n            }\n\n        }\n\n      case d:\n        return u;\n    }\n  }\n}\n\nfunction A(a) {\n  return z(a) === m;\n}\n\nreactIs_production_min.AsyncMode = l;\nreactIs_production_min.ConcurrentMode = m;\nreactIs_production_min.ContextConsumer = k;\nreactIs_production_min.ContextProvider = h;\nreactIs_production_min.Element = c;\nreactIs_production_min.ForwardRef = n;\nreactIs_production_min.Fragment = e;\nreactIs_production_min.Lazy = t;\nreactIs_production_min.Memo = r;\nreactIs_production_min.Portal = d;\nreactIs_production_min.Profiler = g;\nreactIs_production_min.StrictMode = f;\nreactIs_production_min.Suspense = p;\n\nreactIs_production_min.isAsyncMode = function (a) {\n  return A(a) || z(a) === l;\n};\n\nreactIs_production_min.isConcurrentMode = A;\n\nreactIs_production_min.isContextConsumer = function (a) {\n  return z(a) === k;\n};\n\nreactIs_production_min.isContextProvider = function (a) {\n  return z(a) === h;\n};\n\nreactIs_production_min.isElement = function (a) {\n  return \"object\" === typeof a && null !== a && a.$$typeof === c;\n};\n\nreactIs_production_min.isForwardRef = function (a) {\n  return z(a) === n;\n};\n\nreactIs_production_min.isFragment = function (a) {\n  return z(a) === e;\n};\n\nreactIs_production_min.isLazy = function (a) {\n  return z(a) === t;\n};\n\nreactIs_production_min.isMemo = function (a) {\n  return z(a) === r;\n};\n\nreactIs_production_min.isPortal = function (a) {\n  return z(a) === d;\n};\n\nreactIs_production_min.isProfiler = function (a) {\n  return z(a) === g;\n};\n\nreactIs_production_min.isStrictMode = function (a) {\n  return z(a) === f;\n};\n\nreactIs_production_min.isSuspense = function (a) {\n  return z(a) === p;\n};\n\nreactIs_production_min.isValidElementType = function (a) {\n  return \"string\" === typeof a || \"function\" === typeof a || a === e || a === m || a === g || a === f || a === p || a === q || \"object\" === typeof a && null !== a && (a.$$typeof === t || a.$$typeof === r || a.$$typeof === h || a.$$typeof === k || a.$$typeof === n || a.$$typeof === w || a.$$typeof === x || a.$$typeof === y || a.$$typeof === v);\n};\n\nreactIs_production_min.typeOf = z;\n\nvar reactIs_development = {};\n\n/** @license React v16.13.1\n * react-is.development.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== \"production\") {\n  (function () {\n    // nor polyfill, then a plain number is used for performance.\n\n    var hasSymbol = typeof Symbol === 'function' && Symbol.for;\n    var REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\n    var REACT_PORTAL_TYPE = hasSymbol ? Symbol.for('react.portal') : 0xeaca;\n    var REACT_FRAGMENT_TYPE = hasSymbol ? Symbol.for('react.fragment') : 0xeacb;\n    var REACT_STRICT_MODE_TYPE = hasSymbol ? Symbol.for('react.strict_mode') : 0xeacc;\n    var REACT_PROFILER_TYPE = hasSymbol ? Symbol.for('react.profiler') : 0xead2;\n    var REACT_PROVIDER_TYPE = hasSymbol ? Symbol.for('react.provider') : 0xeacd;\n    var REACT_CONTEXT_TYPE = hasSymbol ? Symbol.for('react.context') : 0xeace; // TODO: We don't use AsyncMode or ConcurrentMode anymore. They were temporary\n    // (unstable) APIs that have been removed. Can we remove the symbols?\n\n    var REACT_ASYNC_MODE_TYPE = hasSymbol ? Symbol.for('react.async_mode') : 0xeacf;\n    var REACT_CONCURRENT_MODE_TYPE = hasSymbol ? Symbol.for('react.concurrent_mode') : 0xeacf;\n    var REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n    var REACT_SUSPENSE_TYPE = hasSymbol ? Symbol.for('react.suspense') : 0xead1;\n    var REACT_SUSPENSE_LIST_TYPE = hasSymbol ? Symbol.for('react.suspense_list') : 0xead8;\n    var REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\n    var REACT_LAZY_TYPE = hasSymbol ? Symbol.for('react.lazy') : 0xead4;\n    var REACT_BLOCK_TYPE = hasSymbol ? Symbol.for('react.block') : 0xead9;\n    var REACT_FUNDAMENTAL_TYPE = hasSymbol ? Symbol.for('react.fundamental') : 0xead5;\n    var REACT_RESPONDER_TYPE = hasSymbol ? Symbol.for('react.responder') : 0xead6;\n    var REACT_SCOPE_TYPE = hasSymbol ? Symbol.for('react.scope') : 0xead7;\n\n    function isValidElementType(type) {\n      return typeof type === 'string' || typeof type === 'function' || // Note: its typeof might be other than 'symbol' or 'number' if it's a polyfill.\n      type === REACT_FRAGMENT_TYPE || type === REACT_CONCURRENT_MODE_TYPE || type === REACT_PROFILER_TYPE || type === REACT_STRICT_MODE_TYPE || type === REACT_SUSPENSE_TYPE || type === REACT_SUSPENSE_LIST_TYPE || typeof type === 'object' && type !== null && (type.$$typeof === REACT_LAZY_TYPE || type.$$typeof === REACT_MEMO_TYPE || type.$$typeof === REACT_PROVIDER_TYPE || type.$$typeof === REACT_CONTEXT_TYPE || type.$$typeof === REACT_FORWARD_REF_TYPE || type.$$typeof === REACT_FUNDAMENTAL_TYPE || type.$$typeof === REACT_RESPONDER_TYPE || type.$$typeof === REACT_SCOPE_TYPE || type.$$typeof === REACT_BLOCK_TYPE);\n    }\n\n    function typeOf(object) {\n      if (typeof object === 'object' && object !== null) {\n        var $$typeof = object.$$typeof;\n\n        switch ($$typeof) {\n          case REACT_ELEMENT_TYPE:\n            var type = object.type;\n\n            switch (type) {\n              case REACT_ASYNC_MODE_TYPE:\n              case REACT_CONCURRENT_MODE_TYPE:\n              case REACT_FRAGMENT_TYPE:\n              case REACT_PROFILER_TYPE:\n              case REACT_STRICT_MODE_TYPE:\n              case REACT_SUSPENSE_TYPE:\n                return type;\n\n              default:\n                var $$typeofType = type && type.$$typeof;\n\n                switch ($$typeofType) {\n                  case REACT_CONTEXT_TYPE:\n                  case REACT_FORWARD_REF_TYPE:\n                  case REACT_LAZY_TYPE:\n                  case REACT_MEMO_TYPE:\n                  case REACT_PROVIDER_TYPE:\n                    return $$typeofType;\n\n                  default:\n                    return $$typeof;\n                }\n\n            }\n\n          case REACT_PORTAL_TYPE:\n            return $$typeof;\n        }\n      }\n\n      return undefined;\n    } // AsyncMode is deprecated along with isAsyncMode\n\n\n    var AsyncMode = REACT_ASYNC_MODE_TYPE;\n    var ConcurrentMode = REACT_CONCURRENT_MODE_TYPE;\n    var ContextConsumer = REACT_CONTEXT_TYPE;\n    var ContextProvider = REACT_PROVIDER_TYPE;\n    var Element = REACT_ELEMENT_TYPE;\n    var ForwardRef = REACT_FORWARD_REF_TYPE;\n    var Fragment = REACT_FRAGMENT_TYPE;\n    var Lazy = REACT_LAZY_TYPE;\n    var Memo = REACT_MEMO_TYPE;\n    var Portal = REACT_PORTAL_TYPE;\n    var Profiler = REACT_PROFILER_TYPE;\n    var StrictMode = REACT_STRICT_MODE_TYPE;\n    var Suspense = REACT_SUSPENSE_TYPE;\n    var hasWarnedAboutDeprecatedIsAsyncMode = false; // AsyncMode should be deprecated\n\n    function isAsyncMode(object) {\n      {\n        if (!hasWarnedAboutDeprecatedIsAsyncMode) {\n          hasWarnedAboutDeprecatedIsAsyncMode = true; // Using console['warn'] to evade Babel and ESLint\n\n          console['warn']('The ReactIs.isAsyncMode() alias has been deprecated, ' + 'and will be removed in React 17+. Update your code to use ' + 'ReactIs.isConcurrentMode() instead. It has the exact same API.');\n        }\n      }\n      return isConcurrentMode(object) || typeOf(object) === REACT_ASYNC_MODE_TYPE;\n    }\n\n    function isConcurrentMode(object) {\n      return typeOf(object) === REACT_CONCURRENT_MODE_TYPE;\n    }\n\n    function isContextConsumer(object) {\n      return typeOf(object) === REACT_CONTEXT_TYPE;\n    }\n\n    function isContextProvider(object) {\n      return typeOf(object) === REACT_PROVIDER_TYPE;\n    }\n\n    function isElement(object) {\n      return typeof object === 'object' && object !== null && object.$$typeof === REACT_ELEMENT_TYPE;\n    }\n\n    function isForwardRef(object) {\n      return typeOf(object) === REACT_FORWARD_REF_TYPE;\n    }\n\n    function isFragment(object) {\n      return typeOf(object) === REACT_FRAGMENT_TYPE;\n    }\n\n    function isLazy(object) {\n      return typeOf(object) === REACT_LAZY_TYPE;\n    }\n\n    function isMemo(object) {\n      return typeOf(object) === REACT_MEMO_TYPE;\n    }\n\n    function isPortal(object) {\n      return typeOf(object) === REACT_PORTAL_TYPE;\n    }\n\n    function isProfiler(object) {\n      return typeOf(object) === REACT_PROFILER_TYPE;\n    }\n\n    function isStrictMode(object) {\n      return typeOf(object) === REACT_STRICT_MODE_TYPE;\n    }\n\n    function isSuspense(object) {\n      return typeOf(object) === REACT_SUSPENSE_TYPE;\n    }\n\n    reactIs_development.AsyncMode = AsyncMode;\n    reactIs_development.ConcurrentMode = ConcurrentMode;\n    reactIs_development.ContextConsumer = ContextConsumer;\n    reactIs_development.ContextProvider = ContextProvider;\n    reactIs_development.Element = Element;\n    reactIs_development.ForwardRef = ForwardRef;\n    reactIs_development.Fragment = Fragment;\n    reactIs_development.Lazy = Lazy;\n    reactIs_development.Memo = Memo;\n    reactIs_development.Portal = Portal;\n    reactIs_development.Profiler = Profiler;\n    reactIs_development.StrictMode = StrictMode;\n    reactIs_development.Suspense = Suspense;\n    reactIs_development.isAsyncMode = isAsyncMode;\n    reactIs_development.isConcurrentMode = isConcurrentMode;\n    reactIs_development.isContextConsumer = isContextConsumer;\n    reactIs_development.isContextProvider = isContextProvider;\n    reactIs_development.isElement = isElement;\n    reactIs_development.isForwardRef = isForwardRef;\n    reactIs_development.isFragment = isFragment;\n    reactIs_development.isLazy = isLazy;\n    reactIs_development.isMemo = isMemo;\n    reactIs_development.isPortal = isPortal;\n    reactIs_development.isProfiler = isProfiler;\n    reactIs_development.isStrictMode = isStrictMode;\n    reactIs_development.isSuspense = isSuspense;\n    reactIs_development.isValidElementType = isValidElementType;\n    reactIs_development.typeOf = typeOf;\n  })();\n}\n\nif (process.env.NODE_ENV === 'production') {\n  reactIs$1.exports = reactIs_production_min;\n} else {\n  reactIs$1.exports = reactIs_development;\n}\n\nvar reactIs = reactIs$1.exports;\n/**\n * Copyright 2015, Yahoo! Inc.\n * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.\n */\n\n\nvar REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true\n};\nvar KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true\n};\nvar FORWARD_REF_STATICS = {\n  '$$typeof': true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true\n};\nvar MEMO_STATICS = {\n  '$$typeof': true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true\n};\nvar TYPE_STATICS = {};\nTYPE_STATICS[reactIs.ForwardRef] = FORWARD_REF_STATICS;\nTYPE_STATICS[reactIs.Memo] = MEMO_STATICS;\n\nfunction getStatics(component) {\n  // React v16.11 and below\n  if (reactIs.isMemo(component)) {\n    return MEMO_STATICS;\n  } // React v16.12 and above\n\n\n  return TYPE_STATICS[component['$$typeof']] || REACT_STATICS;\n}\n\nvar defineProperty = Object.defineProperty;\nvar getOwnPropertyNames = Object.getOwnPropertyNames;\nvar getOwnPropertySymbols$1 = Object.getOwnPropertySymbols;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar getPrototypeOf = Object.getPrototypeOf;\nvar objectPrototype = Object.prototype;\n\nfunction hoistNonReactStatics(targetComponent, sourceComponent, blacklist) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n    if (objectPrototype) {\n      var inheritedComponent = getPrototypeOf(sourceComponent);\n\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, blacklist);\n      }\n    }\n\n    var keys = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols$1) {\n      keys = keys.concat(getOwnPropertySymbols$1(sourceComponent));\n    }\n\n    var targetStatics = getStatics(targetComponent);\n    var sourceStatics = getStatics(sourceComponent);\n\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i];\n\n      if (!KNOWN_STATICS[key] && !(blacklist && blacklist[key]) && !(sourceStatics && sourceStatics[key]) && !(targetStatics && targetStatics[key])) {\n        var descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor);\n        } catch (e) {}\n      }\n    }\n  }\n\n  return targetComponent;\n}\n\nvar hoistNonReactStatics_cjs = hoistNonReactStatics;\n\nvar hoistStatics = hoistNonReactStatics_cjs;\n\nfunction _typeof$1(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof$1 = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof$1 = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof$1(obj);\n}\n\nfunction _classCallCheck$b(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$9(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$9(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$9(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$9(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof$1(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _defineProperty$a(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\nfunction DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck$b(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty$a(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty$a(_assertThisInitialized(_this), \"ref\", /*#__PURE__*/createRef());\n\n        _defineProperty$a(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass$9(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof$1(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty$a(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty$a(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck$a(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$8(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$8(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$8(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$8(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$9(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck$a(this, DragSourceImpl);\n\n    _defineProperty$9(this, \"spec\", void 0);\n\n    _defineProperty$9(this, \"monitor\", void 0);\n\n    _defineProperty$9(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass$8(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();\n\nfunction useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}\n\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nfunction useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}\n\nfunction useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}\n\nfunction _slicedToArray$3(arr, i) {\n  return _arrayWithHoles$3(arr) || _iterableToArrayLimit$3(arr, i) || _unsupportedIterableToArray$6(arr, i) || _nonIterableRest$3();\n}\n\nfunction _nonIterableRest$3() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$6(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$6(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$6(o, minLen);\n}\n\nfunction _arrayLikeToArray$6(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$3(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$3(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray$3(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}\n\nfunction _toConsumableArray$1(arr) {\n  return _arrayWithoutHoles$1(arr) || _iterableToArray$1(arr) || _unsupportedIterableToArray$5(arr) || _nonIterableSpread$1();\n}\n\nfunction _nonIterableSpread$1() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$5(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$5(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$5(o, minLen);\n}\n\nfunction _iterableToArray$1(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles$1(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray$5(arr);\n}\n\nfunction _arrayLikeToArray$5(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\nfunction useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray$1(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}\n\nfunction useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}\n\nvar fastDeepEqual = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) if (!equal(a[i], b[i])) return false;\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\nfunction _slicedToArray$2(arr, i) {\n  return _arrayWithHoles$2(arr) || _iterableToArrayLimit$2(arr, i) || _unsupportedIterableToArray$4(arr, i) || _nonIterableRest$2();\n}\n\nfunction _nonIterableRest$2() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$4(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$4(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$4(o, minLen);\n}\n\nfunction _arrayLikeToArray$4(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$2(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$2(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nfunction useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray$2(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!fastDeepEqual(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}\n\nfunction _slicedToArray$1(arr, i) {\n  return _arrayWithHoles$1(arr) || _iterableToArrayLimit$1(arr, i) || _unsupportedIterableToArray$3(arr, i) || _nonIterableRest$1();\n}\n\nfunction _nonIterableRest$1() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$3(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$3(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$3(o, minLen);\n}\n\nfunction _arrayLikeToArray$3(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit$1(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles$1(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray$1(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}\n\nfunction useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}\n\nfunction useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\nfunction useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}\n\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nfunction useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}\n\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\nfunction useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}\n\nfunction _classCallCheck$9(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$7(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$7(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$7(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$7(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$8(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck$9(this, DropTargetImpl);\n\n    _defineProperty$8(this, \"spec\", void 0);\n\n    _defineProperty$8(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass$7(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();\n\nfunction useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray$2(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray$2(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$2(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$2(o, minLen);\n}\n\nfunction _arrayLikeToArray$2(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}\n\nfunction useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}\n\nfunction useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}\n\nfunction useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}\n\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nfunction useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}\n\nvar createTransition = (function (event, check) {\n  return {\n    _isMBTransition: true,\n    event: event,\n    check: check\n  };\n});\n\nvar TouchTransition = createTransition('touchstart', function (event) {\n  return event.touches != null; // eslint-disable-line no-eq-null, eqeqeq\n});\nvar MouseTransition = createTransition('mousedown', function (event) {\n  if (event.type) {\n    return event.type.indexOf('touch') === -1 && event.type.indexOf('mouse') !== -1;\n  }\n\n  return false;\n});\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = _unsupportedIterableToArray$1(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray$1(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray$1(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray$1(o, minLen);\n}\n\nfunction _arrayLikeToArray$1(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$8(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar PreviewList = function PreviewList() {\n  var _this = this;\n\n  _classCallCheck$8(this, PreviewList);\n\n  this.register = function (preview) {\n    _this.previews.push(preview);\n  };\n\n  this.unregister = function (preview) {\n    var index;\n\n    while ((index = _this.previews.indexOf(preview)) !== -1) {\n      _this.previews.splice(index, 1);\n    }\n  };\n\n  this.backendChanged = function (backend) {\n    var _iterator = _createForOfIteratorHelper(_this.previews),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var preview = _step.value;\n        preview.backendChanged(backend);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n\n  this.previews = [];\n};\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck$7(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar _default = function _default(manager, context, sourceOptions) {\n  var _this = this;\n\n  _classCallCheck$7(this, _default);\n\n  this.setup = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    if (_this.constructor.isSetUp) {\n      throw new Error('Cannot have two MultiBackends at the same time.');\n    }\n\n    _this.constructor.isSetUp = true;\n\n    _this.addEventListeners(window);\n\n    _this.backends[_this.current].instance.setup();\n  };\n\n  this.teardown = function () {\n    if (typeof window === 'undefined') {\n      return;\n    }\n\n    _this.constructor.isSetUp = false;\n\n    _this.removeEventListeners(window);\n\n    _this.backends[_this.current].instance.teardown();\n  };\n\n  this.connectDragSource = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _this.connectBackend('connectDragSource', args);\n  };\n\n  this.connectDragPreview = function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _this.connectBackend('connectDragPreview', args);\n  };\n\n  this.connectDropTarget = function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _this.connectBackend('connectDropTarget', args);\n  };\n\n  this.previewEnabled = function () {\n    return _this.backends[_this.current].preview;\n  };\n\n  this.addEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.addEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.removeEventListeners = function (target) {\n    _this.backends.forEach(function (backend) {\n      if (backend.transition) {\n        target.removeEventListener(backend.transition.event, _this.backendSwitcher, true);\n      }\n    });\n  };\n\n  this.backendSwitcher = function (event) {\n    var oldBackend = _this.current;\n    var i = 0;\n\n    _this.backends.some(function (backend) {\n      if (i !== _this.current && backend.transition && backend.transition.check(event)) {\n        _this.current = i;\n        return true;\n      }\n\n      i += 1;\n      return false;\n    });\n\n    if (_this.current !== oldBackend) {\n      _this.backends[oldBackend].instance.teardown();\n\n      Object.keys(_this.nodes).forEach(function (id) {\n        var node = _this.nodes[id];\n        node.handler();\n        node.handler = _this.callBackend(node.func, node.args);\n      });\n\n      _this.previews.backendChanged(_this);\n\n      var newBackend = _this.backends[_this.current];\n      newBackend.instance.setup();\n\n      if (newBackend.skipDispatchOnTransition) {\n        return;\n      }\n\n      var newEvent = null;\n\n      try {\n        newEvent = new event.constructor(event.type, event);\n      } catch (_e) {\n        newEvent = document.createEvent('Event');\n        newEvent.initEvent(event.type, event.bubbles, event.cancelable);\n      }\n\n      event.target.dispatchEvent(newEvent);\n    }\n  };\n\n  this.callBackend = function (func, args) {\n    var _this$backends$_this$;\n\n    return (_this$backends$_this$ = _this.backends[_this.current].instance)[func].apply(_this$backends$_this$, _toConsumableArray(args));\n  };\n\n  this.connectBackend = function (func, args) {\n    var nodeId = \"\".concat(func, \"_\").concat(args[0]);\n\n    var handler = _this.callBackend(func, args);\n\n    _this.nodes[nodeId] = {\n      func: func,\n      args: args,\n      handler: handler\n    };\n    return function () {\n      var _this$nodes$nodeId;\n\n      var r = (_this$nodes$nodeId = _this.nodes[nodeId]).handler.apply(_this$nodes$nodeId, arguments);\n\n      delete _this.nodes[nodeId];\n      return r;\n    };\n  };\n\n  var options = Object.assign({\n    backends: []\n  }, sourceOptions || {});\n\n  if (options.backends.length < 1) {\n    throw new Error(\"You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx\");\n  }\n\n  this.current = 0;\n  this.previews = new PreviewList();\n  this.backends = [];\n  options.backends.forEach(function (backend) {\n    if (!backend.backend) {\n      throw new Error(\"You must specify a 'backend' property in your Backend entry: \".concat(backend));\n    }\n\n    var transition = backend.transition;\n\n    if (transition && !transition._isMBTransition) {\n      throw new Error(\"You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: \".concat(backend));\n    }\n\n    _this.backends.push({\n      instance: backend.backend(manager, context, backend.options),\n      preview: backend.preview || false,\n      transition: transition,\n      skipDispatchOnTransition: Boolean(backend.skipDispatchOnTransition)\n    });\n  });\n  this.nodes = {};\n} // DnD Backend API\n;\n\nvar MultiBackend = (function (manager, context, options) {\n  return new _default(manager, context, options);\n});\n\nvar propTypes = {exports: {}};\n\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n/* eslint-disable no-unused-vars */\n\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n\n  return Object(val);\n}\n\nfunction shouldUseNative() {\n  try {\n    if (!Object.assign) {\n      return false;\n    } // Detect buggy property enumeration order in older V8 versions.\n    // https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\n\n    var test1 = new String('abc'); // eslint-disable-line no-new-wrappers\n\n    test1[5] = 'de';\n\n    if (Object.getOwnPropertyNames(test1)[0] === '5') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test2 = {};\n\n    for (var i = 0; i < 10; i++) {\n      test2['_' + String.fromCharCode(i)] = i;\n    }\n\n    var order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n      return test2[n];\n    });\n\n    if (order2.join('') !== '0123456789') {\n      return false;\n    } // https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\n\n    var test3 = {};\n    'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n      test3[letter] = letter;\n    });\n\n    if (Object.keys(Object.assign({}, test3)).join('') !== 'abcdefghijklmnopqrst') {\n      return false;\n    }\n\n    return true;\n  } catch (err) {\n    // We don't expect any of the above to throw, but better to be safe.\n    return false;\n  }\n}\n\nvar objectAssign = shouldUseNative() ? Object.assign : function (target, source) {\n  var from;\n  var to = toObject(target);\n  var symbols;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n\n    if (getOwnPropertySymbols) {\n      symbols = getOwnPropertySymbols(from);\n\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n\n  return to;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret$3 = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\nvar ReactPropTypesSecret_1 = ReactPropTypesSecret$3;\n\nvar has$2 = Function.call.bind(Object.prototype.hasOwnProperty);\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar printWarning$1 = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret$2 = ReactPropTypesSecret_1;\n\n  var loggedTypeFailures = {};\n\n  var has$1 = has$2;\n\n  printWarning$1 = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {\n      /**/\n    }\n  };\n}\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\n\n\nfunction checkPropTypes$1(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (has$1(typeSpecs, typeSpecName)) {\n        var error; // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error((componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.' + 'This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.');\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret$2);\n        } catch (ex) {\n          error = ex;\n        }\n\n        if (error && !(error instanceof Error)) {\n          printWarning$1((componentName || 'React class') + ': type specification of ' + location + ' `' + typeSpecName + '` is invalid; the type checker ' + 'function must return `null` or an `Error` but returned a ' + typeof error + '. ' + 'You may have forgotten to pass an argument to the type checker ' + 'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' + 'shape all require an argument).');\n        }\n\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n          var stack = getStack ? getStack() : '';\n          printWarning$1('Failed ' + location + ' type: ' + error.message + (stack != null ? stack : ''));\n        }\n      }\n    }\n  }\n}\n/**\n * Resets warning cache when testing.\n *\n * @private\n */\n\n\ncheckPropTypes$1.resetWarningCache = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    loggedTypeFailures = {};\n  }\n};\n\nvar checkPropTypes_1 = checkPropTypes$1;\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactIs$1 = reactIs$1.exports;\n\nvar assign = objectAssign;\n\nvar ReactPropTypesSecret$1 = ReactPropTypesSecret_1;\n\nvar has = has$2;\n\nvar checkPropTypes = checkPropTypes_1;\n\nvar printWarning = function () {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function (text) {\n    var message = 'Warning: ' + text;\n\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nvar factoryWithTypeCheckers = function (isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n\n  var ANONYMOUS = '<<anonymous>>'; // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bigint: createPrimitiveTypeChecker('bigint'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    elementType: createElementTypeTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker\n  };\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n\n  /*eslint-disable no-self-compare*/\n\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n\n\n  function PropTypeError(message, data) {\n    this.message = message;\n    this.data = data && typeof data === 'object' ? data : {};\n    this.stack = '';\n  } // Make `instanceof Error` still work for returned errors.\n\n\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret$1) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use `PropTypes.checkPropTypes()` to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n\n          if (!manualPropTypeCallCache[cacheKey] && // Avoid spamming the console because they are often not actionable except for lib authors\n          manualPropTypeWarningCount < 3) {\n            printWarning('You are manually calling a React.PropTypes validation ' + 'function for the `' + propFullName + '` prop on `' + componentName + '`. This is deprecated ' + 'and will throw in the standalone `prop-types` package. ' + 'You may be seeing this warning due to a third-party PropTypes ' + 'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.');\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'), {\n          expectedType: expectedType\n        });\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n\n      var propValue = props[propName];\n\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret$1);\n\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      if (!ReactIs$1.isValidElementType(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement type.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (arguments.length > 1) {\n          printWarning('Invalid arguments supplied to oneOf, expected an array, got ' + arguments.length + ' arguments. ' + 'A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).');\n        } else {\n          printWarning('Invalid argument supplied to oneOf, expected an array.');\n        }\n      }\n\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues, function replacer(key, value) {\n        var type = getPreciseType(value);\n\n        if (type === 'symbol') {\n          return String(value);\n        }\n\n        return value;\n      });\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + String(propValue) + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n\n      for (var key in propValue) {\n        if (has(propValue, key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n\n      if (typeof checker !== 'function') {\n        printWarning('Invalid argument supplied to oneOfType. Expected an array of check functions, but ' + 'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.');\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var expectedTypes = [];\n\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        var checkerResult = checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret$1);\n\n        if (checkerResult == null) {\n          return null;\n        }\n\n        if (checkerResult.data && has(checkerResult.data, 'expectedType')) {\n          expectedTypes.push(checkerResult.data.expectedType);\n        }\n      }\n\n      var expectedTypesMessage = expectedTypes.length > 0 ? ', expected one of type [' + expectedTypes.join(', ') + ']' : '';\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`' + expectedTypesMessage + '.'));\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function invalidValidatorError(componentName, location, propFullName, key, type) {\n    return new PropTypeError((componentName || 'React class') + ': ' + location + ' type `' + propFullName + '.' + key + '` is invalid; ' + 'it must be a function, usually from the `prop-types` package, but received `' + type + '`.');\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n\n        if (typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      } // We need to check all keys in case some are required but missing from props.\n\n\n      var allKeys = assign({}, props[propName], shapeTypes);\n\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n\n        if (has(shapeTypes, key) && typeof checker !== 'function') {\n          return invalidValidatorError(componentName, location, propFullName, key, getPreciseType(checker));\n        }\n\n        if (!checker) {\n          return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' + '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') + '\\nValid keys: ' + JSON.stringify(Object.keys(shapeTypes), null, '  '));\n        }\n\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret$1);\n\n        if (error) {\n          return error;\n        }\n      }\n\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n\n      case 'boolean':\n        return !propValue;\n\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    } // falsy value can't be a Symbol\n\n\n    if (!propValue) {\n      return false;\n    } // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n\n\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    } // Fallback for non-spec compliant Symbols which are polyfilled.\n\n\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  } // Equivalent of `typeof` but with special handling for array and regexp.\n\n\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n\n    return propType;\n  } // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n\n\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n\n    var propType = getPropType(propValue);\n\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n\n    return propType;\n  } // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n\n\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n\n      default:\n        return type;\n    }\n  } // Returns class name of the object, if any.\n\n\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.resetWarningCache = checkPropTypes.resetWarningCache;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar ReactPropTypesSecret = ReactPropTypesSecret_1;\n\nfunction emptyFunction() {}\n\nfunction emptyFunctionWithReset() {}\n\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nvar factoryWithThrowingShims = function () {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n\n    var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n    err.name = 'Invariant Violation';\n    throw err;\n  }\n  shim.isRequired = shim;\n\n  function getShim() {\n    return shim;\n  }\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n  ReactPropTypes.PropTypes = ReactPropTypes;\n  return ReactPropTypes;\n};\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = reactIs$1.exports; // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n\n\n  var throwOnDirectAccess = true;\n  propTypes.exports = factoryWithTypeCheckers(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  propTypes.exports = factoryWithThrowingShims();\n}\n\nvar PropTypes = propTypes.exports;\n\n({\n  manager: PropTypes.any,\n  context: PropTypes.any,\n  options: PropTypes.any,\n  debugMode: PropTypes.bool\n});\n\n({\n  generator: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func])\n});\n\n// cheap lodash replacements\nfunction memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nfunction without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nfunction union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}\n\nfunction _classCallCheck$6(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$6(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$6(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$6(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$6(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$7(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck$6(this, EnterLeaveCounter);\n\n    _defineProperty$7(this, \"entered\", []);\n\n    _defineProperty$7(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass$6(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();\n\nvar isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nvar isSafari = memoize(function () {\n  return Boolean(window.safari);\n});\n\nfunction _classCallCheck$5(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$5(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$5(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$5(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$5(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$6(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck$5(this, MonotonicInterpolant);\n\n    _defineProperty$6(this, \"xs\", void 0);\n\n    _defineProperty$6(this, \"ys\", void 0);\n\n    _defineProperty$6(this, \"c1s\", void 0);\n\n    _defineProperty$6(this, \"c2s\", void 0);\n\n    _defineProperty$6(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass$5(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();\n\nvar ELEMENT_NODE$1 = 1;\nfunction getNodeClientOffset$1(node) {\n  var el = node.nodeType === ELEMENT_NODE$1 ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nfunction getEventClientOffset$1(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nfunction getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset$1(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}\n\nvar FILE = '__NATIVE_FILE__';\nvar URL = '__NATIVE_URL__';\nvar TEXT = '__NATIVE_TEXT__';\nvar HTML = '__NATIVE_HTML__';\n\nvar NativeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  FILE: FILE,\n  URL: URL,\n  TEXT: TEXT,\n  HTML: HTML\n});\n\nfunction getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}\n\nvar _nativeTypesConfig;\n\nfunction _defineProperty$5(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty$5(_nativeTypesConfig, FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty$5(_nativeTypesConfig, HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty$5(_nativeTypesConfig, URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty$5(_nativeTypesConfig, TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);\n\nfunction _classCallCheck$4(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$4(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$4(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$4(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$4(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$4(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck$4(this, NativeDragSource);\n\n    _defineProperty$4(this, \"item\", void 0);\n\n    _defineProperty$4(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass$4(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();\n\nfunction createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nfunction matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}\n\nfunction _classCallCheck$3(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$3(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$3(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$3(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$3(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$3(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader$1 = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck$3(this, OptionsReader);\n\n    _defineProperty$3(this, \"ownerDocument\", null);\n\n    _defineProperty$3(this, \"globalContext\", void 0);\n\n    _defineProperty$3(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass$3(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty$2(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck$2(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$2(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$2(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$2(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$2(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$2(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck$2(this, HTML5BackendImpl);\n\n    _defineProperty$2(this, \"options\", void 0);\n\n    _defineProperty$2(this, \"actions\", void 0);\n\n    _defineProperty$2(this, \"monitor\", void 0);\n\n    _defineProperty$2(this, \"registry\", void 0);\n\n    _defineProperty$2(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty$2(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty$2(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"sourceNodes\", new Map());\n\n    _defineProperty$2(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty$2(this, \"dragStartSourceIds\", null);\n\n    _defineProperty$2(this, \"dropTargetIds\", []);\n\n    _defineProperty$2(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty$2(this, \"currentNativeSource\", null);\n\n    _defineProperty$2(this, \"currentNativeHandle\", null);\n\n    _defineProperty$2(this, \"currentDragSourceNode\", null);\n\n    _defineProperty$2(this, \"altKeyPressed\", false);\n\n    _defineProperty$2(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty$2(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty$2(this, \"dragOverTargetIds\", null);\n\n    _defineProperty$2(this, \"lastClientOffset\", null);\n\n    _defineProperty$2(this, \"hoverRafId\", null);\n\n    _defineProperty$2(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset$1(source) || null;\n    });\n\n    _defineProperty$2(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty$2(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty$2(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset$1(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset$1(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty$2(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset$1(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty$2(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty$2(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset$1(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty$2(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader$1(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass$2(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();\n\nvar emptyImage;\nfunction getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}\n\nvar HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};\n\nvar ListenerType;\n\n(function (ListenerType) {\n  ListenerType[\"mouse\"] = \"mouse\";\n  ListenerType[\"touch\"] = \"touch\";\n  ListenerType[\"keyboard\"] = \"keyboard\";\n})(ListenerType || (ListenerType = {}));\n\n// Used for MouseEvent.buttons (note the s on the end).\nvar MouseButtons = {\n  Left: 1,\n  Right: 2,\n  Center: 4\n}; // Used for e.button (note the lack of an s on the end).\n\nvar MouseButton = {\n  Left: 0,\n  Center: 1,\n  Right: 2\n};\n/**\n * Only touch events and mouse events where the left button is pressed should initiate a drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldStartDrag(e) {\n  // For touch events, button will be undefined. If e.button is defined,\n  // then it should be MouseButton.Left.\n  return e.button === undefined || e.button === MouseButton.Left;\n}\n/**\n * Only touch events and mouse events where the left mouse button is no longer held should end a drag.\n * It's possible the user mouse downs with the left mouse button, then mouse down and ups with the right mouse button.\n * We don't want releasing the right mouse button to end the drag.\n * @param {MouseEvent | TouchEvent} e The event\n */\n\nfunction eventShouldEndDrag(e) {\n  // Touch events will have buttons be undefined, while mouse events will have e.buttons's left button\n  // bit field unset if the left mouse button has been released\n  return e.buttons === undefined || (e.buttons & MouseButtons.Left) === 0;\n}\nfunction isTouchEvent(e) {\n  return !!e.targetTouches;\n}\n\nvar ELEMENT_NODE = 1;\nfunction getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return undefined;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nfunction getEventClientTouchOffset(e, lastTargetTouchFallback) {\n  if (e.targetTouches.length === 1) {\n    return getEventClientOffset(e.targetTouches[0]);\n  } else if (lastTargetTouchFallback && e.touches.length === 1) {\n    if (e.touches[0].target === lastTargetTouchFallback.target) {\n      return getEventClientOffset(e.touches[0]);\n    }\n  }\n}\nfunction getEventClientOffset(e, lastTargetTouchFallback) {\n  if (isTouchEvent(e)) {\n    return getEventClientTouchOffset(e, lastTargetTouchFallback);\n  } else {\n    return {\n      x: e.clientX,\n      y: e.clientY\n    };\n  }\n}\n\nfunction distance(x1, y1, x2, y2) {\n  return Math.sqrt(Math.pow(Math.abs(x2 - x1), 2) + Math.pow(Math.abs(y2 - y1), 2));\n}\nfunction inAngleRanges(x1, y1, x2, y2, angleRanges) {\n  if (!angleRanges) {\n    return false;\n  }\n\n  var angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI + 180;\n\n  for (var i = 0; i < angleRanges.length; ++i) {\n    if ((angleRanges[i].start == null || angle >= angleRanges[i].start) && (angleRanges[i].end == null || angle <= angleRanges[i].end)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar supportsPassive = function () {\n  // simular to jQuery's test\n  var supported = false;\n\n  try {\n    addEventListener('test', function () {// do nothing\n    }, Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n        return true;\n      }\n    }));\n  } catch (e) {// do nothing\n  }\n\n  return supported;\n}();\n\nfunction _classCallCheck$1(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties$1(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass$1(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties$1(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty$1(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(args, context) {\n    _classCallCheck$1(this, OptionsReader);\n\n    _defineProperty$1(this, \"args\", void 0);\n\n    _defineProperty$1(this, \"context\", void 0);\n\n    this.args = args;\n    this.context = context;\n  }\n\n  _createClass$1(OptionsReader, [{\n    key: \"delay\",\n    get: function get() {\n      var _this$args$delay;\n\n      return (_this$args$delay = this.args.delay) !== null && _this$args$delay !== void 0 ? _this$args$delay : 0;\n    }\n  }, {\n    key: \"scrollAngleRanges\",\n    get: function get() {\n      return this.args.scrollAngleRanges;\n    }\n  }, {\n    key: \"getDropTargetElementsAtPoint\",\n    get: function get() {\n      return this.args.getDropTargetElementsAtPoint;\n    }\n  }, {\n    key: \"ignoreContextMenu\",\n    get: function get() {\n      var _this$args$ignoreCont;\n\n      return (_this$args$ignoreCont = this.args.ignoreContextMenu) !== null && _this$args$ignoreCont !== void 0 ? _this$args$ignoreCont : false;\n    }\n  }, {\n    key: \"enableHoverOutsideTarget\",\n    get: function get() {\n      var _this$args$enableHove;\n\n      return (_this$args$enableHove = this.args.enableHoverOutsideTarget) !== null && _this$args$enableHove !== void 0 ? _this$args$enableHove : false;\n    }\n  }, {\n    key: \"enableKeyboardEvents\",\n    get: function get() {\n      var _this$args$enableKeyb;\n\n      return (_this$args$enableKeyb = this.args.enableKeyboardEvents) !== null && _this$args$enableKeyb !== void 0 ? _this$args$enableKeyb : false;\n    }\n  }, {\n    key: \"enableMouseEvents\",\n    get: function get() {\n      var _this$args$enableMous;\n\n      return (_this$args$enableMous = this.args.enableMouseEvents) !== null && _this$args$enableMous !== void 0 ? _this$args$enableMous : false;\n    }\n  }, {\n    key: \"enableTouchEvents\",\n    get: function get() {\n      var _this$args$enableTouc;\n\n      return (_this$args$enableTouc = this.args.enableTouchEvents) !== null && _this$args$enableTouc !== void 0 ? _this$args$enableTouc : true;\n    }\n  }, {\n    key: \"touchSlop\",\n    get: function get() {\n      return this.args.touchSlop || 0;\n    }\n  }, {\n    key: \"delayTouchStart\",\n    get: function get() {\n      var _ref, _this$args$delayTouch, _this$args, _this$args2;\n\n      return (_ref = (_this$args$delayTouch = (_this$args = this.args) === null || _this$args === void 0 ? void 0 : _this$args.delayTouchStart) !== null && _this$args$delayTouch !== void 0 ? _this$args$delayTouch : (_this$args2 = this.args) === null || _this$args2 === void 0 ? void 0 : _this$args2.delay) !== null && _ref !== void 0 ? _ref : 0;\n    }\n  }, {\n    key: \"delayMouseStart\",\n    get: function get() {\n      var _ref2, _this$args$delayMouse, _this$args3, _this$args4;\n\n      return (_ref2 = (_this$args$delayMouse = (_this$args3 = this.args) === null || _this$args3 === void 0 ? void 0 : _this$args3.delayMouseStart) !== null && _this$args$delayMouse !== void 0 ? _this$args$delayMouse : (_this$args4 = this.args) === null || _this$args4 === void 0 ? void 0 : _this$args4.delay) !== null && _ref2 !== void 0 ? _ref2 : 0;\n    }\n  }, {\n    key: \"window\",\n    get: function get() {\n      if (this.context && this.context.window) {\n        return this.context.window;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$context;\n\n      if ((_this$context = this.context) !== null && _this$context !== void 0 && _this$context.document) {\n        return this.context.document;\n      }\n\n      if (this.window) {\n        return this.window.document;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$args5;\n\n      return ((_this$args5 = this.args) === null || _this$args5 === void 0 ? void 0 : _this$args5.rootElement) || this.document;\n    }\n  }]);\n\n  return OptionsReader;\n}();\n\nvar _eventNames;\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\nvar eventNames = (_eventNames = {}, _defineProperty(_eventNames, ListenerType.mouse, {\n  start: 'mousedown',\n  move: 'mousemove',\n  end: 'mouseup',\n  contextmenu: 'contextmenu'\n}), _defineProperty(_eventNames, ListenerType.touch, {\n  start: 'touchstart',\n  move: 'touchmove',\n  end: 'touchend'\n}), _defineProperty(_eventNames, ListenerType.keyboard, {\n  keydown: 'keydown'\n}), _eventNames);\nvar TouchBackendImpl = /*#__PURE__*/function () {\n  // React-DnD Dependencies\n  // Internal State\n  // Patch for iOS 13, discussion over #1585\n  function TouchBackendImpl(manager, context, options) {\n    var _this = this;\n\n    _classCallCheck(this, TouchBackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"sourceNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", void 0);\n\n    _defineProperty(this, \"targetNodes\", void 0);\n\n    _defineProperty(this, \"_mouseClientOffset\", void 0);\n\n    _defineProperty(this, \"_isScrolling\", void 0);\n\n    _defineProperty(this, \"listenerTypes\", void 0);\n\n    _defineProperty(this, \"moveStartSourceIds\", void 0);\n\n    _defineProperty(this, \"waitingForDelay\", void 0);\n\n    _defineProperty(this, \"timeout\", void 0);\n\n    _defineProperty(this, \"dragOverTargetIds\", void 0);\n\n    _defineProperty(this, \"draggedSourceNode\", void 0);\n\n    _defineProperty(this, \"draggedSourceNodeRemovalObserver\", void 0);\n\n    _defineProperty(this, \"lastTargetTouchFallback\", void 0);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var element = _this.sourceNodes.get(sourceId);\n\n      return element && getNodeClientOffset(element);\n    });\n\n    _defineProperty(this, \"handleTopMoveStartCapture\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      _this.moveStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleMoveStart\", function (sourceId) {\n      // Just because we received an event doesn't necessarily mean we need to collect drag sources.\n      // We only collect start collecting drag sources on touch and left mouse events.\n      if (Array.isArray(_this.moveStartSourceIds)) {\n        _this.moveStartSourceIds.unshift(sourceId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMoveStart\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      } // Don't prematurely preventDefault() here since it might:\n      // 1. Mess up scrolling\n      // 2. Mess up long tap (which brings up context menu)\n      // 3. If there's an anchor link as a child, tap won't be triggered on link\n\n\n      var clientOffset = getEventClientOffset(e);\n\n      if (clientOffset) {\n        if (isTouchEvent(e)) {\n          _this.lastTargetTouchFallback = e.targetTouches[0];\n        }\n\n        _this._mouseClientOffset = clientOffset;\n      }\n\n      _this.waitingForDelay = false;\n    });\n\n    _defineProperty(this, \"handleTopMoveStartDelay\", function (e) {\n      if (!eventShouldStartDrag(e)) {\n        return;\n      }\n\n      var delay = e.type === eventNames.touch.start ? _this.options.delayTouchStart : _this.options.delayMouseStart;\n      _this.timeout = setTimeout(_this.handleTopMoveStart.bind(_this, e), delay);\n      _this.waitingForDelay = true;\n    });\n\n    _defineProperty(this, \"handleTopMoveCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleMove\", function (_evt, targetId) {\n      if (_this.dragOverTargetIds) {\n        _this.dragOverTargetIds.unshift(targetId);\n      }\n    });\n\n    _defineProperty(this, \"handleTopMove\", function (e) {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n\n      if (!_this.document || _this.waitingForDelay) {\n        return;\n      }\n\n      var moveStartSourceIds = _this.moveStartSourceIds,\n          dragOverTargetIds = _this.dragOverTargetIds;\n      var enableHoverOutsideTarget = _this.options.enableHoverOutsideTarget;\n      var clientOffset = getEventClientOffset(e, _this.lastTargetTouchFallback);\n\n      if (!clientOffset) {\n        return;\n      } // If the touch move started as a scroll, or is is between the scroll angles\n\n\n      if (_this._isScrolling || !_this.monitor.isDragging() && inAngleRanges(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y, _this.options.scrollAngleRanges)) {\n        _this._isScrolling = true;\n        return;\n      } // If we're not dragging and we've moved a little, that counts as a drag start\n\n\n      if (!_this.monitor.isDragging() && // eslint-disable-next-line no-prototype-builtins\n      _this._mouseClientOffset.hasOwnProperty('x') && moveStartSourceIds && distance(_this._mouseClientOffset.x || 0, _this._mouseClientOffset.y || 0, clientOffset.x, clientOffset.y) > (_this.options.touchSlop ? _this.options.touchSlop : 0)) {\n        _this.moveStartSourceIds = undefined;\n\n        _this.actions.beginDrag(moveStartSourceIds, {\n          clientOffset: _this._mouseClientOffset,\n          getSourceClientOffset: _this.getSourceClientOffset,\n          publishSource: false\n        });\n      }\n\n      if (!_this.monitor.isDragging()) {\n        return;\n      }\n\n      var sourceNode = _this.sourceNodes.get(_this.monitor.getSourceId());\n\n      _this.installSourceNodeRemovalObserver(sourceNode);\n\n      _this.actions.publishDragSource();\n\n      if (e.cancelable) e.preventDefault(); // Get the node elements of the hovered DropTargets\n\n      var dragOverTargetNodes = (dragOverTargetIds || []).map(function (key) {\n        return _this.targetNodes.get(key);\n      }).filter(function (e) {\n        return !!e;\n      }); // Get the a ordered list of nodes that are touched by\n\n      var elementsAtPoint = _this.options.getDropTargetElementsAtPoint ? _this.options.getDropTargetElementsAtPoint(clientOffset.x, clientOffset.y, dragOverTargetNodes) : _this.document.elementsFromPoint(clientOffset.x, clientOffset.y); // Extend list with parents that are not receiving elementsFromPoint events (size 0 elements and svg groups)\n\n      var elementsAtPointExtended = [];\n\n      for (var nodeId in elementsAtPoint) {\n        // eslint-disable-next-line no-prototype-builtins\n        if (!elementsAtPoint.hasOwnProperty(nodeId)) {\n          continue;\n        }\n\n        var currentNode = elementsAtPoint[nodeId];\n        elementsAtPointExtended.push(currentNode);\n\n        while (currentNode) {\n          currentNode = currentNode.parentElement;\n\n          if (currentNode && elementsAtPointExtended.indexOf(currentNode) === -1) {\n            elementsAtPointExtended.push(currentNode);\n          }\n        }\n      }\n\n      var orderedDragOverTargetIds = elementsAtPointExtended // Filter off nodes that arent a hovered DropTargets nodes\n      .filter(function (node) {\n        return dragOverTargetNodes.indexOf(node) > -1;\n      }) // Map back the nodes elements to targetIds\n      .map(function (node) {\n        return _this._getDropTargetId(node);\n      }) // Filter off possible null rows\n      .filter(function (node) {\n        return !!node;\n      }).filter(function (id, index, ids) {\n        return ids.indexOf(id) === index;\n      }); // Invoke hover for drop targets when source node is still over and pointer is outside\n\n      if (enableHoverOutsideTarget) {\n        for (var targetId in _this.targetNodes) {\n          var targetNode = _this.targetNodes.get(targetId);\n\n          if (sourceNode && targetNode && targetNode.contains(sourceNode) && orderedDragOverTargetIds.indexOf(targetId) === -1) {\n            orderedDragOverTargetIds.unshift(targetId);\n            break;\n          }\n        }\n      } // Reverse order because dnd-core reverse it before calling the DropTarget drop methods\n\n\n      orderedDragOverTargetIds.reverse();\n\n      _this.actions.hover(orderedDragOverTargetIds, {\n        clientOffset: clientOffset\n      });\n    });\n\n    _defineProperty(this, \"_getDropTargetId\", function (node) {\n      var keys = _this.targetNodes.keys();\n\n      var next = keys.next();\n\n      while (next.done === false) {\n        var targetId = next.value;\n\n        if (node === _this.targetNodes.get(targetId)) {\n          return targetId;\n        } else {\n          next = keys.next();\n        }\n      }\n\n      return undefined;\n    });\n\n    _defineProperty(this, \"handleTopMoveEndCapture\", function (e) {\n      _this._isScrolling = false;\n      _this.lastTargetTouchFallback = undefined;\n\n      if (!eventShouldEndDrag(e)) {\n        return;\n      }\n\n      if (!_this.monitor.isDragging() || _this.monitor.didDrop()) {\n        _this.moveStartSourceIds = undefined;\n        return;\n      }\n\n      if (e.cancelable) e.preventDefault();\n      _this._mouseClientOffset = {};\n\n      _this.uninstallSourceNodeRemovalObserver();\n\n      _this.actions.drop();\n\n      _this.actions.endDrag();\n    });\n\n    _defineProperty(this, \"handleCancelOnEscape\", function (e) {\n      if (e.key === 'Escape' && _this.monitor.isDragging()) {\n        _this._mouseClientOffset = {};\n\n        _this.uninstallSourceNodeRemovalObserver();\n\n        _this.actions.endDrag();\n      }\n    });\n\n    this.options = new OptionsReader(options, context);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.sourceNodes = new Map();\n    this.sourcePreviewNodes = new Map();\n    this.sourcePreviewNodeOptions = new Map();\n    this.targetNodes = new Map();\n    this.listenerTypes = [];\n    this._mouseClientOffset = {};\n    this._isScrolling = false;\n\n    if (this.options.enableMouseEvents) {\n      this.listenerTypes.push(ListenerType.mouse);\n    }\n\n    if (this.options.enableTouchEvents) {\n      this.listenerTypes.push(ListenerType.touch);\n    }\n\n    if (this.options.enableKeyboardEvents) {\n      this.listenerTypes.push(ListenerType.keyboard);\n    }\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(TouchBackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragOverTargetI;\n\n      return {\n        sourceNodes: this.sourceNodes.size,\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        targetNodes: this.targetNodes.size,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      invariant(!TouchBackendImpl.isSetUp, 'Cannot have two Touch backends at the same time.');\n      TouchBackendImpl.isSetUp = true;\n      this.addEventListener(root, 'start', this.getTopMoveStartHandler());\n      this.addEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.addEventListener(root, 'move', this.handleTopMove);\n      this.addEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.addEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.addEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.addEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.options.rootElement;\n\n      if (!root) {\n        return;\n      }\n\n      TouchBackendImpl.isSetUp = false;\n      this._mouseClientOffset = {};\n      this.removeEventListener(root, 'start', this.handleTopMoveStartCapture, true);\n      this.removeEventListener(root, 'start', this.handleTopMoveStart);\n      this.removeEventListener(root, 'move', this.handleTopMoveCapture, true);\n      this.removeEventListener(root, 'move', this.handleTopMove);\n      this.removeEventListener(root, 'end', this.handleTopMoveEndCapture, true);\n\n      if (this.options.enableMouseEvents && !this.options.ignoreContextMenu) {\n        this.removeEventListener(root, 'contextmenu', this.handleTopMoveEndCapture);\n      }\n\n      if (this.options.enableKeyboardEvents) {\n        this.removeEventListener(root, 'keydown', this.handleCancelOnEscape, true);\n      }\n\n      this.uninstallSourceNodeRemovalObserver();\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.addEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(subject, event, handler, capture) {\n      var options = supportsPassive ? {\n        capture: capture,\n        passive: false\n      } : capture;\n      this.listenerTypes.forEach(function (listenerType) {\n        var evt = eventNames[listenerType][event];\n\n        if (evt) {\n          subject.removeEventListener(evt, handler, options);\n        }\n      });\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node) {\n      var _this2 = this;\n\n      var handleMoveStart = this.handleMoveStart.bind(this, sourceId);\n      this.sourceNodes.set(sourceId, node);\n      this.addEventListener(node, 'start', handleMoveStart);\n      return function () {\n        _this2.sourceNodes.delete(sourceId);\n\n        _this2.removeEventListener(node, 'start', handleMoveStart);\n      };\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this3.sourcePreviewNodes.delete(sourceId);\n\n        _this3.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var root = this.options.rootElement;\n\n      if (!this.document || !root) {\n        return function () {\n          /* noop */\n        };\n      }\n\n      var handleMove = function handleMove(e) {\n        if (!_this4.document || !root || !_this4.monitor.isDragging()) {\n          return;\n        }\n\n        var coords;\n        /**\n         * Grab the coordinates for the current mouse/touch position\n         */\n\n        switch (e.type) {\n          case eventNames.mouse.move:\n            coords = {\n              x: e.clientX,\n              y: e.clientY\n            };\n            break;\n\n          case eventNames.touch.move:\n            coords = {\n              x: e.touches[0].clientX,\n              y: e.touches[0].clientY\n            };\n            break;\n        }\n        /**\n         * Use the coordinates to grab the element the drag ended on.\n         * If the element is the same as the target node (or any of it's children) then we have hit a drop target and can handle the move.\n         */\n\n\n        var droppedOn = coords != null ? _this4.document.elementFromPoint(coords.x, coords.y) : undefined;\n        var childMatch = droppedOn && node.contains(droppedOn);\n\n        if (droppedOn === node || childMatch) {\n          return _this4.handleMove(e, targetId);\n        }\n      };\n      /**\n       * Attaching the event listener to the body so that touchmove will work while dragging over multiple target elements.\n       */\n\n\n      this.addEventListener(this.document.body, 'move', handleMove);\n      this.targetNodes.set(targetId, node);\n      return function () {\n        if (_this4.document) {\n          _this4.targetNodes.delete(targetId);\n\n          _this4.removeEventListener(_this4.document.body, 'move', handleMove);\n        }\n      };\n    }\n  }, {\n    key: \"getTopMoveStartHandler\",\n    value: function getTopMoveStartHandler() {\n      if (!this.options.delayTouchStart && !this.options.delayMouseStart) {\n        return this.handleTopMoveStart;\n      }\n\n      return this.handleTopMoveStartDelay;\n    }\n  }, {\n    key: \"installSourceNodeRemovalObserver\",\n    value: function installSourceNodeRemovalObserver(node) {\n      var _this5 = this;\n\n      this.uninstallSourceNodeRemovalObserver();\n      this.draggedSourceNode = node;\n      this.draggedSourceNodeRemovalObserver = new MutationObserver(function () {\n        if (node && !node.parentElement) {\n          _this5.resurrectSourceNode();\n\n          _this5.uninstallSourceNodeRemovalObserver();\n        }\n      });\n\n      if (!node || !node.parentElement) {\n        return;\n      }\n\n      this.draggedSourceNodeRemovalObserver.observe(node.parentElement, {\n        childList: true\n      });\n    }\n  }, {\n    key: \"resurrectSourceNode\",\n    value: function resurrectSourceNode() {\n      if (this.document && this.draggedSourceNode) {\n        this.draggedSourceNode.style.display = 'none';\n        this.draggedSourceNode.removeAttribute('data-reactid');\n        this.document.body.appendChild(this.draggedSourceNode);\n      }\n    }\n  }, {\n    key: \"uninstallSourceNodeRemovalObserver\",\n    value: function uninstallSourceNodeRemovalObserver() {\n      if (this.draggedSourceNodeRemovalObserver) {\n        this.draggedSourceNodeRemovalObserver.disconnect();\n      }\n\n      this.draggedSourceNodeRemovalObserver = undefined;\n      this.draggedSourceNode = undefined;\n    }\n  }]);\n\n  return TouchBackendImpl;\n}();\n\n_defineProperty(TouchBackendImpl, \"isSetUp\", void 0);\n\nvar TouchBackend = function createBackend(manager) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new TouchBackendImpl(manager, context, options);\n};\n\nvar HTML5toTouch = {\n  backends: [{\n    backend: HTML5Backend,\n    transition: MouseTransition\n  }, {\n    backend: TouchBackend,\n    options: {\n      enableMouseEvents: true\n    },\n    preview: true,\n    transition: TouchTransition\n  }]\n};\n\nconst COLUMNS = 'abcdefgh'.split('');\nconst chessboardDefaultProps = {\n  animationDuration: 300,\n  areArrowsAllowed: true,\n  arePiecesDraggable: true,\n  arePremovesAllowed: false,\n  boardOrientation: 'white',\n  boardWidth: 560,\n  clearPremovesOnRightClick: true,\n  customArrows: [],\n  customArrowColor: 'rgb(255,170,0)',\n  customBoardStyle: {},\n  customDarkSquareStyle: {\n    backgroundColor: '#B58863'\n  },\n  customDndBackend: undefined,\n  customDndBackendOptions: undefined,\n  customDropSquareStyle: {\n    boxShadow: 'inset 0 0 1px 6px rgba(255,255,255,0.75)'\n  },\n  customLightSquareStyle: {\n    backgroundColor: '#F0D9B5'\n  },\n  customPieces: {},\n  customPremoveDarkSquareStyle: {\n    backgroundColor: '#A42323'\n  },\n  customPremoveLightSquareStyle: {\n    backgroundColor: '#BD2828'\n  },\n  customSquareStyles: {},\n  dropOffBoardAction: 'snapback',\n  id: 0,\n  isDraggablePiece: () => true,\n  getPositionObject: () => {},\n  onDragOverSquare: () => {},\n  onMouseOutSquare: () => {},\n  onMouseOverSquare: () => {},\n  onPieceClick: () => {},\n  onPieceDragBegin: () => {},\n  onPieceDragEnd: () => {},\n  onPieceDrop: () => true,\n  onSquareClick: () => {},\n  onSquareRightClick: () => {},\n  position: 'start',\n  showBoardNotation: true,\n  // showSparePieces: false,\n  snapToCursor: true\n};\n\nconst startPositionObject = {\n  a8: 'bR',\n  b8: 'bN',\n  c8: 'bB',\n  d8: 'bQ',\n  e8: 'bK',\n  f8: 'bB',\n  g8: 'bN',\n  h8: 'bR',\n  a7: 'bP',\n  b7: 'bP',\n  c7: 'bP',\n  d7: 'bP',\n  e7: 'bP',\n  f7: 'bP',\n  g7: 'bP',\n  h7: 'bP',\n  a2: 'wP',\n  b2: 'wP',\n  c2: 'wP',\n  d2: 'wP',\n  e2: 'wP',\n  f2: 'wP',\n  g2: 'wP',\n  h2: 'wP',\n  a1: 'wR',\n  b1: 'wN',\n  c1: 'wB',\n  d1: 'wQ',\n  e1: 'wK',\n  f1: 'wB',\n  g1: 'wN',\n  h1: 'wR'\n};\nconst whiteColumnValues = {\n  a: 0,\n  b: 1,\n  c: 2,\n  d: 3,\n  e: 4,\n  f: 5,\n  g: 6,\n  h: 7\n};\nconst blackColumnValues = {\n  a: 7,\n  b: 6,\n  c: 5,\n  d: 4,\n  e: 3,\n  f: 2,\n  g: 1,\n  h: 0\n};\nconst whiteRows = [7, 6, 5, 4, 3, 2, 1, 0];\nconst blackRows = [0, 1, 2, 3, 4, 5, 6, 7];\nconst getRelativeCoords = (boardOrientation, boardWidth, square) => {\n  const squareWidth = boardWidth / 8;\n  const columns = boardOrientation === 'white' ? whiteColumnValues : blackColumnValues;\n  const rows = boardOrientation === 'white' ? whiteRows : blackRows;\n  const x = columns[square[0]] * squareWidth + squareWidth / 2;\n  const y = rows[square[1] - 1] * squareWidth + squareWidth / 2;\n  return {\n    x,\n    y\n  };\n};\nconst isDifferentFromStart = newPosition => {\n  let isDifferent = false;\n  Object.keys(startPositionObject).forEach(square => {\n    if (newPosition[square] !== startPositionObject[square]) isDifferent = true;\n  });\n  Object.keys(newPosition).forEach(square => {\n    if (startPositionObject[square] !== newPosition[square]) isDifferent = true;\n  });\n  return isDifferent;\n};\nconst getPositionDifferences = (currentPosition, newPosition) => {\n  const difference = {\n    removed: {},\n    added: {}\n  }; // removed from current\n\n  Object.keys(currentPosition).forEach(square => {\n    if (newPosition[square] !== currentPosition[square]) difference.removed[square] = currentPosition[square];\n  }); // added from new\n\n  Object.keys(newPosition).forEach(square => {\n    if (currentPosition[square] !== newPosition[square]) difference.added[square] = newPosition[square];\n  });\n  return difference;\n};\n\nfunction isString(s) {\n  return typeof s === 'string';\n}\n\nfunction convertPositionToObject(position) {\n  if (position === 'start') return fenToObj('rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR');\n  if (validFen(position)) return fenToObj(position);\n  if (validPositionObject(position)) return position;\n  return {};\n}\nfunction fenToObj(fen) {\n  if (!validFen(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, '');\n  const rows = fen.split('/');\n  const position = {};\n  let currentRow = 8;\n\n  for (let i = 0; i < 8; i++) {\n    const row = rows[i].split('');\n    let colIdx = 0; // loop through each character in the FEN section\n\n    for (let j = 0; j < row.length; j++) {\n      // number / empty squares\n      if (row[j].search(/[1-8]/) !== -1) {\n        const numEmptySquares = parseInt(row[j], 10);\n        colIdx = colIdx + numEmptySquares;\n      } else {\n        // piece\n        const square = COLUMNS[colIdx] + currentRow;\n        position[square] = fenToPieceCode(row[j]);\n        colIdx = colIdx + 1;\n      }\n    }\n\n    currentRow = currentRow - 1;\n  }\n\n  return position;\n}\n\nfunction expandFenEmptySquares(fen) {\n  return fen.replace(/8/g, '11111111').replace(/7/g, '1111111').replace(/6/g, '111111').replace(/5/g, '11111').replace(/4/g, '1111').replace(/3/g, '111').replace(/2/g, '11');\n}\n\nfunction validFen(fen) {\n  if (!isString(fen)) return false; // cut off any move, castling, etc info from the end. we're only interested in position information\n\n  fen = fen.replace(/ .+$/, ''); // expand the empty square numbers to just 1s\n\n  fen = expandFenEmptySquares(fen); // FEN should be 8 sections separated by slashes\n\n  const chunks = fen.split('/');\n  if (chunks.length !== 8) return false; // check each section\n\n  for (let i = 0; i < 8; i++) {\n    if (chunks[i].length !== 8 || chunks[i].search(/[^kqrnbpKQRNBP1]/) !== -1) {\n      return false;\n    }\n  }\n\n  return true;\n} // convert FEN piece code to bP, wK, etc\n\nfunction fenToPieceCode(piece) {\n  // black piece\n  if (piece.toLowerCase() === piece) {\n    return 'b' + piece.toUpperCase();\n  } // white piece\n\n\n  return 'w' + piece.toUpperCase();\n}\n\nfunction validSquare(square) {\n  return isString(square) && square.search(/^[a-h][1-8]$/) !== -1;\n}\n\nfunction validPieceCode(code) {\n  return isString(code) && code.search(/^[bw][KQRNBP]$/) !== -1;\n}\n\nfunction validPositionObject(pos) {\n  if (pos === null || typeof pos !== 'object') return false;\n\n  for (const i in pos) {\n    if (!pos[i]) continue;\n\n    if (!validSquare(i) || !validPieceCode(pos[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst defaultPieces = {\n  wP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  wR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#ffffff',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 34,14 L 31,17 L 14,17 L 11,14\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,17 L 31,29.5 L 14,29.5 L 14,17\",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  wB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  wQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#ffffff',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,33.5 C 18,32.5 27,32.5 33,33.5\",\n        style: {\n          fill: 'none'\n        }\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      })]\n    })\n  }),\n  wK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#000000'\n        }\n      })]\n    })\n  }),\n  bP: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsx(\"path\", {\n      d: \"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z\",\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'nonzero',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'miter',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      }\n    })\n  }),\n  bR: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: '#000000',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \",\n        style: {\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \",\n        style: {\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12,35.5 L 33,35.5 L 33,35.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 13,31.5 L 32,31.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,29.5 L 31,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 14,16.5 L 31,16.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,14 L 34,14\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeWidth: '1',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bN: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\",\n        transform: \"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\",\n        style: {\n          fill: '#ffffff',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \",\n        style: {\n          fill: '#ffffff',\n          stroke: 'none'\n        }\n      })]\n    })\n  }),\n  bB: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        opacity: '1',\n        fill: 'none',\n        fillRule: 'evenodd',\n        fillOpacity: '1',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: '#000000',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\"\n        })]\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff',\n          strokeLinejoin: 'miter'\n        }\n      })]\n    })\n  }),\n  bQ: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: '#000000',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\",\n        style: {\n          strokeLinecap: 'butt',\n          fill: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11.5,30 C 15,29 30,29 33.5,30\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"m 12,33.5 c 6,-1 15,-1 21,0\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"6\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"14\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"22.5\",\n        cy: \"8\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"31\",\n        cy: \"9\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"circle\", {\n        cx: \"39\",\n        cy: \"12\",\n        r: \"2\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 11,38.5 A 35,35 1 0 0 34,38.5\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinecap: 'butt'\n        }\n      }), /*#__PURE__*/jsxs(\"g\", {\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        },\n        children: [/*#__PURE__*/jsx(\"path\", {\n          d: \"M 11,29 A 35,35 1 0 1 34,29\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 12.5,31.5 L 32.5,31.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"\n        }), /*#__PURE__*/jsx(\"path\", {\n          d: \"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"\n        })]\n      })]\n    })\n  }),\n  bK: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    width: \"45\",\n    height: \"45\",\n    children: /*#__PURE__*/jsxs(\"g\", {\n      style: {\n        fill: 'none',\n        fillOpacity: '1',\n        fillRule: 'evenodd',\n        stroke: '#000000',\n        strokeWidth: '1.5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeMiterlimit: '4',\n        strokeDasharray: 'none',\n        strokeOpacity: '1'\n      },\n      children: [/*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,11.63 L 22.5,6\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        },\n        id: \"path6570\"\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\",\n        style: {\n          fill: '#000000',\n          fillOpacity: '1',\n          strokeLinecap: 'butt',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37\",\n        style: {\n          fill: '#000000',\n          stroke: '#000000'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 20,8 L 25,8\",\n        style: {\n          fill: 'none',\n          stroke: '#000000',\n          strokeLinejoin: 'miter'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      }), /*#__PURE__*/jsx(\"path\", {\n        d: \"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37\",\n        style: {\n          fill: 'none',\n          stroke: '#ffffff'\n        }\n      })]\n    })\n  })\n};\n\nconst ChessboardContext = /*#__PURE__*/React.createContext();\nconst useChessboard = () => useContext(ChessboardContext);\nconst ChessboardProvider = /*#__PURE__*/forwardRef(({\n  animationDuration,\n  areArrowsAllowed,\n  arePiecesDraggable,\n  arePremovesAllowed,\n  boardOrientation,\n  boardWidth,\n  clearPremovesOnRightClick,\n  customArrows,\n  customArrowColor,\n  customBoardStyle,\n  customDarkSquareStyle,\n  customDropSquareStyle,\n  customLightSquareStyle,\n  customPieces,\n  customPremoveDarkSquareStyle,\n  customPremoveLightSquareStyle,\n  customSquareStyles,\n  dropOffBoardAction,\n  id,\n  isDraggablePiece,\n  getPositionObject,\n  onDragOverSquare,\n  onMouseOutSquare,\n  onMouseOverSquare,\n  onPieceClick,\n  onPieceDragBegin,\n  onPieceDragEnd,\n  onPieceDrop,\n  onSquareClick,\n  onSquareRightClick,\n  position,\n  showBoardNotation,\n  showSparePieces,\n  snapToCursor,\n  children\n}, ref) => {\n  // position stored and displayed on board\n  const [currentPosition, setCurrentPosition] = useState(convertPositionToObject(position)); // calculated differences between current and incoming positions\n\n  const [positionDifferences, setPositionDifferences] = useState({}); // colour of last piece moved to determine if premoving\n\n  const [lastPieceColour, setLastPieceColour] = useState(undefined); // current premoves\n\n  const [premoves, setPremoves] = useState([]); // ref used to access current value during timeouts (closures)\n\n  const premovesRef = useRef(premoves); // current right mouse down square\n\n  const [currentRightClickDown, setCurrentRightClickDown] = useState(); // current arrows\n\n  const [arrows, setArrows] = useState([]); // chess pieces/styling\n\n  const [chessPieces, setChessPieces] = useState({ ...defaultPieces,\n    ...customPieces\n  }); // whether the last move was a manual drop or not\n\n  const [manualDrop, setManualDrop] = useState(false); // the most recent timeout whilst waiting for animation to complete\n\n  const [previousTimeout, setPreviousTimeout] = useState(undefined); // if currently waiting for an animation to finish\n\n  const [waitingForAnimation, setWaitingForAnimation] = useState(false); // open clearPremoves() to allow user to call on undo/reset/whenever\n\n  useImperativeHandle(ref, () => ({\n    clearPremoves() {\n      clearPremoves();\n    }\n\n  })); // handle custom pieces change\n\n  useEffect(() => {\n    setChessPieces({ ...defaultPieces,\n      ...customPieces\n    });\n  }, [customPieces]); // handle external position change\n\n  useEffect(() => {\n    var _Object$keys, _Object$entries, _Object$entries$;\n\n    const newPosition = convertPositionToObject(position);\n    const differences = getPositionDifferences(currentPosition, newPosition);\n    const newPieceColour = ((_Object$keys = Object.keys(differences.added)) === null || _Object$keys === void 0 ? void 0 : _Object$keys.length) <= 2 ? (_Object$entries = Object.entries(differences.added)) === null || _Object$entries === void 0 ? void 0 : (_Object$entries$ = _Object$entries[0]) === null || _Object$entries$ === void 0 ? void 0 : _Object$entries$[1][0] : undefined; // external move has come in before animation is over\n    // cancel animation and immediately update position\n\n    if (waitingForAnimation) {\n      setCurrentPosition(newPosition);\n      setWaitingForAnimation(false);\n      arePremovesAllowed && attemptPremove(newPieceColour);\n\n      if (previousTimeout) {\n        clearTimeout(previousTimeout);\n      }\n    } else {\n      // move was made using drag and drop\n      if (manualDrop) {\n        setCurrentPosition(newPosition);\n        setWaitingForAnimation(false);\n        arePremovesAllowed && attemptPremove(newPieceColour);\n      } else {\n        // move was made by external position change\n        // if position === start then don't override newPieceColour\n        // needs isDifferentFromStart in scenario where premoves have been cleared upon board reset but first move is made by computer, the last move colour would need to be updated\n        if (isDifferentFromStart(newPosition) && lastPieceColour !== undefined) {\n          setLastPieceColour(newPieceColour);\n        } else {\n          // position === start, likely a board reset\n          setLastPieceColour(undefined);\n        }\n\n        setPositionDifferences(differences); // animate external move\n\n        setWaitingForAnimation(true);\n        const newTimeout = setTimeout(() => {\n          setCurrentPosition(newPosition);\n          setWaitingForAnimation(false);\n          arePremovesAllowed && attemptPremove(newPieceColour);\n        }, animationDuration);\n        setPreviousTimeout(newTimeout);\n      }\n    } // reset manual drop, ready for next move to be made by user or external\n\n\n    setManualDrop(false); // inform latest position information\n\n    getPositionObject(newPosition); // clear arrows\n\n    clearArrows(); // clear timeout on unmount\n\n    return () => {\n      clearTimeout(previousTimeout);\n    };\n  }, [position]); // handle external arrows change\n\n  useEffect(() => {\n    setArrows(customArrows);\n  }, [customArrows]); // handle drop position change\n\n  function handleSetPosition(sourceSq, targetSq, piece) {\n    // if dropped back down, don't do anything\n    if (sourceSq === targetSq) {\n      return;\n    }\n\n    clearArrows(); // if second move is made for same colour, or there are still premoves queued, then this move needs to be added to premove queue instead of played\n    // premoves length check for colour is added in because white could make 3 premoves, and then black responds to the first move (changing the last piece colour) and then white pre-moves again\n\n    if (arePremovesAllowed && waitingForAnimation || arePremovesAllowed && (lastPieceColour === piece[0] || premovesRef.current.filter(p => p.piece[0] === piece[0]).length > 0)) {\n      const oldPremoves = [...premovesRef.current];\n      oldPremoves.push({\n        sourceSq,\n        targetSq,\n        piece\n      });\n      premovesRef.current = oldPremoves;\n      setPremoves([...oldPremoves]);\n      return;\n    } // if transitioning, don't allow new drop\n\n\n    if (!arePremovesAllowed && waitingForAnimation) return;\n    const newOnDropPosition = { ...currentPosition\n    };\n    setManualDrop(true);\n    setLastPieceColour(piece[0]); // if onPieceDrop function provided, execute it, position must be updated externally and captured by useEffect above for this move to show on board\n\n    if (onPieceDrop.length) {\n      const isValidMove = onPieceDrop(sourceSq, targetSq, piece);\n      if (!isValidMove) clearPremoves();\n    } else {\n      // delete if dropping off board\n      if (dropOffBoardAction === 'trash' && !targetSq) {\n        delete newOnDropPosition[sourceSq];\n      } // delete source piece if not dropping from spare piece\n\n\n      if (sourceSq !== 'spare') {\n        delete newOnDropPosition[sourceSq];\n      } // add piece in new position\n\n\n      newOnDropPosition[targetSq] = piece;\n      setCurrentPosition(newOnDropPosition);\n    } // inform latest position information\n\n\n    getPositionObject(newOnDropPosition);\n  }\n\n  function attemptPremove(newPieceColour) {\n    if (premovesRef.current.length === 0) return; // get current value of premove as this is called in a timeout so value may have changed since timeout was set\n\n    const premove = premovesRef.current[0]; // if premove is a differing colour to last move made, then this move can be made\n\n    if (premove.piece[0] !== undefined && premove.piece[0] !== newPieceColour && onPieceDrop.length) {\n      setLastPieceColour(premove.piece[0]);\n      setManualDrop(true); // pre-move doesn't need animation\n\n      const isValidMove = onPieceDrop(premove.sourceSq, premove.targetSq, premove.piece); // premove was successful and can be removed from queue\n\n      if (isValidMove) {\n        const oldPremoves = [...premovesRef.current];\n        oldPremoves.shift();\n        premovesRef.current = oldPremoves;\n        setPremoves([...oldPremoves]);\n      } else {\n        // premove wasn't successful, clear premove queue\n        clearPremoves();\n      }\n    }\n  }\n\n  function clearPremoves(clearLastPieceColour = true) {\n    // don't clear when right clicking to clear, otherwise you won't be able to premove again before next go\n    if (clearLastPieceColour) setLastPieceColour(undefined);\n    premovesRef.current = [];\n    setPremoves([]);\n  }\n\n  function onRightClickDown(square) {\n    setCurrentRightClickDown(square);\n  }\n\n  function onRightClickUp(square) {\n    if (!areArrowsAllowed) return;\n\n    if (currentRightClickDown) {\n      // same square, don't draw an arrow, but do clear premoves and run onSquareRightClick\n      if (currentRightClickDown === square) {\n        setCurrentRightClickDown(null);\n        clearPremovesOnRightClick && clearPremoves(false);\n        onSquareRightClick(square);\n        return;\n      } // if arrow already exists then it needs to be removed\n\n\n      for (const i in arrows) {\n        if (arrows[i][0] === currentRightClickDown && arrows[i][1] === square) {\n          setArrows(oldArrows => {\n            const newArrows = [...oldArrows];\n            newArrows.splice(i, 1);\n            return newArrows;\n          });\n          return;\n        }\n      } // different square, draw an arrow\n\n\n      setArrows(oldArrows => [...oldArrows, [currentRightClickDown, square]]);\n    } else setCurrentRightClickDown(null);\n  }\n\n  function clearCurrentRightClickDown() {\n    setCurrentRightClickDown(null);\n  }\n\n  function clearArrows() {\n    setArrows([]);\n  }\n\n  return /*#__PURE__*/jsx(ChessboardContext.Provider, {\n    value: {\n      animationDuration,\n      arePiecesDraggable,\n      arePremovesAllowed,\n      boardOrientation,\n      boardWidth,\n      customArrowColor,\n      customBoardStyle,\n      customDarkSquareStyle,\n      customDropSquareStyle,\n      customLightSquareStyle,\n      customPremoveDarkSquareStyle,\n      customPremoveLightSquareStyle,\n      customSquareStyles,\n      dropOffBoardAction,\n      id,\n      isDraggablePiece,\n      getPositionObject,\n      onDragOverSquare,\n      onMouseOutSquare,\n      onMouseOverSquare,\n      onPieceClick,\n      onPieceDragBegin,\n      onPieceDragEnd,\n      onPieceDrop,\n      onSquareClick,\n      onSquareRightClick,\n      showBoardNotation,\n      showSparePieces,\n      snapToCursor,\n      arrows,\n      chessPieces,\n      clearArrows,\n      clearCurrentRightClickDown,\n      clearPremoves,\n      currentPosition,\n      handleSetPosition,\n      lastPieceColour,\n      manualDrop,\n      onRightClickDown,\n      onRightClickUp,\n      positionDifferences,\n      premoves,\n      setChessPieces,\n      setCurrentPosition,\n      setManualDrop,\n      waitingForAnimation\n    },\n    children: children\n  });\n});\n\nfunction Notation({\n  row,\n  col\n}) {\n  const {\n    boardOrientation,\n    boardWidth,\n    customDarkSquareStyle,\n    customLightSquareStyle\n  } = useChessboard();\n  const whiteColor = customLightSquareStyle.backgroundColor;\n  const blackColor = customDarkSquareStyle.backgroundColor;\n  const isRow = col === 0;\n  const isColumn = row === 7;\n  const isBottomLeftSquare = isRow && isColumn;\n\n  function getRow() {\n    return boardOrientation === 'white' ? 8 - row : row + 1;\n  }\n\n  function getColumn() {\n    return boardOrientation === 'black' ? COLUMNS[7 - col] : COLUMNS[col];\n  }\n\n  function renderBottomLeft() {\n    return /*#__PURE__*/jsxs(Fragment, {\n      children: [/*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...numericStyle(boardWidth)\n        },\n        children: getRow()\n      }), /*#__PURE__*/jsx(\"div\", {\n        style: { ...notationStyle,\n          ...{\n            color: whiteColor\n          },\n          ...alphaStyle(boardWidth)\n        },\n        children: getColumn()\n      })]\n    });\n  }\n\n  function renderLetters() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...{\n          color: col % 2 !== 0 ? blackColor : whiteColor\n        },\n        ...alphaStyle(boardWidth)\n      },\n      children: getColumn()\n    });\n  }\n\n  function renderNumbers() {\n    return /*#__PURE__*/jsx(\"div\", {\n      style: { ...notationStyle,\n        ...(boardOrientation === 'black' ? {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        } : {\n          color: row % 2 === 0 ? blackColor : whiteColor\n        }),\n        ...numericStyle(boardWidth)\n      },\n      children: getRow()\n    });\n  }\n\n  if (isBottomLeftSquare) {\n    return renderBottomLeft();\n  }\n\n  if (isColumn) {\n    return renderLetters();\n  }\n\n  if (isRow) {\n    return renderNumbers();\n  }\n\n  return null;\n}\n\nconst alphaStyle = width => ({\n  alignSelf: 'flex-end',\n  paddingLeft: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst numericStyle = width => ({\n  alignSelf: 'flex-start',\n  paddingRight: width / 8 - width / 48,\n  fontSize: width / 48\n});\n\nconst notationStyle = {\n  zIndex: 3,\n  position: 'absolute'\n};\n\nfunction Piece({\n  piece,\n  square,\n  squares,\n  isPremovedPiece = false\n}) {\n  const {\n    animationDuration,\n    arePiecesDraggable,\n    arePremovesAllowed,\n    boardWidth,\n    id,\n    isDraggablePiece,\n    onPieceClick,\n    onPieceDragBegin,\n    onPieceDragEnd,\n    premoves,\n    chessPieces,\n    dropTarget,\n    positionDifferences,\n    waitingForAnimation,\n    currentPosition\n  } = useChessboard();\n  const [pieceStyle, setPieceStyle] = useState({\n    opacity: 1,\n    zIndex: 5,\n    touchAction: 'none',\n    cursor: arePiecesDraggable && isDraggablePiece({\n      piece,\n      sourceSquare: square\n    }) ? '-webkit-grab' : 'default'\n  });\n  const [{\n    canDrag,\n    isDragging\n  }, drag, dragPreview] = useDrag(() => ({\n    type: 'piece',\n    item: () => {\n      onPieceDragBegin(piece, square);\n      return {\n        piece,\n        square,\n        id\n      };\n    },\n    end: () => onPieceDragEnd(piece, square),\n    collect: monitor => ({\n      canDrag: isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }),\n      isDragging: !!monitor.isDragging()\n    })\n  }), [piece, square, currentPosition, id]); // hide the default preview\n\n  useEffect(() => {\n    dragPreview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, []); // hide piece on drag\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      opacity: isDragging ? 0 : 1\n    }));\n  }, [isDragging]); // hide piece on matching premoves\n\n  useEffect(() => {\n    // if premoves aren't allowed, don't waste time on calculations\n    if (!arePremovesAllowed) return;\n    let hidePiece = false; // side effect: if piece moves into pre-moved square, its hidden\n    // if there are any premove targets on this square, hide the piece underneath\n\n    if (!isPremovedPiece && premoves.find(p => p.targetSq === square)) hidePiece = true; // if sourceSq === sq and piece matches then this piece has been pre-moved elsewhere?\n\n    if (premoves.find(p => p.sourceSq === square && p.piece === piece)) hidePiece = true; // TODO: If a premoved piece returns to a premoved square, it will hide (e1, e2, e1)\n\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      display: hidePiece ? 'none' : 'unset'\n    }));\n  }, [currentPosition, premoves]); // new move has come in\n  // if waiting for animation, then animation has started and we can perform animation\n  // we need to head towards where we need to go, we are the source, we are heading towards the target\n\n  useEffect(() => {\n    var _positionDifferences$;\n\n    const removedPiece = (_positionDifferences$ = positionDifferences.removed) === null || _positionDifferences$ === void 0 ? void 0 : _positionDifferences$[square]; // return as null and not loaded yet\n\n    if (!positionDifferences.added) return; // check if piece matches or if removed piece was a pawn and new square is on 1st or 8th rank (promotion)\n\n    const newSquare = Object.entries(positionDifferences.added).find(([s, p]) => p === removedPiece || (removedPiece === null || removedPiece === void 0 ? void 0 : removedPiece[1]) === 'P' && (s[1] === '1' || s[1] === '8')); // we can perform animation if our square was in removed, AND the matching piece is in added AND this isn't a premoved piece\n\n    if (waitingForAnimation && removedPiece && newSquare && !isPremovedPiece) {\n      const {\n        sourceSq,\n        targetSq\n      } = getSquareCoordinates(square, newSquare[0]);\n\n      if (sourceSq && targetSq) {\n        setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n          transform: `translate(${targetSq.x - sourceSq.x}px, ${targetSq.y - sourceSq.y}px)`,\n          transition: `transform ${animationDuration}ms`,\n          zIndex: 6\n        }));\n      }\n    }\n  }, [positionDifferences]); // translate to their own positions (repaint on undo)\n\n  useEffect(() => {\n    const {\n      sourceSq\n    } = getSingleSquareCoordinates(square);\n\n    if (sourceSq) {\n      setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n        transform: `translate(${0}px, ${0}px)`,\n        transition: `transform ${0}ms`\n      }));\n    }\n  }, [currentPosition]); // update is piece draggable\n\n  useEffect(() => {\n    setPieceStyle(oldPieceStyle => ({ ...oldPieceStyle,\n      cursor: arePiecesDraggable && isDraggablePiece({\n        piece,\n        sourceSquare: square\n      }) ? '-webkit-grab' : 'default'\n    }));\n  }, [square, currentPosition, arePiecesDraggable]);\n\n  function getSingleSquareCoordinates(square) {\n    return {\n      sourceSq: squares[square]\n    };\n  }\n\n  function getSquareCoordinates(sourceSquare, targetSquare) {\n    return {\n      sourceSq: squares[sourceSquare],\n      targetSq: squares[targetSquare]\n    };\n  }\n\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: arePiecesDraggable ? canDrag ? drag : null : null,\n    onClick: () => onPieceClick(piece),\n    style: pieceStyle,\n    children: typeof chessPieces[piece] === 'function' ? chessPieces[piece]({\n      squareWidth: boardWidth / 8,\n      isDragging,\n      droppedPiece: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.piece,\n      targetSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.target,\n      sourceSquare: dropTarget === null || dropTarget === void 0 ? void 0 : dropTarget.source\n    }) : /*#__PURE__*/jsx(\"svg\", {\n      viewBox: '1 1 43 43',\n      width: boardWidth / 8,\n      height: boardWidth / 8,\n      children: /*#__PURE__*/jsx(\"g\", {\n        children: chessPieces[piece]\n      })\n    })\n  });\n}\n\nfunction Square({\n  square,\n  squareColor,\n  setSquares,\n  squareHasPremove,\n  children\n}) {\n  const squareRef = useRef();\n  const {\n    boardWidth,\n    boardOrientation,\n    clearArrows,\n    currentPosition,\n    customBoardStyle,\n    customDarkSquareStyle,\n    customDropSquareStyle,\n    customLightSquareStyle,\n    customPremoveDarkSquareStyle,\n    customPremoveLightSquareStyle,\n    customSquareStyles,\n    handleSetPosition,\n    lastPieceColour,\n    onDragOverSquare,\n    onMouseOutSquare,\n    onMouseOverSquare,\n    onPieceDrop,\n    onRightClickDown,\n    onRightClickUp,\n    onSquareClick,\n    waitingForAnimation\n  } = useChessboard();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: 'piece',\n    drop: item => handleSetPosition(item.square, square, item.piece),\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }), [square, currentPosition, onPieceDrop, waitingForAnimation, lastPieceColour]);\n  useEffect(() => {\n    const {\n      x,\n      y\n    } = squareRef.current.getBoundingClientRect();\n    setSquares(oldSquares => ({ ...oldSquares,\n      [square]: {\n        x,\n        y\n      }\n    }));\n  }, [boardWidth, boardOrientation]);\n  const defaultSquareStyle = { ...borderRadius(customBoardStyle, square, boardOrientation),\n    ...(squareColor === 'black' ? customDarkSquareStyle : customLightSquareStyle),\n    ...(squareHasPremove && (squareColor === 'black' ? customPremoveDarkSquareStyle : customPremoveLightSquareStyle)),\n    ...(isOver && customDropSquareStyle)\n  };\n  return /*#__PURE__*/jsx(\"div\", {\n    ref: drop,\n    style: defaultSquareStyle,\n    \"data-square-color\": squareColor,\n    \"data-square\": square,\n    onMouseOver: () => onMouseOverSquare(square),\n    onMouseOut: () => onMouseOutSquare(square),\n    onMouseDown: e => {\n      if (e.button === 2) onRightClickDown(square);\n    },\n    onMouseUp: e => {\n      if (e.button === 2) onRightClickUp(square);\n    },\n    onDragEnter: () => onDragOverSquare(square),\n    onClick: () => {\n      onSquareClick(square);\n      clearArrows();\n    },\n    onContextMenu: e => {\n      e.preventDefault();\n    },\n    children: /*#__PURE__*/jsx(\"div\", {\n      ref: squareRef,\n      style: { ...size(boardWidth),\n        ...center,\n        ...(!squareHasPremove && (customSquareStyles === null || customSquareStyles === void 0 ? void 0 : customSquareStyles[square]))\n      },\n      children: children\n    })\n  });\n}\nconst center = {\n  display: 'flex',\n  justifyContent: 'center'\n};\n\nconst size = width => ({\n  width: width / 8,\n  height: width / 8\n});\n\nconst borderRadius = (customBoardStyle, square, boardOrientation) => {\n  if (!customBoardStyle.borderRadius) return {};\n\n  if (square === 'a1') {\n    return boardOrientation === 'white' ? {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'a8') {\n    return boardOrientation === 'white' ? {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h1') {\n    return boardOrientation === 'white' ? {\n      borderBottomRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderTopLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  if (square === 'h8') {\n    return boardOrientation === 'white' ? {\n      borderTopRightRadius: customBoardStyle.borderRadius\n    } : {\n      borderBottomLeftRadius: customBoardStyle.borderRadius\n    };\n  }\n\n  return {};\n};\n\nfunction Squares({\n  children\n}) {\n  const {\n    boardOrientation,\n    boardWidth,\n    customBoardStyle,\n    id\n  } = useChessboard();\n  return /*#__PURE__*/jsx(\"div\", {\n    \"data-boardid\": id,\n    style: { ...boardStyles(boardWidth),\n      ...customBoardStyle\n    },\n    children: [...Array(8)].map((_, r) => {\n      return /*#__PURE__*/jsx(\"div\", {\n        style: rowStyles(boardWidth),\n        children: [...Array(8)].map((_, c) => {\n          // a1, a2 ...\n          const square = boardOrientation === 'black' ? COLUMNS[7 - c] + (r + 1) : COLUMNS[c] + (8 - r);\n          const squareColor = c % 2 === r % 2 ? 'white' : 'black';\n          return children({\n            square,\n            squareColor,\n            col: c,\n            row: r\n          });\n        })\n      }, r.toString());\n    })\n  });\n}\n\nconst boardStyles = width => ({\n  cursor: 'default',\n  height: width,\n  width\n});\n\nconst rowStyles = width => ({\n  display: 'flex',\n  flexWrap: 'nowrap',\n  width\n});\n\nconst errorImage = {\n  whiteKing: /*#__PURE__*/jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    version: \"1.1\",\n    style: {\n      shapeRendering: 'geometricPrecision',\n      textRendering: 'geometricPrecision',\n      imageRendering: 'optimizeQuality'\n    },\n    viewBox: \"0 0 4210 12970\",\n    x: \"0px\",\n    y: \"0px\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    width: \"250\",\n    height: \"250\",\n    children: /*#__PURE__*/jsx(\"g\", {\n      children: /*#__PURE__*/jsx(\"path\", {\n        style: {\n          fill: 'black',\n          fillRule: 'nonzero'\n        },\n        d: \"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z\"\n      })\n    })\n  })\n};\n\nfunction ErrorBoundary({\n  children\n}) {\n  try {\n    return children;\n  } catch (error) {\n    return /*#__PURE__*/jsx(WhiteKing, {\n      showError: true\n    });\n  }\n}\nfunction WhiteKing({\n  showError = false\n}) {\n  return /*#__PURE__*/jsxs(\"div\", {\n    style: container,\n    children: [/*#__PURE__*/jsx(\"div\", {\n      style: whiteKingStyle,\n      children: errorImage.whiteKing\n    }), showError && /*#__PURE__*/jsx(\"h1\", {\n      children: \"Something went wrong\"\n    })]\n  });\n}\nconst container = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  flexDirection: 'column'\n};\nconst whiteKingStyle = {\n  width: 250,\n  height: 250,\n  transform: 'rotate(90deg)'\n};\n\nfunction Board() {\n  const boardRef = useRef();\n  const [squares, setSquares] = useState({});\n  const {\n    arrows,\n    boardOrientation,\n    boardWidth,\n    clearCurrentRightClickDown,\n    customArrowColor,\n    showBoardNotation,\n    currentPosition,\n    premoves\n  } = useChessboard();\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (boardRef.current && !boardRef.current.contains(event.target)) {\n        clearCurrentRightClickDown();\n      }\n    }\n\n    document.addEventListener('mouseup', handleClickOutside);\n    return () => {\n      document.removeEventListener('mouseup', handleClickOutside);\n    };\n  }, []);\n  return boardWidth ? /*#__PURE__*/jsxs(\"div\", {\n    ref: boardRef,\n    style: {\n      position: 'relative'\n    },\n    children: [/*#__PURE__*/jsx(Squares, {\n      children: ({\n        square,\n        squareColor,\n        col,\n        row\n      }) => {\n        const squareHasPremove = premoves.find(p => p.sourceSq === square || p.targetSq === square);\n        const squareHasPremoveTarget = premoves.find(p => p.targetSq === square);\n        return /*#__PURE__*/jsxs(Square, {\n          square: square,\n          squareColor: squareColor,\n          setSquares: setSquares,\n          squareHasPremove: squareHasPremove,\n          children: [currentPosition[square] && /*#__PURE__*/jsx(Piece, {\n            piece: currentPosition[square],\n            square: square,\n            squares: squares\n          }), squareHasPremoveTarget && /*#__PURE__*/jsx(Piece, {\n            isPremovedPiece: true,\n            piece: squareHasPremoveTarget.piece,\n            square: square,\n            squares: squares\n          }), showBoardNotation && /*#__PURE__*/jsx(Notation, {\n            row: row,\n            col: col\n          })]\n        }, `${col}${row}`);\n      }\n    }), /*#__PURE__*/jsx(\"svg\", {\n      width: boardWidth,\n      height: boardWidth,\n      style: {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        pointerEvents: 'none',\n        zIndex: '10'\n      },\n      children: arrows.map(arrow => {\n        const from = getRelativeCoords(boardOrientation, boardWidth, arrow[0]);\n        const to = getRelativeCoords(boardOrientation, boardWidth, arrow[1]);\n        return /*#__PURE__*/jsxs(Fragment$1, {\n          children: [/*#__PURE__*/jsx(\"defs\", {\n            children: /*#__PURE__*/jsx(\"marker\", {\n              id: \"arrowhead\",\n              markerWidth: \"2\",\n              markerHeight: \"2.5\",\n              refX: \"1.25\",\n              refY: \"1.25\",\n              orient: \"auto\",\n              children: /*#__PURE__*/jsx(\"polygon\", {\n                points: \"0 0, 2 1.25, 0 2.5\",\n                style: {\n                  fill: customArrowColor\n                }\n              })\n            })\n          }), /*#__PURE__*/jsx(\"line\", {\n            x1: from.x,\n            y1: from.y,\n            x2: to.x,\n            y2: to.y,\n            style: {\n              stroke: customArrowColor,\n              strokeWidth: boardWidth / 36\n            },\n            markerEnd: \"url(#arrowhead)\"\n          })]\n        }, `${arrow[0]}-${arrow[1]}`);\n      })\n    })]\n  }) : /*#__PURE__*/jsx(WhiteKing, {});\n}\n\nfunction CDragLayer(props) {\n  const {\n    boardWidth,\n    chessPieces,\n    id,\n    snapToCursor\n  } = useChessboard();\n  const {\n    isDragging,\n    item,\n    clientOffset,\n    sourceClientOffset\n  } = props;\n  const layerStyles = {\n    position: 'fixed',\n    pointerEvents: 'none',\n    zIndex: 10,\n    left: 0,\n    top: 0\n  };\n  const getItemStyle = useCallback((clientOffset, sourceClientOffset) => {\n    if (!clientOffset || !sourceClientOffset) return {\n      display: 'none'\n    };\n    let {\n      x,\n      y\n    } = snapToCursor ? clientOffset : sourceClientOffset;\n\n    if (snapToCursor) {\n      const halfSquareWidth = boardWidth / 8 / 2;\n      x -= halfSquareWidth;\n      y -= halfSquareWidth;\n    }\n\n    const transform = `translate(${x}px, ${y}px)`;\n    return {\n      transform,\n      WebkitTransform: transform,\n      touchAction: 'none'\n    };\n  }, [boardWidth, snapToCursor]);\n  return isDragging && item.id === id ? /*#__PURE__*/jsx(\"div\", {\n    style: layerStyles,\n    children: /*#__PURE__*/jsx(\"div\", {\n      style: getItemStyle(clientOffset, sourceClientOffset),\n      children: typeof chessPieces[item.piece] === 'function' ? chessPieces[item.piece]({\n        squareWidth: boardWidth / 8,\n        isDragging: true\n      }) : /*#__PURE__*/jsx(\"svg\", {\n        viewBox: '1 1 43 43',\n        width: boardWidth / 8,\n        height: boardWidth / 8,\n        children: /*#__PURE__*/jsx(\"g\", {\n          children: chessPieces[item.piece]\n        })\n      })\n    })\n  }) : null;\n}\n\nfunction collect(monitor) {\n  return {\n    item: monitor.getItem(),\n    clientOffset: monitor.getClientOffset(),\n    sourceClientOffset: monitor.getSourceClientOffset(),\n    isDragging: monitor.isDragging()\n  };\n}\n\nconst CustomDragLayer = DragLayer(collect)(CDragLayer);\n\nconst Chessboard = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    customDndBackend,\n    customDndBackendOptions,\n    ...otherProps\n  } = props;\n  return /*#__PURE__*/jsx(ErrorBoundary, {\n    children: /*#__PURE__*/jsx(DndProvider, {\n      backend: customDndBackend || MultiBackend,\n      options: customDndBackend ? customDndBackendOptions : HTML5toTouch,\n      children: /*#__PURE__*/jsxs(ChessboardProvider, {\n        ref: ref,\n        ...otherProps,\n        children: [/*#__PURE__*/jsx(CustomDragLayer, {}), /*#__PURE__*/jsx(\"div\", {\n          children: /*#__PURE__*/jsx(Board, {})\n        })]\n      })\n    })\n  });\n});\nChessboard.defaultProps = chessboardDefaultProps;\n\nexport { Chessboard };\n"]},"metadata":{},"sourceType":"module"}